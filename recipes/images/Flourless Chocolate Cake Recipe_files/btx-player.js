!function(){"use strict";try{if("undefined"!=typeof document){var e=document.createElement("style");e.appendChild(document.createTextNode('@charset "UTF-8";.product-item.svelte-qpn6ad{display:flex;align-items:center;flex:0 1 100%}.product-item__image.svelte-qpn6ad{width:55px;height:55px;display:flex;align-items:center;justify-content:center;margin:0 5px}.product-item__image--placeholder.svelte-qpn6ad{background-color:#0000004d;width:55px;height:55px;border-radius:30px}.product-item__details.svelte-qpn6ad{flex-grow:1;margin:0 0 0 10px;min-height:55px;display:flex;flex-direction:column;justify-content:center}.product-item__name.svelte-qpn6ad,.product-item__subhead.svelte-qpn6ad,.product-item__price.svelte-qpn6ad{font-family:var(--pol-theme-secondary-font-family);font-size:14px;line-height:20px}.product-item__name.svelte-qpn6ad{margin:0;font-weight:700}.product-item__subhead.svelte-qpn6ad{font-weight:400;margin:0;-webkit-font-smoothing:antialiased}.product-item__footer.svelte-qpn6ad{display:flex;align-items:center;line-height:28px;height:auto}.product-item__price.svelte-qpn6ad{margin:0 19px 0 0;font-weight:700}.product-item__use-item.svelte-qpn6ad{font-size:14px;font-weight:700;background-color:#0000;border:none;cursor:pointer;padding:0;border-bottom:1px solid rgb(var(--pol-theme-primary-color));line-height:20px}.product-item__swap.svelte-qpn6ad{background-color:#0000;border:none;cursor:pointer}.product-item__swap-text.svelte-qpn6ad{font:14px/20px var(--pol-theme-secondary-font-family);margin-left:5px;font-weight:700;text-underline-offset:4px;align-items:center;border:none;background-color:#0000;text-decoration:underline;text-decoration-color:rgb(var(--pol-theme-primary-color))}:root{--btn-color:#fff;--btn-bg-color:#26a69a;--recipe-btn-bg-color:#e04006;--cart-btn-bg-color:#0071ce;--product-btn-bg-color:#0071ce}.btn-prx.svelte-j7g2u7.svelte-j7g2u7{text-decoration:none;color:var(--btn-color);background-color:var(--btn-bg-color);text-align:center;transition:background-color .2s ease-out;cursor:pointer;outline:0;vertical-align:middle;border:none}.btn-prx__text.svelte-j7g2u7.svelte-j7g2u7{display:flex;align-items:center;justify-content:center}.btn-prx.svelte-j7g2u7.svelte-j7g2u7:disabled{opacity:.3;cursor:not-allowed}.btn-prx--recipe.svelte-j7g2u7.svelte-j7g2u7{display:block;width:100%;min-height:30px;border-radius:5px;font-weight:700;background-color:var(--recipe-btn-bg-color);font-size:13px;text-transform:none}.btn-prx--product.svelte-j7g2u7.svelte-j7g2u7{height:30px;border-radius:5px;width:95px;font-weight:700;white-space:inherit;background-color:var(--product-btn-bg-color);font-size:.8em;bottom:145px;left:160px;top:70px;padding:7px 6px;text-transform:none}.btn-prx--proxima-cart.svelte-j7g2u7.svelte-j7g2u7{background-color:rgb(var(--pol-theme-primary-color));padding:8px 16px;font-weight:700;font-size:14px}.btn-prx--proxima-cart--total.svelte-j7g2u7.svelte-j7g2u7{height:36px}.btn-prx--proxima-cart--store-locations.svelte-j7g2u7.svelte-j7g2u7{width:100%;max-width:307px;height:48px;font:700 14px/20px var(--pol-theme-secondary-font-family)}.btn-prx--proxima-cart.kroger-go-to-cart.svelte-j7g2u7.svelte-j7g2u7:hover{background-color:#000}.btn-prx--proxima-cart.kroger-go-to-cart--close.svelte-j7g2u7.svelte-j7g2u7{background-color:transparent;width:16px;padding:0;margin-left:auto}.btn-prx--proxima-retailer-footer--pau-carousel.svelte-j7g2u7.svelte-j7g2u7{background-color:rgb(var(--pol-theme-primary-color));padding:6px 12px;border-radius:5px;font-size:13px}.btn-prx--proxima-retailer-footer--pau-carousel.svelte-j7g2u7 .btn-prx-text.svelte-j7g2u7{display:block}.btn-prx--proxima-retailer-footer--pau-carousel.proxima-retailer-footer--pau-carousel--non-retailer.svelte-j7g2u7.svelte-j7g2u7{background:#000}.btn-prx--proxima-retailer-footer--pau-carousel.proxima-retailer-footer--pau-carousel--non-retailer.svelte-j7g2u7 .btn-prx-text.svelte-j7g2u7{font-weight:700}.btn-prx--lrs.svelte-j7g2u7.svelte-j7g2u7{height:48px}.btn-prx--lrs.open-location-modal.svelte-j7g2u7.svelte-j7g2u7{height:auto;font:400 14px/20px Arial,sans-serif;background:none;color:#000000f2;text-decoration:underline 1px rgb(var(--pol-site-theme-secondary-color));text-underline-offset:2px;padding:0;margin-left:6px}.btn-prx--lrs.close-location-modal.svelte-j7g2u7.svelte-j7g2u7{background:none;height:auto;width:auto;padding:0}.btn-prx--lrs.shopper-cta.svelte-j7g2u7.svelte-j7g2u7{border:var(--pol-theme-primary-button-border);background-color:rgb(var(--pol-theme-primary-button-color));width:192px;display:flex;align-items:center;justify-content:center;border-radius:4px}.btn-prx--lrs.shopper-cta.svelte-j7g2u7 .btn-prx-text.svelte-j7g2u7{font-size:14px;font-weight:700;color:var(--pol-theme-primary-button-text-color)}.btn-prx--lrs.geolocate-button.svelte-j7g2u7.svelte-j7g2u7{background-color:rgb(var(--pol-site-theme-primary-color));width:100%}.btn-prx--lrs.geolocate-button.svelte-j7g2u7 .btn-prx-text.svelte-j7g2u7{font:700 14px/20px var(--pol-theme-secondary-font-family)}.btn-prx--spla.svelte-j7g2u7.svelte-j7g2u7{display:inline-block;border:var(--pol-theme-primary-button-border);background-color:rgb(var(--pol-theme-primary-button-color));border-radius:14px;padding:6px 15px;text-align:center;cursor:pointer}.btn-prx--spla.svelte-j7g2u7 .btn-prx-text.svelte-j7g2u7{font-size:14px;font-weight:700;color:var(--pol-theme-primary-button-text-color)}.btn-prx--cvs-scheduler.svelte-j7g2u7.svelte-j7g2u7{background-color:#e31837;border-radius:8px;padding:10px;width:100%}.btn-prx--cvs-scheduler.svelte-j7g2u7 .btn-prx-text.svelte-j7g2u7{font-family:CVS Health Sans,Arial,Helvetica,sans-serif;font-size:20px;font-weight:500;line-height:34px;color:#fff}.btn-prx--cvs-scheduler-footer.svelte-j7g2u7.svelte-j7g2u7{display:flex;justify-content:center;align-items:center;width:230px;margin:0 auto}.btn-prx--cvs-scheduler-footer.--background-black.svelte-j7g2u7.svelte-j7g2u7{background-color:#000}.btn-prx--prx-address--lrs-header.svelte-j7g2u7.svelte-j7g2u7{background:none;color:#000000f2;text-underline-offset:2px;padding:0;margin-left:4px;vertical-align:unset}.btn-prx--prx-address--lrs-header.svelte-j7g2u7 .btn-prx-text__text.svelte-j7g2u7{text-decoration:underline;text-decoration-color:rgb(var(--pol-site-theme-secondary-color));text-decoration-thickness:1px}.btn-prx--prx-address--cart-footer.svelte-j7g2u7.svelte-j7g2u7{background:none;margin:0;padding:0;text-decoration:none;font-size:inherit;color:#000;font-weight:700;border-bottom:1px solid rgb(var(--pol-theme-primary-color))}.btn-prx--mxr--storepicker.svelte-j7g2u7.svelte-j7g2u7{background:none;margin:0;padding:0;text-decoration:none;font-size:inherit;color:#000;font-weight:700;border-bottom:1px solid var(--pol-site-theme-primary-color)}.btn-prx--mxr--checkout.svelte-j7g2u7.svelte-j7g2u7{font-size:12px;line-height:20px;font-weight:700;padding:4px 14px;background-color:var(--pol-site-theme-primary-color)}.btn-listing.svelte-j7g2u7.svelte-j7g2u7{font-size:var(--font-size);letter-spacing:var(--letter-spacing);text-transform:uppercase;width:76px;height:24px;border-radius:2px;background-color:#fff;border:1px solid #191919;display:flex;justify-content:center;align-items:center;color:#000}.btn-listing--listing.svelte-j7g2u7.svelte-j7g2u7{--font-size:9px;--letter-spacing:.87px;font-weight:initial;flex-direction:row;flex-wrap:nowrap}.btn-listing--active.svelte-j7g2u7.svelte-j7g2u7{background-color:#d3dae5}.btn-listing--search.svelte-j7g2u7.svelte-j7g2u7{--font-size:8px;--letter-spacing:.89px}.btn-listing--search.svelte-j7g2u7.svelte-j7g2u7:hover{background-color:#d3dae5}.prx-address.svelte-clnvbh.svelte-clnvbh{font-size:inherit}.prx-address__store-name.svelte-clnvbh.svelte-clnvbh{font-weight:700;text-transform:capitalize}.prx-address__street__text.svelte-clnvbh.svelte-clnvbh,.prx-address__city-state-zip__city__text.svelte-clnvbh.svelte-clnvbh{text-transform:capitalize}.prx-address__city-state-zip__state__text.svelte-clnvbh.svelte-clnvbh{text-transform:uppercase}.prx-address--inline.svelte-clnvbh .prx-address__store-name.svelte-clnvbh,.prx-address--inline.svelte-clnvbh .prx-address__store-id.svelte-clnvbh,.prx-address--inline.svelte-clnvbh .prx-address__street.svelte-clnvbh,.prx-address--inline.svelte-clnvbh .prx-address__city-state-zip.svelte-clnvbh,.prx-address--inline.svelte-clnvbh .prx-address__change_store.svelte-clnvbh,.prx-address--stacked.svelte-clnvbh .prx-address__store-name.svelte-clnvbh,.prx-address--stacked.svelte-clnvbh .prx-address__store-id.svelte-clnvbh{display:inline}.prx-address--stacked.svelte-clnvbh .prx-address__street.svelte-clnvbh,.prx-address--stacked.svelte-clnvbh .prx-address__city-state-zip.svelte-clnvbh,.prx-address--stacked.svelte-clnvbh .prx-address__change_store.svelte-clnvbh{display:block}.prx-address--mixed.svelte-clnvbh .prx-address__store-name.svelte-clnvbh,.prx-address--mixed.svelte-clnvbh .prx-address__store-id.svelte-clnvbh,.prx-address--mixed.svelte-clnvbh .prx-address__street.svelte-clnvbh{display:inline}.prx-address--mixed.svelte-clnvbh .prx-address__city-state-zip.svelte-clnvbh,.prx-address--mixed.svelte-clnvbh .prx-address__change_store.svelte-clnvbh{display:block}.proxima-cart-list-item__item__retailer-address.svelte-zo8i1o{align-items:center;justify-content:space-between;width:100%;display:flex;padding-left:10px;font-family:var(--pol-theme-secondary-font-family);font-size:14px;line-height:20px;-webkit-font-smoothing:antialiased}.proxima-cart-list-item__item__retailer-address__distance.svelte-zo8i1o{font-weight:700;text-wrap:nowrap}.proxima-cart-list.svelte-1aotap6{margin:0;padding:0 16px;overflow-y:auto}.proxima-cart-list-item.svelte-1aotap6{margin:0;padding:16px 10px;display:flex;align-items:center;border-bottom:1px solid rgba(0,0,0,.15)}.proxima-cart-list-item.svelte-1aotap6:last-child{border-bottom:none}.proxima-cart-section.svelte-pi7ly8{margin-top:20px}.proxima-cart-section__header.svelte-pi7ly8{text-align:center;display:flex;flex-direction:row;align-items:center;height:20px}.proxima-cart-section__header-text.svelte-pi7ly8{font-size:10px;text-transform:uppercase;letter-spacing:.3px;font-weight:600}.proxima-cart-section__header.svelte-pi7ly8:before,.proxima-cart-section__header.svelte-pi7ly8:after{content:"";flex:1 1;border-bottom:1px rgba(0,0,0,.25) dashed;margin:auto 16px}.proxima-cart-screen--products.svelte-l4k88z{flex:0 0 auto;display:flex;flex-direction:column}.proxima-cart-screen--products-hero.svelte-l4k88z{display:flex;flex-direction:column;flex:0 0 auto;border-bottom:.5px dotted #999}.proxima-cart-screen--products-hero__image-container.svelte-l4k88z{margin:0 auto}.proxima-cart-screen--products-hero__description.svelte-l4k88z{display:flex;justify-content:center;padding:8px 16px;font-family:var(--pol-theme-secondary-font-family);font-size:14px;font-weight:400;line-height:20px}.proxima-cart-screen--products-list.svelte-l4k88z{flex-grow:1}.back-to-cart.svelte-1eevszc{padding:10px 24px;flex:0 0 auto;display:inline-flex;font-size:14px}.back-to-cart__btn.svelte-1eevszc{all:unset;cursor:pointer;display:flex;align-items:center}.back-to-cart__title.svelte-1eevszc{margin:0 0 0 10px;flex:0 0 auto;font-weight:700}.swap-ingredient.svelte-yjd0q5.svelte-yjd0q5{font-size:14px;line-height:20px;display:flex;flex-direction:column;flex-grow:1}.swap-ingredient__current-item.svelte-yjd0q5.svelte-yjd0q5{flex:0 0 auto;padding:10px 24px;display:flex;flex-direction:column;border-bottom:1px solid rgba(0,0,0,.15)}.swap-ingredient__current-item.svelte-yjd0q5 .current-item__details.svelte-yjd0q5{padding:8px 0 0;font-weight:700;font-family:var(--pol-theme-secondary-font-family)}.swap-ingredient__current-item.svelte-yjd0q5 .current-item__image.svelte-yjd0q5{margin:0 auto;width:75px;height:75px}.swap-ingredient__current-item.svelte-yjd0q5 .current-item__subhead.svelte-yjd0q5{font-weight:400}.proxima-cart-screen--swap-ingredient.svelte-2uljku{flex-grow:1;overflow:hidden;display:flex}.proxima-cart-screen--stores-list.svelte-y79h8h.svelte-y79h8h{overflow-y:hidden;display:flex;flex-direction:column;flex-grow:1}.proxima-cart-screen--stores-list.svelte-y79h8h .stores-list__sorted.svelte-y79h8h{padding:8px 24px;border-bottom:1px solid rgba(0,0,0,.15);font:600 12px/16px Arial,sans-serif;letter-spacing:normal}.proxima-cart-screen--stores-list.svelte-y79h8h .stores-list__locations.svelte-y79h8h{overflow-y:auto;display:flex;flex-direction:column;flex-grow:1}.proxima-cart-screen--stores-list.svelte-y79h8h .stores-list__locations .no-locations.svelte-y79h8h{margin:auto 16px;text-align:center;font-size:14px;line-height:20px}.proxima-cart-screen.svelte-1nx51t0{flex-grow:1;display:flex;flex-direction:column;background-color:#fff;overflow-y:auto;overflow-x:hidden}.proxima-cart-header.svelte-101tf1z{flex:0 0 auto;display:flex;flex-direction:column}.proxima-cart-header-top.svelte-101tf1z{background:rgb(var(--pol-theme-primary-color));padding:12px 16px}.proxima-cart-header-top-text.svelte-101tf1z{display:block;font-size:18px;font-weight:700;font-family:var(--pol-theme-primary-font-family);line-height:24px;color:#fff}.proxima-cart-header-bottom.svelte-101tf1z{background-color:#0000000d;padding:12px 16px}.proxima-cart-header-bottom-text.svelte-101tf1z{display:block;font-size:16px;font-weight:700;font-family:var(--pol-theme-secondary-font-family);line-height:24px;color:#000000f2}.proxima-cart-footer-logo.svelte-1kaqyce.svelte-1kaqyce{flex:0 0 64px;max-height:64px}.proxima-cart-footer-text.svelte-1kaqyce.svelte-1kaqyce{flex:0 1 100%;margin:0 8px;display:flex;flex-direction:column;align-items:start;justify-content:center;font-size:12px;line-height:16px}.proxima-cart-footer-text__default-footer.svelte-1kaqyce+.proxima-cart-footer-text__default-footer__change-store.svelte-1kaqyce{border:none;font-size:12px;font-weight:700;line-height:16px;text-decoration:underline;text-decoration-line:underline;text-decoration-color:rgb(var(--pol-theme-primary-color));text-underline-offset:4px;color:#000;margin:0;padding:0;background-color:#0000;cursor:pointer}.proxima-cart-footer-checkout.svelte-1kaqyce.svelte-1kaqyce{flex:0 0 115px;align-self:center;display:flex;flex-direction:column;justify-self:flex-end;align-content:center;text-align:center;align-items:center}.proxima-cart-footer-checkout__total.svelte-1kaqyce.svelte-1kaqyce{font-weight:700;color:#000;font-size:14px;line-height:20px;margin-bottom:8px}.proxima-cart-footer.svelte-1rcvk2a{z-index:1;box-sizing:border-box;flex:0 0 96px;padding:16px;background:#fff;display:flex;justify-content:center;align-items:center;box-shadow:0 4px 12px #0000004d}@font-face{font-family:CopperPot;src:url(https://cdn.polaris.me/fonts/copperpot/copperpot-700.woff2) format("woff2");font-display:swap;font-weight:700}@font-face{font-family:SourceSansPro;src:url(https://cdn.polaris.me/fonts/sourcesanspro/sourcesanspro-700.woff2) format("woff2");font-display:swap;font-weight:700}@font-face{font-family:SourceSansPro;src:url(https://cdn.polaris.me/fonts/sourcesanspro/sourcesanspro.woff2) format("woff2");font-display:swap;font-weight:400}:root{--pol-theme-primary-color:#0071ce;--pol-theme-primary-button-color:var(--pol-theme-primary-color);--pol-theme-primary-button-border:none;--pol-theme-primary-button-text-color:#ffffff;--pol-theme-primary-font-family:"Copper Pot", sans-serif;--pol-theme-secondary-font-family:"Source Sans Pro", Helvetica, sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.theme-amazonfresh.svelte-132mfkz{--pol-theme-primary-color:82, 129, 35;--pol-theme-primary-button-color:var(--pol-theme-primary-color)}.theme-bakers.svelte-132mfkz,.theme-citymarket.svelte-132mfkz{--pol-theme-primary-color:233, 29, 22;--pol-theme-primary-button-color:var(--pol-theme-primary-color)}.theme-dillons.svelte-132mfkz{--pol-theme-primary-color:200, 36, 46;--pol-theme-primary-button-color:var(--pol-theme-primary-color)}.theme-food4less.svelte-132mfkz{--pol-theme-primary-color:0, 0, 0;--pol-theme-primary-button-color:var(--pol-theme-primary-color)}.theme-foodsco.svelte-132mfkz{--pol-theme-primary-color:6, 137, 58;--pol-theme-primary-button-color:var(--pol-theme-primary-color)}.theme-fredmeyer.svelte-132mfkz{--pol-theme-primary-color:213, 43, 53;--pol-theme-primary-button-color:var(--pol-theme-primary-color)}.theme-frys.svelte-132mfkz{--pol-theme-primary-color:221, 55, 49;--pol-theme-primary-button-color:var(--pol-theme-primary-color)}.theme-gerbes.svelte-132mfkz{--pol-theme-primary-color:200, 36, 46;--pol-theme-primary-button-color:var(--pol-theme-primary-color)}.theme-jayc.svelte-132mfkz{--pol-theme-primary-color:200, 46, 49;--pol-theme-primary-button-color:var(--pol-theme-primary-color)}.theme-kingsoopers.svelte-132mfkz{--pol-theme-primary-color:232, 30, 23;--pol-theme-primary-button-color:var(--pol-theme-primary-color)}.theme-kroger.svelte-132mfkz{--pol-theme-primary-color:35, 67, 152;--pol-theme-primary-button-color:var(--pol-theme-primary-color)}.theme-qfc.svelte-132mfkz{--pol-theme-primary-color:15, 109, 180;--pol-theme-primary-button-color:var(--pol-theme-primary-color)}.theme-ralphs.svelte-132mfkz{--pol-theme-primary-color:232, 12, 49;--pol-theme-primary-button-color:var(--pol-theme-primary-color)}.theme-smiths.svelte-132mfkz{--pol-theme-primary-color:211, 35, 75;--pol-theme-primary-button-color:var(--pol-theme-primary-color)}.theme-metromarket.svelte-132mfkz{--pol-theme-primary-color:92, 126, 73;--pol-theme-primary-button-color:var(--pol-theme-primary-color)}.theme-picknsave.svelte-132mfkz{--pol-theme-primary-color:0, 0, 0;--pol-theme-primary-button-color:var(--pol-theme-primary-color)}.theme-hart.svelte-132mfkz{--pol-theme-primary-color:157, 33, 54;--pol-theme-primary-button-color:var(--pol-theme-primary-color)}.theme-marianos.svelte-132mfkz{--pol-theme-primary-color:100, 67, 61;--pol-theme-primary-button-color:var(--pol-theme-primary-color)}.theme-ruler.svelte-132mfkz{--pol-theme-primary-color:76, 139, 4;--pol-theme-primary-button-color:var(--pol-theme-primary-color)}.theme-payless.svelte-132mfkz{--pol-theme-primary-color:214, 38, 49;--pol-theme-primary-button-color:var(--pol-theme-primary-color)}.theme-target.svelte-132mfkz{--pol-theme-primary-color:204, 0, 0;--pol-theme-primary-button-color:var(--pol-theme-primary-color)}.theme-walmart.svelte-132mfkz{--pol-theme-primary-color:0, 113, 206;--pol-theme-primary-button-color:var(--pol-theme-primary-color)}.theme-lowes.svelte-132mfkz{--pol-theme-primary-color:0, 73, 144;--pol-theme-primary-button-color:var(--pol-theme-primary-color)}.theme-cvs.svelte-132mfkz{--pol-theme-primary-color:235, 0, 0;--pol-theme-primary-button-color:var(--pol-theme-primary-color)}.theme-wholefoodsmarket.svelte-132mfkz{--pol-theme-primary-color:0, 103, 75;--pol-theme-primary-button-color:var(--pol-theme-primary-color)}.proxima-cart.svelte-132mfkz{width:100%;height:100%;min-width:360px;max-width:375px;height:600px;box-sizing:border-box;overflow:hidden;background-color:#fff;z-index:800;position:relative;margin:0 auto;border:1px solid #999;display:flex;flex-direction:column;font-family:Arial,Helvetica,sans-serif}.proxima-cart--mxr.svelte-132mfkz{min-width:300px;overflow-y:auto;height:100%;border:none}.proxima-cart--mxr.swap.svelte-132mfkz,.proxima-cart--mxr.stores.svelte-132mfkz{max-height:100%}.cva-loading-icon.svelte-jpx3qz{width:100%;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center}.proxima-retailer-footer.svelte-1n6nc08{height:inherit;display:flex;align-items:center;justify-content:space-between;box-sizing:border-box;overflow:hidden}.proxima-retailer-footer-logo.svelte-1n6nc08{flex:0 0 auto;margin:0 4px 0 0}.proxima-retailer-footer-logo__image.svelte-1n6nc08{display:block;max-width:80px;max-height:40px}.proxima-retailer-footer-text.svelte-1n6nc08{font-size:10px}.proxima-retailer-footer-text-address.svelte-1n6nc08{font-size:9px}.proxima-retailer-footer-checkout.svelte-1n6nc08{flex:0 0 auto;margin:0 0 0 4px}.proxima-retailer-footer-checkout__button.svelte-1n6nc08{display:block;line-height:1.2;margin:0;padding:5px;cursor:pointer}.proxima-retailer-footer-checkout__button__total.svelte-1n6nc08{font-weight:700;text-wrap:nowrap}.invisible-input.svelte-1nihvyq{border:none;border-radius:unset;text-align:center;width:100%}input.svelte-1nihvyq::-webkit-outer-spin-button,input.svelte-1nihvyq::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.input--store-locations.svelte-1nihvyq{margin:0;padding:0 0 0 8px;border:none;outline:none;width:100%;font-size:16px;font-weight:400;line-height:24px}.checkbox--proxima-cart.svelte-188zphp.svelte-188zphp{width:auto;margin:16px 10px 16px 0;display:inline-flex;position:relative}.checkbox--proxima-cart.checked.svelte-188zphp .checkbox__container.svelte-188zphp{background-color:rgb(var(--pol-theme-primary-color));border-color:rgb(var(--pol-theme-primary-color))}.checkbox--proxima-cart.checked.svelte-188zphp .checkbox__container.svelte-188zphp:after{opacity:1;transform:rotate(45deg) scaleZ(1)}.checkbox--proxima-cart.svelte-188zphp .checkbox__container.svelte-188zphp{box-sizing:border-box;min-width:16px;min-height:16px;position:relative;border-radius:2px;border:2px solid rgba(0,0,0,.65)}.checkbox--proxima-cart.svelte-188zphp .checkbox__container.disabled.svelte-188zphp{cursor:not-allowed;border:2px solid rgba(0,0,0,.25)}.checkbox--proxima-cart.svelte-188zphp .checkbox__container.svelte-188zphp:focus{outline:none}.checkbox--proxima-cart.svelte-188zphp .checkbox__container input.svelte-188zphp{color:#fff;position:absolute;left:-999em}.checkbox--proxima-cart.svelte-188zphp .checkbox__container.svelte-188zphp:before,.checkbox--proxima-cart.svelte-188zphp .checkbox__container.svelte-188zphp:after{position:absolute;transition:all .3s cubic-bezier(.55,0,.55,.2);content:" "}.checkbox--proxima-cart.svelte-188zphp .checkbox__container.svelte-188zphp:before{width:42px;height:42px;top:50%;left:50%;border-radius:50%;transform:translate(-50%,-50%)}.checkbox--proxima-cart.svelte-188zphp .checkbox__container.svelte-188zphp:after{width:6px;height:11px;top:-2px;left:2px;border:2px solid #fff;border-top:0;border-left:0;opacity:0;transform:rotate(45deg) scale3D(.15,.15,1)}.navigation-arrow.svelte-11ck081.svelte-11ck081{line-height:1.15;margin:0;padding:0;background-color:#fff;border:none;text-transform:none;cursor:pointer}.navigation-arrow.disable.svelte-11ck081.svelte-11ck081{cursor:not-allowed;opacity:.25}.navigation-arrow--right.svelte-11ck081.svelte-11ck081{transform:scaleX(-1)}.navigation-arrow--spla.svelte-11ck081.svelte-11ck081{flex:0 0 20px;height:16px;cursor:pointer;margin:0;background:none}.navigation-arrow--spla.svelte-11ck081 svg.svelte-11ck081{height:100%}.navigation-arrow--custom.svelte-11ck081.svelte-11ck081{background:none}.navigation-arrow--custom.navigation-arrow--right.svelte-11ck081.svelte-11ck081{transform:scaleX(1)}.proxima-rotating-header.svelte-cq7rrt{display:block;box-sizing:border-box}.proxima-rotating-header__text.svelte-cq7rrt{display:block;font-size:16px;font-weight:700}.proxima-rotating-header--proxima-pau-retailer__text.svelte-cq7rrt{font-size:18px}.image.svelte-zxroca.svelte-zxroca,.image.svelte-zxroca img.svelte-zxroca{display:block;margin:0 auto}.image--max-140px.svelte-zxroca img.svelte-zxroca{max-width:140px;object-fit:contain}.image--max-height-40px.svelte-zxroca img.svelte-zxroca{max-height:40px}.image--max-height-88px.svelte-zxroca img.svelte-zxroca{max-height:88px}.image--max-100.svelte-zxroca img.svelte-zxroca{max-width:100%;max-height:100%}.image--max-84px.svelte-zxroca img.svelte-zxroca{max-width:84px;object-fit:contain}.image--max-80.svelte-zxroca img.svelte-zxroca{max-width:80%;max-height:80%}.image--max-80px.svelte-zxroca img.svelte-zxroca{max-width:80px;object-fit:contain}.image--full.svelte-zxroca img.svelte-zxroca{width:100%;height:100%}.image--margin-left-zero.svelte-zxroca.svelte-zxroca{margin-left:0}.image--shopper-cta.svelte-zxroca.svelte-zxroca{margin:0 4px}.object-fit-cover.svelte-zxroca.svelte-zxroca,.object-fit-cover.svelte-zxroca img.svelte-zxroca{object-fit:cover}.object-fit-contain.svelte-zxroca.svelte-zxroca,.object-fit-contain.svelte-zxroca img.svelte-zxroca{object-fit:contain}.object-fit-fit.svelte-zxroca.svelte-zxroca,.object-fit-fit.svelte-zxroca img.svelte-zxroca{object-fit:fill}.prx-image.svelte-1kb70fl{display:block;width:auto;height:auto;max-width:100%;max-height:100%}.prx-iframe.svelte-lxgffd{border:none;display:block}.carousel.svelte-njbbdg.svelte-njbbdg{display:flex}.carousel-container.svelte-njbbdg.svelte-njbbdg{width:var(--carouselWidth);position:relative;overflow:hidden;box-sizing:border-box;transform-style:preserve-3d;background:var(--backgroundColor)}.carousel__slides.svelte-njbbdg.svelte-njbbdg{display:flex;position:relative;left:var(--leftPos);box-sizing:border-box}.carousel__slides.svelte-njbbdg>*{flex-shrink:0;width:var(--slideSize);box-sizing:border-box;padding:var(--slidePadding)}.carousel--spla.svelte-njbbdg.svelte-njbbdg{flex-direction:column;justify-content:center;flex:0 1 auto;overflow:hidden;position:relative}.carousel--spla.svelte-njbbdg .carousel-container.svelte-njbbdg{height:100%}.carousel--spla.svelte-njbbdg .carousel-container .carousel__slides.svelte-njbbdg .carousel__slide--active{opacity:1!important}.carousel--spla.carousel--single-slide.svelte-njbbdg.svelte-njbbdg{cursor:pointer;flex-grow:1}.carousel--spla.carousel--single-slide.svelte-njbbdg .carousel-container.svelte-njbbdg{display:flex;justify-content:center;align-items:center;flex:0 0 100%}.carousel--spla.carousel--single-slide.svelte-njbbdg .carousel-container .carousel__slides.svelte-njbbdg{justify-content:center}.slide.svelte-njbbdg.svelte-njbbdg{transition:left var(--transitionTime) ease-out}.fade.svelte-njbbdg.svelte-njbbdg{animation:svelte-njbbdg-fadeIn var(--transitionTime) ease-out}@keyframes svelte-njbbdg-fadeIn{0%{opacity:0}to{opacity:1}}.indicators__indicator.svelte-12bby5q.svelte-12bby5q{padding:0;margin:var(--indicatorMargin);height:var(--indicatorSize);width:var(--indicatorSize);border:1px solid var(--borderColor);border-radius:50%;display:inline-block;background:transparent;cursor:pointer}.indicators__indicator--active.svelte-12bby5q.svelte-12bby5q{background:var(--fillColor)}.indicators--spla.svelte-12bby5q.svelte-12bby5q{display:flex;justify-content:center;align-items:center;flex-grow:1}.indicators--spla.svelte-12bby5q .indicators__indicator.svelte-12bby5q{flex:0 0 8px;height:8px;border:none;background:#0006;border-radius:100%;margin:0 5px 0 0;padding:0;cursor:pointer}.indicators--spla.svelte-12bby5q .indicators__indicator.svelte-12bby5q:last-child{margin-right:0}.indicators--spla.svelte-12bby5q .indicators__indicator--active.svelte-12bby5q{background:#000c}.prx-modal.svelte-1xufxs2.svelte-1xufxs2{z-index:99;position:fixed;top:0;left:0;width:100%;height:100vh;display:flex;justify-content:center;align-items:center;opacity:1}.prx-modal.svelte-1xufxs2.svelte-1xufxs2:not(:focus-within){transition:opacity .1ms;opacity:.99}.prx-modal__overlay.svelte-1xufxs2.svelte-1xufxs2{background-color:var(--overlayColor);opacity:.4;position:absolute;width:100%;height:100%}.prx-modal__body.svelte-1xufxs2.svelte-1xufxs2{overflow:auto}.prx-modal__content.svelte-1xufxs2.svelte-1xufxs2{z-index:10;background-color:#fff;overflow:hidden;position:relative}.prx-modal__content.svelte-1xufxs2 .prx-modal__overlay__close-container.svelte-1xufxs2{z-index:810;position:absolute;top:2px;right:2px;width:48px;height:48px;display:flex;justify-content:center;align-items:center}.prx-modal__content.svelte-1xufxs2 .prx-modal__overlay__close-container__button.svelte-1xufxs2{background-color:transparent;padding:0;margin:0;border:none;cursor:pointer}:root{--pol-site-theme-primary-color:#0071ce;--pol-site-theme-secondary-color:#f5f6ea;--pol-site-theme-tertiary-color:#0076de;--pol-site-primary-color:var(--pol-site-theme-primary-color);--pol-site-secondary-color:var(--pol-site-theme-secondary-color);--pol-site-tertiary-color:var(--pol-site-theme-tertiary-color)}.site-allrecipes.svelte-hl6scr.svelte-hl6scr{--pol-site-theme-primary-color:213, 66, 21;--pol-site-theme-secondary-color:231, 171, 70;--pol-site-theme-tertiary-color:245, 246, 234;--pol-site-primary-color:var(--pol-site-theme-primary-color);--pol-site-secondary-color:var(--pol-site-theme-secondary-color);--pol-site-tertiary-color:var(--pol-site-theme-tertiary-color)}.site-bhg.svelte-hl6scr.svelte-hl6scr{--pol-site-theme-primary-color:75, 80, 170;--pol-site-theme-secondary-color:200, 58, 162;--pol-site-theme-tertiary-color:241, 242, 255;--pol-site-primary-color:var(--pol-site-theme-primary-color);--pol-site-secondary-color:var(--pol-site-theme-secondary-color);--pol-site-tertiary-color:var(--pol-site-theme-tertiary-color)}.site-eatingwell.svelte-hl6scr.svelte-hl6scr{--pol-site-theme-primary-color:0, 102, 70;--pol-site-theme-secondary-color:97, 158, 69;--pol-site-theme-tertiary-color:228, 241, 239;--pol-site-primary-color:var(--pol-site-theme-primary-color);--pol-site-secondary-color:var(--pol-site-theme-secondary-color);--pol-site-tertiary-color:var(--pol-site-theme-tertiary-color)}.site-foodandwine.svelte-hl6scr.svelte-hl6scr{--pol-site-theme-primary-color:66, 148, 255;--pol-site-theme-secondary-color:231, 31, 61;--pol-site-theme-tertiary-color:238, 238, 240;--pol-site-primary-color:var(--pol-site-theme-primary-color);--pol-site-secondary-color:var(--pol-site-theme-secondary-color);--pol-site-tertiary-color:var(--pol-site-theme-tertiary-color)}.site-health.svelte-hl6scr.svelte-hl6scr{--pol-site-theme-primary-color:26, 127, 130;--pol-site-theme-secondary-color:251, 217, 206;--pol-site-primary-color:var(--pol-site-theme-primary-color);--pol-site-secondary-color:var(--pol-site-theme-secondary-color)}.site-marthastewart.svelte-hl6scr.svelte-hl6scr{--pol-site-theme-primary-color:153, 38, 30;--pol-site-theme-secondary-color:245, 246, 234;--pol-site-primary-color:var(--pol-site-theme-primary-color);--pol-site-secondary-color:var(--pol-site-theme-secondary-color)}.site-midwestliving.svelte-hl6scr.svelte-hl6scr{--pol-site-theme-primary-color:213, 66, 21;--pol-site-theme-secondary-color:244, 67, 54;--pol-site-primary-color:var(--pol-site-theme-primary-color);--pol-site-secondary-color:var(--pol-site-theme-secondary-color)}.site-myrecipes.svelte-hl6scr.svelte-hl6scr,.site-peopleenespanol.svelte-hl6scr.svelte-hl6scr{--pol-site-theme-primary-color:0, 98, 101;--pol-site-theme-secondary-color:153, 198, 199;--pol-site-primary-color:var(--pol-site-theme-primary-color);--pol-site-secondary-color:var(--pol-site-theme-secondary-color)}.site-parents.svelte-hl6scr.svelte-hl6scr{--pol-site-theme-primary-color:0, 98, 101;--pol-site-theme-secondary-color:254, 224, 207;--pol-site-primary-color:var(--pol-site-theme-primary-color);--pol-site-secondary-color:var(--pol-site-theme-secondary-color)}.site-rachaelraymag.svelte-hl6scr.svelte-hl6scr,.site-realsimple.svelte-hl6scr.svelte-hl6scr{--pol-site-theme-primary-color:229, 16, 108;--pol-site-theme-secondary-color:249, 207, 225;--pol-site-primary-color:var(--pol-site-theme-primary-color);--pol-site-secondary-color:var(--pol-site-theme-secondary-color)}.site-southernliving.svelte-hl6scr.svelte-hl6scr,.site-shape.svelte-hl6scr.svelte-hl6scr{--pol-site-theme-primary-color:153, 38, 30;--pol-site-theme-secondary-color:245, 246, 234;--pol-site-primary-color:var(--pol-site-theme-primary-color);--pol-site-secondary-color:var(--pol-site-theme-secondary-color)}.link--biu.svelte-hl6scr a.svelte-hl6scr,.link--biu-inline.svelte-hl6scr a.svelte-hl6scr{color:#000000f2;text-decoration-color:rgb(var(--pol-site-primary-color))}.link--biu.svelte-hl6scr a.svelte-hl6scr:hover,.link--biu.svelte-hl6scr a.svelte-hl6scr:visited,.link--biu-inline.svelte-hl6scr a.svelte-hl6scr:hover,.link--biu-inline.svelte-hl6scr a.svelte-hl6scr:visited{text-decoration:underline;text-decoration-color:rgb(var(--pol-site-primary-color))}.link--rmni.svelte-hl6scr a.svelte-hl6scr{align-items:center;border-width:1px;border-style:solid;color:#000;display:flex;font:10px/20px var(--pol-theme-secondary-font-family);font-weight:700;justify-content:center;text-decoration:none;width:64px}.link--rmni.svelte-hl6scr a.svelte-hl6scr:hover{text-decoration:none}.proxima-zipcode-intake-form.svelte-14ata0r .proxima-zipcode-intake-form-header-section .proxima-zipcode-intake-form-header-text.svelte-14ata0r{display:inline;margin:0;padding:0;font-weight:700}.proxima-zipcode-intake-form.svelte-14ata0r .proxima-zipcode-intake-form-input-section .proxima-zipcode-intake-form-left-side .proxima-zipcode-intake-form-input-container .proxima-zipcode-intake-form-input.svelte-14ata0r{border:none;outline:none;margin:0;padding:0;width:100%}.proxima-zipcode-intake-form.svelte-14ata0r .proxima-zipcode-intake-form-error-container.svelte-14ata0r{display:flex;margin:10px 0 0}.proxima-zipcode-intake-form.svelte-14ata0r .proxima-zipcode-intake-form-error-container .proxima-zipcode-intake-form-error-icon-container.svelte-14ata0r{flex:0 0 20px;height:20px;margin-right:8px}.proxima-zipcode-intake-form.svelte-14ata0r .proxima-zipcode-intake-form-error-container .proxima-zipcode-intake-form-error-text-container.svelte-14ata0r{flex-grow:1}.proxima-zipcode-intake-form.svelte-14ata0r .proxima-zipcode-intake-form-error-container .proxima-zipcode-intake-form-error-text-container .proxima-zipcode-intake-form-error-text.svelte-14ata0r{font-size:14px}.proxima-zipcode-intake-form--btn-disabled.svelte-14ata0r .proxima-zipcode-intake-form-input-section .proxima-zipcode-intake-form-right-side.svelte-14ata0r{opacity:.3;cursor:not-allowed}.proxima-zipcode-intake-form--btn-disabled.svelte-14ata0r .proxima-zipcode-intake-form-input-section .proxima-zipcode-intake-form-right-side .proxima-zipcode-intake-form-submit-btn-container.svelte-14ata0r{cursor:not-allowed}.proxima-zipcode-intake-form--btn-disabled.svelte-14ata0r .proxima-zipcode-intake-form-input-section .proxima-zipcode-intake-form-right-side .proxima-zipcode-intake-form-submit-btn-container .proxima-zipcode-intake-form-submit-btn.svelte-14ata0r{cursor:not-allowed!important}.proxima-zipcode-intake-form--cvs-scheduler.svelte-14ata0r .proxima-zipcode-intake-form-input-section.svelte-14ata0r{display:flex;align-items:center}.proxima-zipcode-intake-form--cvs-scheduler.svelte-14ata0r .proxima-zipcode-intake-form-input-section .proxima-zipcode-intake-form-left-side.svelte-14ata0r{flex-grow:1}.proxima-zipcode-intake-form--cvs-scheduler.svelte-14ata0r .proxima-zipcode-intake-form-input-section .proxima-zipcode-intake-form-left-side .proxima-zipcode-intake-form-input-container.svelte-14ata0r{padding:4px 8px;border-radius:8px;border:1px solid rgba(0,0,0,.2);box-shadow:1.43088px 1.43088px 2.86176px #00000024;margin:0 8px 0 0}.proxima-zipcode-intake-form--cvs-scheduler.svelte-14ata0r .proxima-zipcode-intake-form-input-section .proxima-zipcode-intake-form-left-side .proxima-zipcode-intake-form-input-container .proxima-zipcode-intake-form-input.svelte-14ata0r{display:block;margin:0 auto;height:22px;width:114px;font-size:14px;font-weight:500;line-height:22px;text-align:center;box-shadow:none}.proxima-zipcode-intake-form--cvs-scheduler.svelte-14ata0r .proxima-zipcode-intake-form-input-section .proxima-zipcode-intake-form-left-side .proxima-zipcode-intake-form-input-container .proxima-zipcode-intake-form-input.svelte-14ata0r::placeholder{color:#000!important}.proxima-zipcode-intake-form--cvs-scheduler.svelte-14ata0r .proxima-zipcode-intake-form-input-section .proxima-zipcode-intake-form-left-side .proxima-zipcode-intake-form-input-container .proxima-zipcode-intake-form-input[type=text].svelte-14ata0r{color:#000!important;font-weight:400}.proxima-zipcode-intake-form--cvs-scheduler.svelte-14ata0r .proxima-zipcode-intake-form-input-section .proxima-zipcode-intake-form-right-side.svelte-14ata0r{flex:0 0 auto}.proxima-zipcode-intake-form--cvs-scheduler.svelte-14ata0r .proxima-zipcode-intake-form-input-section .proxima-zipcode-intake-form-right-side .proxima-zipcode-intake-form-submit-btn-container .proxima-zipcode-intake-form-submit-btn.svelte-14ata0r{width:65px;height:32px;border-radius:8px;background:#e31837;border:none;outline:none;cursor:pointer}.proxima-zipcode-intake-form--cvs-scheduler.svelte-14ata0r .proxima-zipcode-intake-form-input-section .proxima-zipcode-intake-form-right-side .proxima-zipcode-intake-form-submit-btn-container .proxima-zipcode-intake-form-submit-btn .proxima-zipcode-intake-form-submit-btn-text.svelte-14ata0r{color:#fff;text-align:center;font-size:13px;font-weight:700;line-height:25px}.proxima-zipcode-intake-form--cvs-scheduler.svelte-14ata0r .proxima-zipcode-intake-form-error-container.svelte-14ata0r{align-items:center}.proxima-zipcode-intake-form--lrs.proxima-zipcode-intake-form--btn-disabled.proxima-zipcode-intake-form-input-section.proxima-zipcode-intake-form-right-side.svelte-14ata0r.svelte-14ata0r{opacity:unset}.proxima-zipcode-intake-form--lrs.svelte-14ata0r .proxima-zipcode-intake-form-header-text.svelte-14ata0r{font:700 16px/24px var(--pol-theme-primary-font-family)}.proxima-zipcode-intake-form--lrs.svelte-14ata0r .proxima-zipcode-intake-form-input-section.svelte-14ata0r{display:flex;justify-content:space-between}.proxima-zipcode-intake-form--lrs.svelte-14ata0r .proxima-zipcode-intake-form-input-section .proxima-zipcode-intake-form-left-side.svelte-14ata0r{border:1px solid rgba(0,0,0,.95);position:relative;width:195px}.proxima-zipcode-intake-form--lrs.svelte-14ata0r .proxima-zipcode-intake-form-input-section .proxima-zipcode-intake-form-left-side .proxima-zipcode-intake-form-magnify-icon-container.svelte-14ata0r{position:absolute;top:13px;left:14px}.proxima-zipcode-intake-form--lrs.svelte-14ata0r .proxima-zipcode-intake-form-input-section .proxima-zipcode-intake-form-left-side .proxima-zipcode-intake-form-input-container .proxima-zipcode-intake-form-input.svelte-14ata0r{box-sizing:border-box;height:46px;width:150px;margin-left:40px}.proxima-zipcode-intake-form--lrs.svelte-14ata0r .proxima-zipcode-intake-form-input-section .proxima-zipcode-intake-form-right-side.svelte-14ata0r{opacity:unset}.proxima-zipcode-intake-form--lrs.svelte-14ata0r .proxima-zipcode-intake-form-input-section .proxima-zipcode-intake-form-right-side .proxima-zipcode-intake-form-submit-btn.svelte-14ata0r{color:#fff;font-weight:700;width:119px;height:48px;border-radius:unset;background-color:rgb(var(--pol-site-theme-primary-color));border:1px solid rgb(var(--pol-site-theme-primary-color));box-sizing:border-box}.proxima-zipcode-intake-form--lrs.proxima-zipcode-intake-form--error.svelte-14ata0r .proxima-zipcode-intake-form-input-section .proxima-zipcode-intake-form-left-side.svelte-14ata0r{border:2px solid #c00}.proxima-zipcode-intake-form--lrs.proxima-zipcode-intake-form--error.svelte-14ata0r .proxima-zipcode-intake-form-error-text-container.svelte-14ata0r{font:600 12px/16px var(--pol-theme-primary-font-family);padding-right:8px}.proxima-zipcode-intake-form--lrs.proxima-zipcode-intake-form--error.svelte-14ata0r .proxima-zipcode-intake-form-error-text-container .proxima-zipcode-intake-form-error-icon-container.svelte-14ata0r{padding-left:8px}.proxima-zipcode-intake-form--lrs.proxima-zipcode-intake-form--error.svelte-14ata0r .proxima-zipcode-intake-form-error-text-container .proxima-zipcode-intake-form-error-text.svelte-14ata0r{font-size:12px}.proxima-zipcode-intake-form--cart.svelte-14ata0r.svelte-14ata0r{padding:16px 24px;background:#0000000d}.proxima-zipcode-intake-form--cart.svelte-14ata0r .proxima-zipcode-intake-form-header-section.svelte-14ata0r{margin:0 0 4px}.proxima-zipcode-intake-form--cart.svelte-14ata0r .proxima-zipcode-intake-form-header-section .proxima-zipcode-intake-form-header-text.svelte-14ata0r{font-family:var(--pol-theme-secondary-font-family);font-size:16px;font-weight:700;line-height:24px}.proxima-zipcode-intake-form--cart.svelte-14ata0r .proxima-zipcode-intake-form-input-section.svelte-14ata0r{display:flex}.proxima-zipcode-intake-form--cart.svelte-14ata0r .proxima-zipcode-intake-form-input-section .proxima-zipcode-intake-form-left-side.svelte-14ata0r{flex:0 1 195px;display:flex;align-items:center;border:1px solid #000;padding:11px 15px;background-color:#fff}.proxima-zipcode-intake-form--cart.svelte-14ata0r .proxima-zipcode-intake-form-input-section .proxima-zipcode-intake-form-left-side .proxima-zipcode-intake-form-magnify-icon-container.svelte-14ata0r{flex:0 0 auto;height:23px;margin:0 8px 0 0}.proxima-zipcode-intake-form--cart.svelte-14ata0r .proxima-zipcode-intake-form-input-section .proxima-zipcode-intake-form-left-side .proxima-zipcode-intake-form-input-container.svelte-14ata0r{flex-grow:1}.proxima-zipcode-intake-form--cart.svelte-14ata0r .proxima-zipcode-intake-form-input-section .proxima-zipcode-intake-form-left-side .proxima-zipcode-intake-form-input-container .proxima-zipcode-intake-form-input.svelte-14ata0r{font-size:16px;font-weight:400;line-height:24px}.proxima-zipcode-intake-form--cart.svelte-14ata0r .proxima-zipcode-intake-form-input-section .proxima-zipcode-intake-form-right-side.svelte-14ata0r{flex:0 0 120px;margin:0 0 0 8px}.proxima-zipcode-intake-form--cart.svelte-14ata0r .proxima-zipcode-intake-form-input-section .proxima-zipcode-intake-form-right-side .proxima-zipcode-intake-form-submit-btn-container .proxima-zipcode-intake-form-submit-btn.svelte-14ata0r{background-color:rgb(var(--pol-theme-primary-button-color));border:1px solid var(--pol-theme-primary-button-text-color);display:flex;justify-content:space-around;align-items:center;cursor:pointer;width:120px;height:50px}.proxima-zipcode-intake-form--cart.svelte-14ata0r .proxima-zipcode-intake-form-input-section .proxima-zipcode-intake-form-right-side .proxima-zipcode-intake-form-submit-btn-container .proxima-zipcode-intake-form-submit-btn-text.svelte-14ata0r{color:var(--pol-theme-primary-button-text-color);font-weight:700;font-size:14px;line-height:20px}.proxima-zipcode-intake-form--cart.svelte-14ata0r .proxima-zipcode-intake-form-error-container.svelte-14ata0r{display:flex;align-items:center;justify-content:space-evenly;background-color:#fae6e6;width:195px;height:40px}.proxima-zipcode-intake-form--cart.svelte-14ata0r .proxima-zipcode-intake-form-error-container .proxima-zipcode-intake-form-error-icon-container.svelte-14ata0r{margin:0}.proxima-zipcode-intake-form--cart.svelte-14ata0r .proxima-zipcode-intake-form-error-container .proxima-zipcode-intake-form-error-text-container.svelte-14ata0r{flex-grow:0}.proxima-zipcode-intake-form--cart.svelte-14ata0r .proxima-zipcode-intake-form-error-container .proxima-zipcode-intake-form-error-text-container .proxima-zipcode-intake-form-error-text.svelte-14ata0r{font-family:var(--pol-theme-secondary-font-family);font-size:12px;line-height:16px;font-weight:700}.proxima-zipcode-intake-form--cart.proxima-zipcode-intake-form--error.svelte-14ata0r .proxima-zipcode-intake-form-input-section .proxima-zipcode-intake-form-left-side.svelte-14ata0r{border:2px solid #c00}.proxima-zipcode-intake-form--cart.proxima-zipcode-intake-form--error.svelte-14ata0r .proxima-zipcode-intake-form-error-container.svelte-14ata0r{margin:0}.branded-ingredient-unit__offer.svelte-1l41bhr.svelte-1l41bhr{display:flex;flex-direction:row;margin:24px auto 0;padding:0 0 16px}.branded-ingredient-unit.svelte-1l41bhr .offer__image.svelte-1l41bhr{flex:0 0 54px}.branded-ingredient-unit.svelte-1l41bhr .offer__details.svelte-1l41bhr{display:flex;flex-direction:column;margin-left:4px;font:400 14px/20px Arial,sans-serif;letter-spacing:normal}.branded-ingredient-unit.svelte-1l41bhr .details__header.svelte-1l41bhr{display:none}.branded-ingredient-unit.svelte-1l41bhr .details__title.svelte-1l41bhr{font-weight:700}.branded-ingredient-unit.svelte-1l41bhr .details__cta.svelte-1l41bhr{text-underline-offset:3px;font-size:11px;font-weight:700}.branded-ingredient-unit.svelte-1l41bhr .details__ad.svelte-1l41bhr,.branded-ingredient-unit.svelte-1l41bhr .details__pixel.svelte-1l41bhr{display:none}.branded-ingredient-unit--inline.svelte-1l41bhr.svelte-1l41bhr{margin:16px 0}.branded-ingredient-unit--inline.svelte-1l41bhr .offer__details.svelte-1l41bhr{width:auto}.branded-ingredient-unit--inline.svelte-1l41bhr .details__description.svelte-1l41bhr{margin-top:7px}.branded-ingredient-unit--inline.svelte-1l41bhr .details__cta.svelte-1l41bhr{margin:7px 0 0}.branded-ingredient-unit--inline.svelte-1l41bhr .details__ad.svelte-1l41bhr{display:block;font-weight:400;color:#b2b2b2;font-size:.61rem;margin-top:7px;text-transform:uppercase}.branded-ingredient-unit--rmni.svelte-1l41bhr.svelte-1l41bhr{display:flex;width:192px;height:160px}.branded-ingredient-unit--rmni.svelte-1l41bhr .details__title.svelte-1l41bhr{overflow:hidden}.branded-ingredient-unit--rmni.svelte-1l41bhr .details__description.svelte-1l41bhr{flex-grow:1}.may-we-suggest__container.svelte-17tf00n.svelte-17tf00n{border:1px solid rgba(0,0,0,.15);width:192px;margin:24px auto 0;padding:0 0 16px}.may-we-suggest__container__title.svelte-17tf00n.svelte-17tf00n{font:700 12px/16px Arial,sans-serif;letter-spacing:normal;text-transform:uppercase;background:#fff;width:fit-content;margin:-8px auto 0;padding:0 16px}.may-we-suggest__promotion.svelte-17tf00n.svelte-17tf00n{display:flex;height:100%;margin-top:8px}.may-we-suggest.svelte-17tf00n .promotion__image.svelte-17tf00n{flex:0 0 54px;margin:0 4px}.promotion__details.svelte-17tf00n.svelte-17tf00n{display:flex;flex-direction:column;padding:8px 0 0;margin-left:4px;width:100px;font:14px/20px var(--pol-theme-secondary-font-family)}.promotion__details.svelte-17tf00n .details__title.svelte-17tf00n{font:14px/20px var(--pol-theme-secondary-font-family);font-weight:700}.promotion__details.svelte-17tf00n .details__cta.svelte-17tf00n{margin:4px auto 0}.promotion__details.svelte-17tf00n .mws-promo-pixels.svelte-17tf00n{display:none}.may-we-suggest--rmni.svelte-17tf00n .may-we-suggest__container.svelte-17tf00n{margin:6px auto 0;padding:0 0 10px;width:190px;height:142px}.may-we-suggest--rmni.svelte-17tf00n .may-we-suggest__promotion.svelte-17tf00n{margin-top:5px}.may-we-suggest--rmni.svelte-17tf00n .promotion__details.svelte-17tf00n{max-height:131px;padding:0;width:115px}.may-we-suggest--rmni.svelte-17tf00n .promotion__details .details__title.svelte-17tf00n{overflow:hidden;max-width:max-content;font:14px/18px var(--pol-theme-secondary-font-family);font-weight:700}.may-we-suggest--rmni.svelte-17tf00n .promotion__details .details__description.svelte-17tf00n{flex-grow:1}.may-we-suggest--rmni.svelte-17tf00n .promotion__details .details__cta.svelte-17tf00n{margin:4px 0 0}#go-to-cart.svelte-x0mgcu.svelte-x0mgcu{z-index:10000;display:flex;position:absolute;left:0;right:0;bottom:0;top:0;background:#00000026}#go-to-cart.svelte-x0mgcu .content.svelte-x0mgcu{z-index:20000;height:160px;width:248px;background:#fff;padding:16px;margin:auto;border-radius:4px;box-shadow:0 0 24px 8px rgba(var(--pol-theme-primary-color));display:flex;flex-direction:column;justify-content:space-between}.image-item-container.svelte-8iwjcr{width:100%;height:100%}.click-area.svelte-1igbpyk{width:100%;height:100%;position:relative}.click-area.svelte-1igbpyk:hover{cursor:pointer}.flipcard-container.svelte-17tt1kw.svelte-17tt1kw{perspective:1000px;width:100%;height:100%}.flipcard-container.flipped.svelte-17tt1kw .flipcard-inner.svelte-17tt1kw,.flipcard-container.flipped.svelte-17tt1kw .flipcard-inner.east.svelte-17tt1kw{transform:rotateY(180deg)}.flipcard-container.flipped.svelte-17tt1kw .flipcard-inner.west.svelte-17tt1kw{transform:rotateY(-180deg)}.flipcard-container.flipped.svelte-17tt1kw .flipcard-inner.north.svelte-17tt1kw{transform:rotateX(180deg)}.flipcard-container.flipped.svelte-17tt1kw .flipcard-inner.south.svelte-17tt1kw{transform:rotateX(-180deg)}.flipcard-container.svelte-17tt1kw .flipcard-inner.svelte-17tt1kw{position:relative;height:100%;transition:transform .8s;transform-style:preserve-3d}.flipcard-container.svelte-17tt1kw .flipcard-inner .card-front.svelte-17tt1kw,.flipcard-container.svelte-17tt1kw .flipcard-inner .card-back.svelte-17tt1kw{position:absolute;width:100%;height:100%;-webkit-backface-visibility:hidden;backface-visibility:hidden;overflow:hidden;transform:translate(0)}.flipcard-container.svelte-17tt1kw .flipcard-inner .card-front.is-gridded.svelte-17tt1kw,.flipcard-container.svelte-17tt1kw .flipcard-inner .card-back.is-gridded.svelte-17tt1kw{display:grid}.flipcard-container.svelte-17tt1kw .flipcard-inner .card-front.svelte-17tt1kw:hover,.flipcard-container.svelte-17tt1kw .flipcard-inner .card-back.svelte-17tt1kw:hover{cursor:pointer}.flipcard-container.svelte-17tt1kw .flipcard-inner .card-back.svelte-17tt1kw,.flipcard-container.svelte-17tt1kw .flipcard-inner .card-back.east.svelte-17tt1kw{transform:rotateY(180deg)}.flipcard-container.svelte-17tt1kw .flipcard-inner .card-back.west.svelte-17tt1kw{transform:rotateY(-180deg)}.flipcard-container.svelte-17tt1kw .flipcard-inner .card-back.north.svelte-17tt1kw{transform:rotateX(180deg)}.flipcard-container.svelte-17tt1kw .flipcard-inner .card-back.south.svelte-17tt1kw{transform:rotateX(-180deg)}.mediaElContianer.svelte-42n32g{width:100%;height:100%}.vast-icon-image.svelte-1vcjusw{position:absolute}.mediaElContianer.svelte-42n32g,.mediaContainer.svelte-plirjt{width:100%;height:100%}.progress_control_container.svelte-256onn{background:none;max-height:34px;position:relative}.progress_control.svelte-256onn{width:100%;height:3px;position:absolute;z-index:1}.progress_control.duration.svelte-256onn{background:#222;width:100%}.progress_control.played.svelte-256onn{background:#abcdef;width:0;position:absolute}.video-player-control.svelte-1v6g0bp{background:none;color:#fff;border:none;padding:2px;height:34px;outline:none;align-self:center;width:100%}.video-player-control-button.svelte-1v6g0bp{max-width:34px;cursor:pointer}.video-player-control-text.svelte-1v6g0bp{min-width:150px;max-width:200px;font-size:1.3em;font-family:Trebuchet MS,Lucida Sans Unicode,Lucida Grande,Lucida Sans,Arial,sans-serif;text-align:right}.control-icon.svelte-1v6g0bp{width:80%;height:80%;background-size:contain;background-position:center;background-repeat:no-repeat}.play-icon.svelte-1v6g0bp{background-image:url(https://live.polaris.me/assets/images/46de5084-92ef-4e59-a4ce-a8147564993d/300)}.pause-icon.svelte-1v6g0bp{background-image:url(https://live.polaris.me/assets/images/6985adee-6cd7-48fb-9000-8d0597861d5b/300)}.rewind-icon.svelte-1v6g0bp{background-image:url(https://live.polaris.me/assets/images/79f50f3d-42e0-42ab-96e9-4ce61f646007/300)}.back10-icon.svelte-1v6g0bp{background-image:url(https://live.polaris.me/assets/images/4e971252-7b57-4fbe-8724-27479e290a6d/300)}.forward10-icon.svelte-1v6g0bp{background-image:url(https://live.polaris.me/assets/images/49bdc217-cc12-4fdc-8150-775656ebd0ba/300)}.mute-icon.svelte-1v6g0bp{background-image:url(https://live.polaris.me/assets/images/40f88f27-ecad-44eb-80e8-490837b11498/300)}.unmute-icon.svelte-1v6g0bp{background-image:url(https://live.polaris.me/assets/images/a5787c8c-7603-482e-800b-2eeaa30baa11/300)}.fullscreen-icon.svelte-1v6g0bp{background-image:url(https://live.polaris.me/assets/images/e098c263-45b7-4c72-b7c6-0dc42258ca38/300)}.fullscreen-exit-icon.svelte-1v6g0bp{background-image:url(https://live.polaris.me/assets/images/b952c091-cf6e-4e66-a22d-735c4da511a0/300)}.video-player-controls.svelte-6kcfkq.svelte-6kcfkq.svelte-6kcfkq{width:100%;height:100%;min-height:40px;transition:all 1s;position:relative}.video-controls-row.svelte-6kcfkq.svelte-6kcfkq.svelte-6kcfkq,.progress-bar-row.svelte-6kcfkq.svelte-6kcfkq.svelte-6kcfkq{width:100%;left:0;position:absolute}.progress-bar-row.svelte-6kcfkq.svelte-6kcfkq.svelte-6kcfkq{height:3px;bottom:36px;transition:all .33s}.buttons-row.svelte-6kcfkq.svelte-6kcfkq.svelte-6kcfkq,.video-controls-collapsed.svelte-6kcfkq>.buttons-row.svelte-6kcfkq.svelte-6kcfkq{transition:all .33s;height:37px;bottom:0;background:#000000bf}.video-controls-collapsed.svelte-6kcfkq>.buttons-row.svelte-6kcfkq.svelte-6kcfkq{height:0}.video-controls-collapsed.svelte-6kcfkq>.progress-bar-row.svelte-6kcfkq.svelte-6kcfkq{bottom:0}.video-controls-collapsed.svelte-6kcfkq>.buttons-row.svelte-6kcfkq>.video-player-control.svelte-6kcfkq{height:0}.video-player-control.svelte-6kcfkq.svelte-6kcfkq.svelte-6kcfkq{background:none;color:#fff;border:none;padding:2px;height:34px;outline:none;align-self:center;width:100%}.video-player-control-text.svelte-6kcfkq.svelte-6kcfkq.svelte-6kcfkq{max-width:120px;font-size:1em;font-family:Trebuchet MS,Lucida Sans Unicode,Lucida Grande,Lucida Sans,Arial,sans-serif;text-align:right;position:absolute;right:10px}.video-player-control-text.svelte-6kcfkq span.svelte-6kcfkq.svelte-6kcfkq{top:6px}@media (max-width: 500px){.progress-bar-row.svelte-6kcfkq.svelte-6kcfkq.svelte-6kcfkq{height:1px}}.indicatorHolder.svelte-55l4fs{display:flex;justify-content:center}.carousel__slide.svelte-1r8pz1e{cursor:pointer;display:flex;justify-content:center}.vignette.svelte-1u89syx{width:100%;height:100%;position:relative}.vignette__header.svelte-1u89syx{position:relative;height:25%}.vignette__body.svelte-1u89syx{position:relative;height:75%}.text-item-container.svelte-67q1yo p{margin:1em 0}.text-item-container.svelte-67q1yo p:first-child{margin-top:0}.text-item-container.svelte-67q1yo p:last-child{margin-bottom:0}.screen-item.svelte-15wr7jp.svelte-15wr7jp{border:none;outline:none;padding:0;overflow:hidden;-webkit-user-select:none;user-select:none;width:100%;height:100%;position:relative}.screen-item.overflow-visible.svelte-15wr7jp.svelte-15wr7jp{overflow:visible}.screen-item.svelte-15wr7jp>div.svelte-15wr7jp{width:100%;height:100%;padding:0;margin:0}.screen.svelte-1a22fzm{display:grid;display:-ms-grid;grid-gap:0;overflow:hidden;position:absolute}.screen--center-fixed.svelte-1a22fzm{left:0;right:0;margin:auto}div{box-sizing:border-box}html,body{color:#eef;height:100%;margin:0;padding:0;font-family:Lucida Sans Unicode,Lucida Grande,Lucida Sans,sans-serif;font-size:9px;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;overflow:hidden}body::-webkit-scrollbar-track{-webkit-box-shadow:inset 0 0 6px rgba(0,0,0,.3);box-shadow:inset 0 0 6px #0000004d;background-color:#f5f5f5}body::-webkit-scrollbar{width:6px;background-color:#f5f5f5}body::-webkit-scrollbar-thumb{background-color:#000}@media screen and (min-width: 760px) and (max-width: 900px){html,body{font-size:10px}}@media screen and (min-width: 900px) and (max-width: 1200px){html,body{font-size:12px}}@media screen and (min-width: 1200px) and (max-width: 1600px){html,body{font-size:14px}}.svelte-1nxvjj6{box-sizing:border-box}')),document.head.appendChild(e)}}catch(t){console.error("vite-plugin-css-injected-by-js",t)}}();
var __defProp=Object.defineProperty,__publicField=(obj,key,value)=>((obj,key,value)=>key in obj?__defProp(obj,key,{enumerable:!0,configurable:!0,writable:!0,value:value}):obj[key]=value)(obj,"symbol"!=typeof key?key+"":key,value)
/*! Build Date: Tue Dec 03 2024 17:28:09 GMT+0000 (Greenwich Mean Time), Version: 1.20.0 */;function noop(){}function assign(tar,src){for(const k in src)tar[k]=src[k];return tar}function run(fn){return fn()}function blank_object(){return Object.create(null)}function run_all(fns){fns.forEach(run)}function is_function(thing){return"function"==typeof thing}function safe_not_equal(a,b){return a!=a?b==b:a!==b||a&&"object"==typeof a||"function"==typeof a}let src_url_equal_anchor;function src_url_equal(element_src,url2){return element_src===url2||(src_url_equal_anchor||(src_url_equal_anchor=document.createElement("a")),src_url_equal_anchor.href=url2,element_src===src_url_equal_anchor.href)}function split_srcset(srcset){return srcset.split(",").map((src=>src.trim().split(" ").filter(Boolean)))}function subscribe$4(store2,...callbacks){if(null==store2){for(const callback of callbacks)callback(void 0);return noop}const unsub=store2.subscribe(...callbacks);return unsub.unsubscribe?()=>unsub.unsubscribe():unsub}function get_store_value(store2){let value;return subscribe$4(store2,(_=>value=_))(),value}function component_subscribe(component,store2,callback){component.$$.on_destroy.push(subscribe$4(store2,callback))}function create_slot(definition,ctx,$$scope,fn){if(definition){const slot_ctx=get_slot_context(definition,ctx,$$scope,fn);return definition[0](slot_ctx)}}function get_slot_context(definition,ctx,$$scope,fn){return definition[1]&&fn?assign($$scope.ctx.slice(),definition[1](fn(ctx))):$$scope.ctx}function get_slot_changes(definition,$$scope,dirty,fn){if(definition[2]&&fn){const lets=definition[2](fn(dirty));if(void 0===$$scope.dirty)return lets;if("object"==typeof lets){const merged=[],len=Math.max($$scope.dirty.length,lets.length);for(let i=0;i<len;i+=1)merged[i]=$$scope.dirty[i]|lets[i];return merged}return $$scope.dirty|lets}return $$scope.dirty}function update_slot_base(slot,slot_definition,ctx,$$scope,slot_changes,get_slot_context_fn){if(slot_changes){const slot_context=get_slot_context(slot_definition,ctx,$$scope,get_slot_context_fn);slot.p(slot_context,slot_changes)}}function get_all_dirty_from_scope($$scope){if($$scope.ctx.length>32){const dirty=[],length=$$scope.ctx.length/32;for(let i=0;i<length;i++)dirty[i]=-1;return dirty}return-1}function null_to_empty(value){return value??""}!function(){const relList=document.createElement("link").relList;if(!(relList&&relList.supports&&relList.supports("modulepreload"))){for(const link of document.querySelectorAll('link[rel="modulepreload"]'))processPreload(link);new MutationObserver((mutations=>{for(const mutation of mutations)if("childList"===mutation.type)for(const node of mutation.addedNodes)"LINK"===node.tagName&&"modulepreload"===node.rel&&processPreload(node)})).observe(document,{childList:!0,subtree:!0})}function processPreload(link){if(link.ep)return;link.ep=!0;const fetchOpts=function(link){const fetchOpts={};return link.integrity&&(fetchOpts.integrity=link.integrity),link.referrerPolicy&&(fetchOpts.referrerPolicy=link.referrerPolicy),"use-credentials"===link.crossOrigin?fetchOpts.credentials="include":"anonymous"===link.crossOrigin?fetchOpts.credentials="omit":fetchOpts.credentials="same-origin",fetchOpts}(link);fetch(link.href,fetchOpts)}}();const globals="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function append(target,node){target.appendChild(node)}function insert(target,node,anchor){target.insertBefore(node,anchor||null)}function detach(node){node.parentNode&&node.parentNode.removeChild(node)}function destroy_each(iterations,detaching){for(let i=0;i<iterations.length;i+=1)iterations[i]&&iterations[i].d(detaching)}function element(name2){return document.createElement(name2)}function svg_element(name2){return document.createElementNS("http://www.w3.org/2000/svg",name2)}function text(data){return document.createTextNode(data)}function space(){return text(" ")}function empty(){return text("")}function listen(node,event,handler,options){return node.addEventListener(event,handler,options),()=>node.removeEventListener(event,handler,options)}function prevent_default(fn){return function(event){return event.preventDefault(),fn.call(this,event)}}function attr(node,attribute,value){null==value?node.removeAttribute(attribute):node.getAttribute(attribute)!==value&&node.setAttribute(attribute,value)}const always_set_through_set_attribute=["width","height"];function set_attributes(node,attributes){const descriptors=Object.getOwnPropertyDescriptors(node.__proto__);for(const key in attributes)null==attributes[key]?node.removeAttribute(key):"style"===key?node.style.cssText=attributes[key]:"__value"===key?node.value=node[key]=attributes[key]:descriptors[key]&&descriptors[key].set&&-1===always_set_through_set_attribute.indexOf(key)?node[key]=attributes[key]:attr(node,key,attributes[key])}function set_style(node,key,value,important){null==value?node.style.removeProperty(key):node.style.setProperty(key,value,"")}let crossorigin,current_component;function add_iframe_resize_listener(node,fn){"static"===getComputedStyle(node).position&&(node.style.position="relative");const iframe=element("iframe");iframe.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),iframe.setAttribute("aria-hidden","true"),iframe.tabIndex=-1;const crossorigin2=function(){if(void 0===crossorigin){crossorigin=!1;try{"undefined"!=typeof window&&window.parent&&window.parent.document}catch(error){crossorigin=!0}}return crossorigin}();let unsubscribe;return crossorigin2?(iframe.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",unsubscribe=listen(window,"message",(event=>{event.source===iframe.contentWindow&&fn()}))):(iframe.src="about:blank",iframe.onload=()=>{unsubscribe=listen(iframe.contentWindow,"resize",fn),fn()}),append(node,iframe),()=>{(crossorigin2||unsubscribe&&iframe.contentWindow)&&unsubscribe(),detach(iframe)}}function toggle_class(element2,name2,toggle){element2.classList.toggle(name2,!!toggle)}class HtmlTag{constructor(is_svg=!1){__publicField(this,"is_svg",!1),__publicField(this,"e"),__publicField(this,"n"),__publicField(this,"t"),__publicField(this,"a"),this.is_svg=is_svg,this.e=this.n=null}c(html){this.h(html)}m(html,target,anchor=null){this.e||(this.is_svg?this.e=svg_element(target.nodeName):this.e=element(11===target.nodeType?"TEMPLATE":target.nodeName),this.t="TEMPLATE"!==target.tagName?target:target.content,this.c(html)),this.i(anchor)}h(html){this.e.innerHTML=html,this.n=Array.from("TEMPLATE"===this.e.nodeName?this.e.content.childNodes:this.e.childNodes)}i(anchor){for(let i=0;i<this.n.length;i+=1)insert(this.t,this.n[i],anchor)}p(html){this.d(),this.h(html),this.i(this.a)}d(){this.n.forEach(detach)}}function construct_svelte_component(component,props){return new component(props)}function set_current_component(component){current_component=component}function get_current_component(){if(!current_component)throw new Error("Function called outside component initialization");return current_component}function onMount(fn){get_current_component().$$.on_mount.push(fn)}function createEventDispatcher(){const component=get_current_component();return(type2,detail,{cancelable:cancelable=!1}={})=>{const callbacks=component.$$.callbacks[type2];if(callbacks){const event=function(type2,detail,{bubbles:bubbles=!1,cancelable:cancelable=!1}={}){return new CustomEvent(type2,{detail:detail,bubbles:bubbles,cancelable:cancelable})}(type2,detail,{cancelable:cancelable});return callbacks.slice().forEach((fn=>{fn.call(component,event)})),!event.defaultPrevented}return!0}}const dirty_components=[],binding_callbacks=[];let render_callbacks=[];const flush_callbacks=[],resolved_promise=Promise.resolve();let update_scheduled=!1;function add_render_callback(fn){render_callbacks.push(fn)}const seen_callbacks=new Set;let flushidx=0;function flush(){if(0!==flushidx)return;const saved_component=current_component;do{try{for(;flushidx<dirty_components.length;){const component=dirty_components[flushidx];flushidx++,set_current_component(component),update$3(component.$$)}}catch(e){throw dirty_components.length=0,flushidx=0,e}for(set_current_component(null),dirty_components.length=0,flushidx=0;binding_callbacks.length;)binding_callbacks.pop()();for(let i=0;i<render_callbacks.length;i+=1){const callback=render_callbacks[i];seen_callbacks.has(callback)||(seen_callbacks.add(callback),callback())}render_callbacks.length=0}while(dirty_components.length);for(;flush_callbacks.length;)flush_callbacks.pop()();update_scheduled=!1,seen_callbacks.clear(),set_current_component(saved_component)}function update$3($$){if(null!==$$.fragment){$$.update(),run_all($$.before_update);const dirty=$$.dirty;$$.dirty=[-1],$$.fragment&&$$.fragment.p($$.ctx,dirty),$$.after_update.forEach(add_render_callback)}}const outroing=new Set;let outros;function group_outros(){outros={r:0,c:[],p:outros}}function check_outros(){outros.r||run_all(outros.c),outros=outros.p}function transition_in(block,local){block&&block.i&&(outroing.delete(block),block.i(local))}function transition_out(block,local,detach2,callback){if(block&&block.o){if(outroing.has(block))return;outroing.add(block),outros.c.push((()=>{outroing.delete(block),callback&&(detach2&&block.d(1),callback())})),block.o(local)}else callback&&callback()}function ensure_array_like(array_like_or_iterator){return void 0!==(null==array_like_or_iterator?void 0:array_like_or_iterator.length)?array_like_or_iterator:Array.from(array_like_or_iterator)}function outro_and_destroy_block(block,lookup){transition_out(block,1,1,(()=>{lookup.delete(block.key)}))}function update_keyed_each(old_blocks,dirty,get_key,dynamic,ctx,list,lookup,node,destroy,create_each_block2,next,get_context){let o=old_blocks.length,n=list.length,i=o;const old_indexes={};for(;i--;)old_indexes[old_blocks[i].key]=i;const new_blocks=[],new_lookup=new Map,deltas=new Map,updates=[];for(i=n;i--;){const child_ctx=get_context(ctx,list,i),key=get_key(child_ctx);let block=lookup.get(key);block?updates.push((()=>block.p(child_ctx,dirty))):(block=create_each_block2(key,child_ctx),block.c()),new_lookup.set(key,new_blocks[i]=block),key in old_indexes&&deltas.set(key,Math.abs(i-old_indexes[key]))}const will_move=new Set,did_move=new Set;function insert2(block){transition_in(block,1),block.m(node,next),lookup.set(block.key,block),next=block.first,n--}for(;o&&n;){const new_block=new_blocks[n-1],old_block=old_blocks[o-1],new_key=new_block.key,old_key=old_block.key;new_block===old_block?(next=new_block.first,o--,n--):new_lookup.has(old_key)?!lookup.has(new_key)||will_move.has(new_key)?insert2(new_block):did_move.has(old_key)?o--:deltas.get(new_key)>deltas.get(old_key)?(did_move.add(new_key),insert2(new_block)):(will_move.add(old_key),o--):(destroy(old_block,lookup),o--)}for(;o--;){const old_block=old_blocks[o];new_lookup.has(old_block.key)||destroy(old_block,lookup)}for(;n;)insert2(new_blocks[n-1]);return run_all(updates),new_blocks}function get_spread_update(levels,updates){const update2={},to_null_out={},accounted_for={$$scope:1};let i=levels.length;for(;i--;){const o=levels[i],n=updates[i];if(n){for(const key in o)key in n||(to_null_out[key]=1);for(const key in n)accounted_for[key]||(update2[key]=n[key],accounted_for[key]=1);levels[i]=n}else for(const key in o)accounted_for[key]=1}for(const key in to_null_out)key in update2||(update2[key]=void 0);return update2}function get_spread_object(spread_props){return"object"==typeof spread_props&&null!==spread_props?spread_props:{}}function create_component(block){block&&block.c()}function mount_component(component,target,anchor){const{fragment:fragment,after_update:after_update}=component.$$;fragment&&fragment.m(target,anchor),add_render_callback((()=>{const new_on_destroy=component.$$.on_mount.map(run).filter(is_function);component.$$.on_destroy?component.$$.on_destroy.push(...new_on_destroy):run_all(new_on_destroy),component.$$.on_mount=[]})),after_update.forEach(add_render_callback)}function destroy_component(component,detaching){const $$=component.$$;null!==$$.fragment&&(!function(fns){const filtered=[],targets=[];render_callbacks.forEach((c=>-1===fns.indexOf(c)?filtered.push(c):targets.push(c))),targets.forEach((c=>c())),render_callbacks=filtered}($$.after_update),run_all($$.on_destroy),$$.fragment&&$$.fragment.d(detaching),$$.on_destroy=$$.fragment=null,$$.ctx=[])}function make_dirty(component,i){-1===component.$$.dirty[0]&&(dirty_components.push(component),update_scheduled||(update_scheduled=!0,resolved_promise.then(flush)),component.$$.dirty.fill(0)),component.$$.dirty[i/31|0]|=1<<i%31}function init$6(component,options,instance2,create_fragment2,not_equal,props,append_styles=null,dirty=[-1]){const parent_component=current_component;set_current_component(component);const $$=component.$$={fragment:null,ctx:[],props:props,update:noop,not_equal:not_equal,bound:blank_object(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(options.context||(parent_component?parent_component.$$.context:[])),callbacks:blank_object(),dirty:dirty,skip_bound:!1,root:options.target||parent_component.$$.root};append_styles&&append_styles($$.root);let ready=!1;if($$.ctx=instance2?instance2(component,options.props||{},((i,ret,...rest)=>{const value=rest.length?rest[0]:ret;return $$.ctx&&not_equal($$.ctx[i],$$.ctx[i]=value)&&(!$$.skip_bound&&$$.bound[i]&&$$.bound[i](value),ready&&make_dirty(component,i)),ret})):[],$$.update(),ready=!0,run_all($$.before_update),$$.fragment=!!create_fragment2&&create_fragment2($$.ctx),options.target){if(options.hydrate){const nodes=(element2=options.target,Array.from(element2.childNodes));$$.fragment&&$$.fragment.l(nodes),nodes.forEach(detach)}else $$.fragment&&$$.fragment.c();options.intro&&transition_in(component.$$.fragment),mount_component(component,options.target,options.anchor),flush()}var element2;set_current_component(parent_component)}class SvelteComponent{constructor(){__publicField(this,"$$"),__publicField(this,"$$set")}$destroy(){destroy_component(this,1),this.$destroy=noop}$on(type2,callback){if(!is_function(callback))return noop;const callbacks=this.$$.callbacks[type2]||(this.$$.callbacks[type2]=[]);return callbacks.push(callback),()=>{const index=callbacks.indexOf(callback);-1!==index&&callbacks.splice(index,1)}}$set(props){var obj;this.$$set&&(obj=props,0!==Object.keys(obj).length)&&(this.$$.skip_bound=!0,this.$$set(props),this.$$.skip_bound=!1)}}"undefined"!=typeof window&&(window.__svelte||(window.__svelte={v:new Set})).v.add("4");class VisibilityUtil{static addIntersectionObserver(onIntersection,elementToObserve,options={rootMargin:"0px",threshold:0}){new IntersectionObserver((entries=>{entries.forEach((entry=>{onIntersection(entry.isIntersecting)}))}),options).observe(elementToObserve)}}const subscriber_queue=[];function writable(value,start=noop){let stop;const subscribers=new Set;function set2(new_value){if(safe_not_equal(value,new_value)&&(value=new_value,stop)){const run_queue=!subscriber_queue.length;for(const subscriber of subscribers)subscriber[1](),subscriber_queue.push(subscriber,value);if(run_queue){for(let i=0;i<subscriber_queue.length;i+=2)subscriber_queue[i][0](subscriber_queue[i+1]);subscriber_queue.length=0}}}function update2(fn){set2(fn(value))}return{set:set2,update:update2,subscribe:function(run2,invalidate=noop){const subscriber=[run2,invalidate];return subscribers.add(subscriber),1===subscribers.size&&(stop=start(set2,update2)||noop),run2(value),()=>{subscribers.delete(subscriber),0===subscribers.size&&stop&&(stop(),stop=null)}}}}const createAffiliateUri=(goToURI,subId1="",subId2="",subId3="",sharedId="",veh="",sourceId="")=>{const trackingParameters={subId1:subId1,subId2:subId2,subId3:subId3,sharedID:sharedId,veh:veh,sourceid:sourceId};let updatedGoToUrl=new URL(goToURI);return Object.keys(trackingParameters).forEach((param=>{updatedGoToUrl=((url2,param,value)=>{if(param&&value){const updatedUrl=new URL(url2.toString());return updatedUrl.searchParams.append(param,value),updatedUrl}return url2})(updatedGoToUrl,param,trackingParameters[param])})),updatedGoToUrl.toString()};var HttpMethod,HttpMethod2,DeviceType,DeviceType2,Api,Api2;(HttpMethod2=HttpMethod||(HttpMethod={})).GET="GET",HttpMethod2.POST="POST",HttpMethod2.PUT="PUT",HttpMethod2.DELETE="DELETE",(DeviceType2=DeviceType||(DeviceType={})).DESKTOP="desktop",DeviceType2.MOBILE="mobile",DeviceType2.TABLET="tablet",(Api2=Api||(Api={})).PREDICTIVE="/api/predictive",Api2.PRODUCTS="/api/products",Api2.SHOPPER_GAM="/api/shopper-gam",Api2.CAL_TELEMETRY="/api/calvera-telemetry",Api2.POL_TRACKING="/api/trk";const convertObject=(source,map)=>{let parsed=JSON.parse(JSON.stringify(source)),keys=Object.keys(map);return Object.values(map).forEach(((value,v)=>{source[value]&&(parsed[keys[v]]=source[value])})),parsed},formatter=Intl.NumberFormat("en-us",{style:"currency",currency:"USD"}),formatCurrency=raw=>formatter.format(raw),parseMarkup=(str,data,pattern)=>{let parsed=str;pattern=pattern||/~\{[A-Z]*\}~/gi;const patternMatch=str.match(pattern);if(patternMatch)for(const num in patternMatch){const match=String(patternMatch[num]),matchLength=match.length;let output=data[match.substring(2,matchLength-2)];output=null==output?match:output.toString(),parsed=parsed.replace(match,output)}return parsed},getQueryStringParamValue=key=>{if("undefined"!=typeof window){return new URL(window.location.href).searchParams.get(key)||""}},getParentPageDataLayerWindow=window2=>{try{const{dataLayer:dataLayer}=window2.top;if(dataLayer){return dataLayer.find((windowObj=>"legacyPageview"===windowObj.event))||dataLayer.find((windowObj=>"unifiedPageview"===windowObj.event))}}catch(error){return}},getDocumentId=()=>{var _a;const parentWindowObj=getParentPageDataLayerWindow(window);if(parentWindowObj&&parentWindowObj.karmaId)return parentWindowObj.karmaId;if(parentWindowObj&&parentWindowObj.documentId)return parentWindowObj.documentId;return new URLSearchParams(null==(_a=window.location)?void 0:_a.search).get("documentId")??"0"},getMuid=window2=>{const sm_params2=window2.sm_params?window2.sm_params:void 0,parentWindowObj=getParentPageDataLayerWindow(window2);if(sm_params2&&sm_params2.ka_muid)return sm_params2.ka_muid;if(parentWindowObj&&parentWindowObj.MUID)return parentWindowObj.MUID;if(parentWindowObj&&parentWindowObj.muid)return parentWindowObj.muid;return new URLSearchParams(window2.location.search).get("muid")??""},getRequestId=window2=>{const sm_params2=window2.sm_params;if(sm_params2&&sm_params2.requestId)return sm_params2.requestId;const parentWindowObj=getParentPageDataLayerWindow(window2);if(parentWindowObj&&parentWindowObj.requestId)return parentWindowObj.requestId;if(parentWindowObj&&parentWindowObj.internalRequestId)return parentWindowObj.internalRequestId;const params=new URLSearchParams(window2.location.search);return(params.get("requestId")||params.get("REQUEST_ID"))??""},getOriginReferer=()=>{if(window.top!==window.self)return new URLSearchParams(window.location.search).get("origin")||document.referrer;return(new URLSearchParams(window.location.search).get("origin")||window.parent.document.location.href).replace(/http:\/\/localhost:\d+[0-9]/,"https://www.allrecipes.com")},getSessionId=()=>{const parentWindowObj=getParentPageDataLayerWindow(window);if(parentWindowObj&&parentWindowObj.internalSessionId)return parentWindowObj.internalSessionId;return new URLSearchParams(window.location.search).get("sessionId")??`${Date.now()}`},getGamCreativeId=window2=>{const sm_params2=window2.sm_params;if(sm_params2&&sm_params2.creative_id)return sm_params2.creative_id;if(sm_params2&&sm_params2.gamCreativeId)return sm_params2.gamCreativeId;return new URLSearchParams(window2.location.search).get("gamCreativeId")??""},getGamLineItemId=window2=>{const sm_params2=window2.sm_params;if(sm_params2&&sm_params2.line_item_id)return sm_params2.line_item_id;if(sm_params2&&sm_params2.gamLineItemId)return sm_params2.gamLineItemId;return new URLSearchParams(window2.location.search).get("gamLineItemId")??""},getSTax=window2=>{try{const sTaxValues=[],sm_params2=window2.sm_params?window2.sm_params:void 0,_win=null!==window2.top?window2.top:window2,mntlSlotsTargeting=_win&&_win.Mntl?_win.Mntl.GPT.getAllSlots()[0].targeting:sm_params2;return mntlSlotsTargeting&&mntlSlotsTargeting.tax1&&sTaxValues.push(mntlSlotsTargeting.tax1),mntlSlotsTargeting&&mntlSlotsTargeting.tax2&&sTaxValues.push(mntlSlotsTargeting.tax2),mntlSlotsTargeting&&mntlSlotsTargeting.tax3&&sTaxValues.push(mntlSlotsTargeting.tax3),sTaxValues.join(",")}catch(error){return""}},getPotentialGAMClickTracker=()=>{if(window.sm_params){const gamClickRedirectDestination=window.sm_params.smcuu?window.sm_params.smcuu:window.sm_params.smcue?window.sm_params.smcue:void 0;if(!gamClickRedirectDestination)throw new Error('Detected potential GAM setup but "sm_params.smcuu" or "sm_params.smcue" are empty');return gamClickRedirectDestination}return""},request=async(url2,options)=>{try{const response=await(async(url2,init2)=>{try{return await fetch(url2,init2)}catch(err){throw err}})(url2,options);return response.ok,response}catch(err){throw err}},JSON_HEADERS={"Content-Type":"application/json",Accept:"application/json"},ajaxRequestor_get=async(url2,options,isJSON=!1)=>{try{const headers=isJSON?JSON_HEADERS:{},init2={method:HttpMethod.GET,headers:headers,...options},response=await request(url2,init2);if(!response.ok)throw new Error(`ERROR with get from ${url2}, response status = ${response.status}`);if(!isJSON)return;return await response.json()}catch(err){throw err}},ajaxRequestor_post=async(url2,options,isJSON=!1)=>{try{const headers=isJSON?JSON_HEADERS:{};options={...options,method:HttpMethod.POST,headers:headers};const response=await request(url2,options);if(response.ok,!isJSON)return;return 204===response.status?response:await response.json()}catch(err){throw err}},_SessionStorage=class{static getValue(key){if(!this.isKeyValid(key))throw new Error("empty or undefined key");return window.sessionStorage.getItem(key)}static setValue(key,value){if(!this.isKeyValid(key)||!value)throw new Error("empty or undefined key or value");if(this.isExist(key))throw new Error("key already exists");window.sessionStorage.setItem(key,value)}static removeValue(key){if(!this.isKeyValid(key))throw new Error("empty or undefined key");this.isExist(key)&&window.sessionStorage.removeItem(key)}static updateValue(key,value){this.isExist(key)&&this.removeValue(key),this.setValue(key,value)}static isExist(key){if(!this.isKeyValid(key))throw new Error("empty or undefined key");return!(null===window.sessionStorage.getItem(key))}static isKeyValid(key){return null!=key&&""!==key&&" "!==key}};__publicField(_SessionStorage,"getDictionaryValue",(key=>{const dataString=window.sessionStorage.getItem(key);if(dataString)return JSON.parse(dataString)})),__publicField(_SessionStorage,"setDictionaryValue",((key,data)=>{const saved=_SessionStorage.getDictionaryValue(key);saved&&(data={...saved,...data}),window.sessionStorage.setItem(key,JSON.stringify(data))}));let SessionStorage=_SessionStorage;var CartType,CartType2,RetailerPartnerType,RetailerPartnerType2;(CartType2=CartType||(CartType={}))[CartType2.DEFAULT=0]="DEFAULT",CartType2[CartType2.LANDING_PAGE=1]="LANDING_PAGE",CartType2[CartType2.QS_PARAMS=2]="QS_PARAMS",CartType2[CartType2.INTEGRATED_RETAILER=3]="INTEGRATED_RETAILER",(RetailerPartnerType2=RetailerPartnerType||(RetailerPartnerType={})).NONE="none",RetailerPartnerType2.WALMART="walmart",RetailerPartnerType2.KROGER="kroger",RetailerPartnerType2.TARGET="target",RetailerPartnerType2.AMAZON_FRESH="amazonFresh",RetailerPartnerType2.INSTACART="instacart";const config$5={type:RetailerPartnerType.AMAZON_FRESH},baseEndpoint$1=`${Api.PRODUCTS}/v1/integrations/`,offersEndpoints={[RetailerPartnerType.NONE]:"",[RetailerPartnerType.WALMART]:`${baseEndpoint$1}wmt/offers`,[RetailerPartnerType.KROGER]:`${baseEndpoint$1}kro/offers`,[RetailerPartnerType.TARGET]:`${baseEndpoint$1}tgt/offers`},offersBundleEndpoints={[RetailerPartnerType.NONE]:"",[RetailerPartnerType.WALMART]:`${baseEndpoint$1}wmt/bundle/offers`,[RetailerPartnerType.KROGER]:`${baseEndpoint$1}kro/bundle/offers`,[RetailerPartnerType.TARGET]:`${baseEndpoint$1}tgt/bundle/offers`},locationEndpoints={[RetailerPartnerType.NONE]:"",[RetailerPartnerType.WALMART]:`${baseEndpoint$1}wmt/locations`,[RetailerPartnerType.KROGER]:`${baseEndpoint$1}kro/locations`,[RetailerPartnerType.TARGET]:`${baseEndpoint$1}tgt/locations`},logosEndpoint=`${baseEndpoint$1}retailer/search`,defaultRetailerGroceryServerIdMap={walmart:4099,kroger:1063,target:2008},config$4={type:RetailerPartnerType.INSTACART},config$3={type:RetailerPartnerType.KROGER,defaultUrl:"https://www.kroger.com/"};var layoutSizes,layoutSizes2,sharedAddressComponentLayout,sharedAddressComponentLayout2;(layoutSizes2=layoutSizes||(layoutSizes={})).STANDARD="standard",layoutSizes2.COMPACT="compact",layoutSizes2.LARGE_LOGO="large-logo",(sharedAddressComponentLayout2=sharedAddressComponentLayout||(sharedAddressComponentLayout={})).INLINE="prx-address--inline",sharedAddressComponentLayout2.STACKED="prx-address--stacked",sharedAddressComponentLayout2.MIXED="prx-address--mixed";const addressKeys_street="street",retailerLocationKeys_id="id",retailerLocationKeys_address="address",locations={[RetailerPartnerType.KROGER]:{[retailerLocationKeys_id]:"locationId"},[RetailerPartnerType.INSTACART]:{},[RetailerPartnerType.TARGET]:{[retailerLocationKeys_id]:"locationId"},[RetailerPartnerType.WALMART]:{[retailerLocationKeys_id]:"fulfillmentStoreId",[retailerLocationKeys_address]:"location"}},addresses={[RetailerPartnerType.KROGER]:{[addressKeys_street]:"line1"},[RetailerPartnerType.INSTACART]:{},[RetailerPartnerType.TARGET]:{[addressKeys_street]:"line"},[RetailerPartnerType.WALMART]:{[addressKeys_street]:"address"}},config$2={type:RetailerPartnerType.TARGET,baseURI:"https://goto.target.com/QO6PZM?veh=aff&sourceid=imp_000011112222333344",affiliateURI:"https://www.target.com/co-cart"},config$1={type:RetailerPartnerType.WALMART,baseURI:"https://goto.walmart.com/c/2375857/1207219/9383?veh=aff&sourceid=imp_000011112222333344",affiliateURI:"https://affil.walmart.com/cart/0/2?storeId=~{id}~&items="},amazonFreshCheckout={config:config$5,checkout:()=>{}},instacartCheckout={config:config$4,checkout:()=>{}},handleInstacartLoaded=async event=>{const iframe=await((selector,dom=document)=>new Promise((resolve=>{const element2=dom.querySelector(selector);if(element2)return resolve(element2);new MutationObserver(((mutationRecords,observer2)=>{Array.from(dom.querySelectorAll(selector)).forEach((element3=>{resolve(element3),observer2.disconnect()}))})).observe(dom,{childList:!0,subtree:!0})})))(".instacart-container iframe");iframe.style.borderRadius="4px",iframe.style.backgroundColor="rgb(0, 61, 41)"},attachScript=()=>{const script=document.createElement("script");script.id="instacart-snippet",script.innerText='(function (w, d, s, id) {\n        var js, fjs = d.getElementsByTagName(s)[0];\n        console.log(\'instacart loaded\');\n        if (d.getElementById(id)) { return; }\n        js = d.createElement(s);\n        js.id = id;\n        js.src = "https://widgets.instacart.com/widget-bundle.js";\n        js.async = true;\n        js.onload = () => {\n            var event = new Event(\'instacart-loaded\');\n            w.dispatchEvent(event);\n        };\n        fjs.parentNode.insertBefore(js, fjs);\n    })(window, document, "script", "standard-instacart-widget-v1");',document.body.appendChild(script)},baseEndpoint="https://products.polaris.me/v1/integrations",krogerTokenEndpoint=`${Api.PRODUCTS}/v1/integrations/kro/auth/token`,krogerCartEndpoint=(Api.PRODUCTS,`https://live.polaris.me${Api.PRODUCTS}/v1/integrations/kro/cart`),krogerApiRedirectUri=`${baseEndpoint}/kro/auth/callback`,krogerAuthUri=`https://api.kroger.com/v1/connect/oauth2/authorize?client_id=${encodeURIComponent("groceryserver-polaris-26dedce8586f2431e2030f08e75d6107")}&redirect_uri={{REDIRECT_URI}}&response_type=code&scope=cart.basic:write`,targetAuthEndpoint=`${Api.PRODUCTS}/v1/integrations/tgt/cart`;var AuthStatus,AuthStatus2,IErrorReasonCode,IErrorReasonCode2,MercuryRetailer,MercuryRetailer2;(AuthStatus2=AuthStatus||(AuthStatus={})).WAITING="waiting",AuthStatus2.SUCCESS="success",AuthStatus2.ERROR="error",(IErrorReasonCode2=IErrorReasonCode||(IErrorReasonCode={})).INVALID_UPC="UPC must have a length of 13 characters",IErrorReasonCode2.INVALID_PARAMETERS="Cannot parse parameters",IErrorReasonCode2.ACCESS_DENIED="missing required scopes",IErrorReasonCode2.CART_NOT_FULFILLABLE="cart not fulfillable",(MercuryRetailer2=MercuryRetailer||(MercuryRetailer={})).WALMART="wmt",MercuryRetailer2.KROGER="kro",MercuryRetailer2.AMAZON="amzn",MercuryRetailer2.TARGET="tgt",MercuryRetailer2.DRIZLY="drz",MercuryRetailer2.RESERVE="res",MercuryRetailer2.INSTACART="instacart",MercuryRetailer2.WHOLEFOODS="wholefoods";const state$8={endpoint:baseEndpoint,initialized:!1,referenceId:crypto.randomUUID()},baseResponse={status:AuthStatus.WAITING,refreshToken:"",expiresIn:0,accessToken:"",tokenType:"",valid:!1},errorResponse={...baseResponse,status:AuthStatus.ERROR},store$6=writable(state$8),getRequestConfig=token=>{const headers=new Headers;return headers.set("Authorization",`bearer ${token.accessToken}`),headers.set("Content-Type","application/json; charset=utf-8"),headers},handleKrogerApiResponse=async response=>{if(response.ok){const key="auth-kro",data=await response.json(),resp={...baseResponse,status:AuthStatus.SUCCESS,valid:!0,...data};return localStorage.setItem(key,JSON.stringify(resp)),resp}const status=404===response.status?AuthStatus.WAITING:AuthStatus.ERROR;return{...baseResponse,status:status}},productsStore_fetchAccessToken=(store$6.subscribe,store$6.set,store$6.update,async()=>{try{const request2=new Request(`${getApiHost()}${krogerTokenEndpoint}?id=${state$8.referenceId}`),response=await fetch(request2);return handleKrogerApiResponse(response)}catch(err){return errorResponse}}),productsStore_getCurrentAccessToken=()=>{const lsToken=localStorage.getItem("auth-kro");return lsToken?JSON.parse(lsToken):{refreshToken:"",expiresIn:0,accessToken:"",tokenType:"",valid:!1}},productsStore_clearToken=()=>{localStorage.removeItem("auth-kro")},productsStore_getReferenceId=()=>state$8.referenceId,productsStore_createCart=async(token,items)=>{try{const data={items:items,token:token.accessToken},options={headers:getRequestConfig(token),body:JSON.stringify(data)},response=await ajaxRequestor_post(krogerCartEndpoint,options,!0);if(response&&204===response.status)return[!0,null];throw Error}catch(err){return[!1,err]}};class KrogerCheckout{constructor(retailerName,items,onCartCreated,onCartError){__publicField(this,"authReference",""),__publicField(this,"authInterval"),__publicField(this,"token",null),__publicField(this,"authTries",0),__publicField(this,"loading",!1),__publicField(this,"items",[]),__publicField(this,"retailerName"),__publicField(this,"onCartCreated"),__publicField(this,"onCartError"),__publicField(this,"focusEventHandler"),__publicField(this,"getKrogerAuthUri",(referenceId=>krogerAuthUri.replace("{{REDIRECT_URI}}",encodeURIComponent(`${krogerApiRedirectUri}?id=${referenceId}`)))),this.retailerName=retailerName,this.items=items,this.onCartCreated=onCartCreated,this.onCartError=onCartError,this.loading=!0,this.focusEventHandler=()=>{this.onAuthWindowClosed(this)}}get cartUrl(){if(this.retailerName){return`${Chains.get(this.retailerName).Url}/cart`}return"https://www.kroger.com"}authorizeUser(){return this.authReference=this.getKrogerAuthUri(productsStore_getReferenceId()),window.open(this.authReference,"Kroger Login","resizeable,scrollbars,status"),window.addEventListener("focus",this.focusEventHandler),this.authReference}async onAuthWindowClosed(self2){if(window.removeEventListener("focus",self2.focusEventHandler),!self2.authReference)return;const response=await productsStore_fetchAccessToken();switch(response.status){case AuthStatus.SUCCESS:self2.token=response,self2.addItemsToCart(self2.token);break;case AuthStatus.WAITING:case AuthStatus.ERROR:self2.loading=!1}}async addItemsToCart(token){const items=this.items,kroResponse=await productsStore_createCart(token,items),[cart2,err]=kroResponse;err?400===Number(err)?this.onCartError():(productsStore_clearToken(),await this.authorizeUser()):cart2?this.onCartCreated(this.cartUrl):this.onCartError()}async handleCheckoout(){try{const token=productsStore_getCurrentAccessToken();return token.accessToken.length?(this.token=token,await this.addItemsToCart(token)):this.authReference=this.authorizeUser(),this.cartUrl}catch(err){return this.loading=!1,this.cartUrl}}}const krogerCheckout={config:config$3,checkout:krogerCheckoutServiceConfig=>{const krogerItems=krogerCheckoutServiceConfig.selectedItems.filter((item=>""!==item.upc&&"000000000000"!==item.upc)).map((i=>({upc:i.upc,quantity:1}))),kconfig={retailerName:krogerCheckoutServiceConfig.location.chain,items:krogerItems,onCartCreated:cartUrl=>{krogerCheckoutServiceConfig.callbackFunction&&krogerCheckoutServiceConfig.callbackFunction()},onCartError:()=>{}},kc=new KrogerCheckout(kconfig.retailerName,kconfig.items,kconfig.onCartCreated,kconfig.onCartError);return getKrogerCheckoutUrl(kc)}},getKrogerCheckoutUrl=async kc=>{const krogerCheckoutUrl=await kc.handleCheckoout(),gamRedirectUrl=getPotentialGAMClickTracker();let destinationUrl=krogerCheckoutUrl;"localhost"===window.location.hostname&&gamRedirectUrl&&(destinationUrl=encodeURIComponent(destinationUrl));return gamRedirectUrl?`${gamRedirectUrl}${destinationUrl}`:destinationUrl},targetCheckout={config:config$2,checkout:async targetCheckoutServiceConfig=>{var _a,_b,_c,_d;const checkoutUrl=new URL(createAffiliateUri(config$2.baseURI,null==(_a=targetCheckoutServiceConfig.impactRadius)?void 0:_a.subId1,null==(_b=targetCheckoutServiceConfig.impactRadius)?void 0:_b.subId2,null==(_c=targetCheckoutServiceConfig.impactRadius)?void 0:_c.subId3,null==(_d=targetCheckoutServiceConfig.impactRadius)?void 0:_d.sharedId));let token="";const targetCartItems=targetCheckoutServiceConfig.selectedItems.map((item=>({quantity:1,upc:item.id})));try{const[response,error]=await(async(items,locationId)=>{const endpoint=`${getApiHost()}${targetAuthEndpoint}`,payload={locationId:locationId,items:items};try{const fetchOpts={method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(payload)},response=await fetch(endpoint,fetchOpts);return[await response.json(),null]}catch(err){return[{accessToken:""},err]}})(targetCartItems,targetCheckoutServiceConfig.location.id);if(error)return checkoutUrl.toString();if(!response.accessToken.length)return checkoutUrl.toString();token=response.accessToken}catch(exception){}if(!token.length)return"https://www.target.com/";const affiliate=new URL(parseMarkup(config$2.affiliateURI,targetCheckoutServiceConfig.location));affiliate.searchParams.append("access_token",token),checkoutUrl.searchParams.append("u",affiliate.toString());const gamRedirectUrl=getPotentialGAMClickTracker();let destinationUrl=checkoutUrl.toString();"localhost"===window.location.hostname&&gamRedirectUrl&&(destinationUrl=encodeURIComponent(destinationUrl));const retailerCheckoutUrl=gamRedirectUrl?`${gamRedirectUrl}${destinationUrl}`:destinationUrl;return window.open(retailerCheckoutUrl,"_blank"),retailerCheckoutUrl}},walmartCheckout={config:config$1,checkout:walmartCheckoutServiceConfig=>{var _a,_b,_c,_d;const checkoutUrl=new URL(createAffiliateUri(config$1.baseURI,null==(_a=walmartCheckoutServiceConfig.impactRadius)?void 0:_a.subId1,null==(_b=walmartCheckoutServiceConfig.impactRadius)?void 0:_b.subId2,null==(_c=walmartCheckoutServiceConfig.impactRadius)?void 0:_c.subId3,null==(_d=walmartCheckoutServiceConfig.impactRadius)?void 0:_d.sharedId)),itemString=walmartCheckoutServiceConfig.selectedItems.map((item=>item.id)).join(","),affiliate=parseMarkup(config$1.affiliateURI,walmartCheckoutServiceConfig.location)+itemString;checkoutUrl.searchParams.append("u",affiliate);const gamRedirectUrl=getPotentialGAMClickTracker();let destinationUrl=checkoutUrl.toString();"localhost"===window.location.hostname&&gamRedirectUrl&&(destinationUrl=encodeURIComponent(destinationUrl));const retailerCheckoutUrl=gamRedirectUrl?`${gamRedirectUrl}${destinationUrl}`:destinationUrl;return window.open(retailerCheckoutUrl,"_blank"),retailerCheckoutUrl}},checkoutServices={[RetailerPartnerType.AMAZON_FRESH]:amazonFreshCheckout,[RetailerPartnerType.INSTACART]:instacartCheckout,[RetailerPartnerType.KROGER]:krogerCheckout,[RetailerPartnerType.TARGET]:targetCheckout,[RetailerPartnerType.WALMART]:walmartCheckout};let state$7={type:CartType.DEFAULT,retailer:RetailerPartnerType.NONE,carts:[],currentCart:0,currentTotal:""};const store$5=writable(state$7),getCurrentCartTotal=()=>{const cart2=state$7.carts[state$7.currentCart];if(!cart2)return formatCurrency(0);const total=cart2.itemCollections.reduce(((total2,collection)=>{if(!collection.isSelected)return total2;const currentItem=collection.items[collection.currentItem];if(!currentItem)return total2;const priceValue=currentItem.price;if(void 0===priceValue)return total2;const price=parseFloat(priceValue);return price&&(total2+=price),total2}),0);return formatCurrency(total)},emptyLocation={id:"",name:"",address:{street:"",city:"",state:""},city:"",state:"",stateShort:"",zip:""},getCurrentSelectedItems=()=>{let selectedItems=[];if(state$7.carts[state$7.currentCart]&&state$7.carts[state$7.currentCart].itemCollections.length>0){selectedItems=state$7.carts[state$7.currentCart].itemCollections.filter((collection=>collection.isSelected)).map((collection=>collection.items[collection.currentItem]))}return selectedItems},{set:set$3,subscribe:subscribe$3,update:update$2}=store$5,cartCheckoutStore={set:set$3,subscribe:subscribe$3,update:update$2,init:config2=>{state$7={...state$7,...config2},state$7.carts.length>0&&(state$7.currentTotal=getCurrentCartTotal()),state$7.retailer===RetailerPartnerType.INSTACART&&(window.addEventListener("instacart-loaded",handleInstacartLoaded),attachScript()),store$5.set(state$7)},setValue:(key,value)=>{state$7[key]=value,"carts"===key&&(state$7.currentTotal=getCurrentCartTotal()),store$5.set(state$7)},toggleIsItemSelected:index=>{if(index>state$7.carts[state$7.currentCart].itemCollections.length-1)return;const collection=state$7.carts[state$7.currentCart].itemCollections[index];collection.isSelected=!collection.isSelected,state$7.carts[state$7.currentCart].itemCollections[index]=collection,state$7.currentTotal=getCurrentCartTotal(),store$5.set(state$7)},changeItemForProduct:(productId,itemIndex)=>{const collectionIndex=state$7.carts[state$7.currentCart].itemCollections.findIndex((collection2=>collection2.productId===productId));if(-1===collectionIndex)return;const collection=state$7.carts[state$7.currentCart].itemCollections[collectionIndex];if(itemIndex>collection.items.length-1)return;const oldItem=collection.items.splice(collection.currentItem,1)[0];collection.items.push(oldItem),collection.currentItem=itemIndex-1,state$7.carts[state$7.currentCart].itemCollections[collectionIndex]=collection,state$7.currentTotal=getCurrentCartTotal(),store$5.set(state$7)},checkout:(location2=emptyLocation,impactRadius,callbackFunction)=>{if(state$7.type===CartType.DEFAULT)return;if(state$7.type===CartType.LANDING_PAGE||state$7.type===CartType.QS_PARAMS){if(!state$7.checkoutUrl)return;const url2=state$7.type===CartType.LANDING_PAGE?state$7.checkoutUrl:(()=>{let url2=state$7.checkoutUrl;if(!state$7.qsParam&&url2)return url2;const params=state$7.carts[state$7.currentCart].itemCollections.filter((collection=>collection.isSelected)).map((collection=>collection.items[collection.currentItem].id));-1===(null==url2?void 0:url2.indexOf("?"))&&(url2+="?");const lastChar=null==url2?void 0:url2.charAt(url2.length-1);return`${url2}${"?"===lastChar||"&"===lastChar?"":"&"}${state$7.qsParam}=${params.join(",")}`})();return void window.open(url2,"_blank")}const selectedItems=getCurrentSelectedItems();if(0===selectedItems.length)return;if(state$7.retailer===RetailerPartnerType.NONE||!checkoutServices[state$7.retailer])return;const retailerServiceCheckout={selectedItems:selectedItems,location:location2,impactRadius:impactRadius,callbackFunction:callbackFunction};checkoutServices[state$7.retailer].checkout(retailerServiceCheckout)},getCurrentSelectedItems:getCurrentSelectedItems,isCurrentItemSelected:cartItemCollectionItemIndex=>{if(cartItemCollectionItemIndex>state$7.carts[state$7.currentCart].itemCollections.length-1)return!1;return state$7.carts[state$7.currentCart].itemCollections[cartItemCollectionItemIndex].isSelected}},imgEndpoint="https://cdn.polaris.me/img/",Chains=new Map([["bakers",{Name:"Baker's",ImageUrl:`${imgEndpoint}bakers-square-logo.png`,Url:"https://www.bakersplus.com",Preformatted:!0,GSId:76}],["citymarket",{Name:"City Market",ImageUrl:`${imgEndpoint}city-market-square-logo.png`,Url:"https://www.citymarket.com",Preformatted:!0,GSId:301}],["dillons",{Name:"Dillon Food Store",ImageUrl:`${imgEndpoint}dillons-square-logo.png`,Url:"https://www.dillons.com",Preformatted:!0,GSId:440}],["food4less",{Name:"Food 4 Less",ImageUrl:`${imgEndpoint}food-for-less-square-logo.png`,Url:"https://www.food4less.com",Preformatted:!0,GSId:573}],["foodsco",{Name:"Foods Co",ImageUrl:`${imgEndpoint}foodsco-square-logo.png`,Url:"https://www.foodsco.net",Preformatted:!0,GSId:629}],["fredmeyer",{Name:"Fred Meyer",ImageUrl:`${imgEndpoint}fred-meyer-square-logo.png`,Url:"https://www.fredmeyer.com",Preformatted:!0,GSId:650}],["frys",{Name:"Fry's Food & Drug Store",ImageUrl:`${imgEndpoint}frys-square-logo.png`,Url:"https://www.frysfood.com",Preformatted:!0,GSId:674}],["gerbes",{Name:"Gerbes",ImageUrl:`${imgEndpoint}gerbes-square-logo.png`,Url:"https://www.gerbes.com",Preformatted:!0,GSId:706}],["hart",{Name:"Harris Teeter",ImageUrl:"https://crud-cdn.polaris.me/assets/images/55dd2435-626d-492b-9165-07d22067ee59/300",Url:"https://www.harristeeter.com",Preformatted:!0,GSId:826}],["jayc",{Name:"Jay C Food Store",ImageUrl:`${imgEndpoint}jayc-food-store-square-logo.png`,Url:"https://www.jaycfoods.com",Preformatted:!0,GSId:964}],["kingsoopers",{Name:"King Soopers",ImageUrl:`${imgEndpoint}king-sooper-square-logo.png`,Url:"https://www.kingsoopers.com",Preformatted:!0,GSId:1044}],["kroger",{Name:"Kroger",ImageUrl:`${imgEndpoint}kroger-square-logo.png`,Url:"https://www.kroger.com",Preformatted:!0,GSId:1063}],["marianos",{Name:"Mariano's Fresh Market",ImageUrl:`${imgEndpoint}marianos-square-logo.png`,Url:"https://www.marianos.com",Preformatted:!0,GSId:1190}],["metromarket",{Name:"Metro Market",ImageUrl:`${imgEndpoint}metro-market-square-logo.png`,Url:"https://www.metromarket.net",Preformatted:!0,GSId:1265}],["payless",{Name:"Pay Less Super Market",ImageUrl:`${imgEndpoint}pay-less-super-markets-square-logo.png`,Url:"https://www.pay-less.com",Preformatted:!0,GSId:1426}],["picknsave",{Name:"Pick 'n Save",ImageUrl:`${imgEndpoint}pick-n-save-square-logo.png`,Url:"https://www.picknsave.com",Preformatted:!0,GSId:1447}],["qfc",{Name:"QFC",ImageUrl:`${imgEndpoint}qfc-square-logo.png`,Url:"https://www.qfc.com",Preformatted:!0,GSId:1560}],["ralphs",{Name:"Ralphs",ImageUrl:`${imgEndpoint}ralphs-square-logo.png`,Url:"https://www.ralphs.com",Preformatted:!0,GSId:1579}],["ruler",{Name:"Ruler Foods",ImageUrl:`${imgEndpoint}ruler-foods-square-logo.png`,Url:"https://rulerfoods.com",Preformatted:!0,GSId:4678}],["smiths",{Name:"Smith's Food & Drug Center",ImageUrl:`${imgEndpoint}smiths-square-logo.png`,Url:"https://www.smithsfoodanddrug.com",Preformatted:!0,GSId:1851}]]),getGSIdByChainShortName=chainShortName=>{let foundGSId;return Chains.forEach(((value,key)=>{key===chainShortName&&(foundGSId=value.GSId)})),foundGSId},getFormattedNameByKey=chainName=>{let name2="";return Chains.forEach(((chain,key)=>{key===chainName&&(name2=chain.Name)})),name2},normalizeAddress=(source,retailer)=>addresses[retailer]?convertObject(source,addresses[retailer]):source,retailerResponseParser_normalizeLocations=(source,retailer)=>{if(!locations[retailer])return source;return source.map((item=>{const location2=convertObject(item,locations[retailer]);return location2.address=normalizeAddress(location2.address,retailer),location2}))};let state$6={endpoint:"",retailerIntegration:RetailerPartnerType.NONE,currentLocation:void 0,locations:[],maxStoreLocations:10,requestedLocationObject:{city:"",state:"",stateShort:"",zip:""},productIntegrationsRetailerLocationsApiResponse:{}};const store$4=writable(state$6);let currentLocationIndex=0;const fetchLocations=async(max,zip,coordinates)=>{if(""===state$6.endpoint)throw new Error(`ERROR: no locations endpoint available for ${state$6.retailerIntegration}`);const url2=coordinates?`${state$6.endpoint}?lat=${coordinates.latitude}&lon=${coordinates.longitude}`:zip?`${state$6.endpoint}?zip=${zip}`:state$6.endpoint,limit=max||state$6.maxStoreLocations,options={body:JSON.stringify({limit:limit})},locationsResponse=await ajaxRequestor_post(url2,options,!0);state$6.productIntegrationsRetailerLocationsApiResponse=locationsResponse;const requestedLocationObject=locationsResponse.requestedLocation,locations2=retailerResponseParser_normalizeLocations(locationsResponse.locations,state$6.retailerIntegration),currentLocation=locations2.length>0?locations2[0]:void 0;state$6={...state$6,currentLocation:currentLocation,locations:locations2,requestedLocationObject:requestedLocationObject},store$4.set(state$6)},{set:set$2,subscribe:subscribe$2,update:update$1}=store$4,locationsStore={set:set$2,subscribe:subscribe$2,update:update$1,init:async(config2,fetchImmediatly=!0)=>{try{const endpoint=config2.endpoint?config2.endpoint:`${getApiHost()}${locationEndpoints[config2.retailerIntegration||RetailerPartnerType.NONE]}`;state$6={...state$6,...config2,endpoint:endpoint,currentLocation:state$6.locations.length>0?state$6.locations[0]:void 0},store$4.set(state$6),fetchImmediatly&&await fetchLocations()}catch(err){throw err}},fetchLocations:fetchLocations,getLocationsApiResponse:()=>state$6.productIntegrationsRetailerLocationsApiResponse,updateCurrentLocation:index=>{index!==currentLocationIndex&&(index>state$6.locations.length-1||(state$6.currentLocation=state$6.locations[index],currentLocationIndex=index,store$4.set(state$6)))}};let state$5={retailerIntegration:RetailerPartnerType.NONE,isBundle:!1,endpoint:"",collections:{}};const store$3=writable(state$5),fetchOffers=async payload=>{try{const options={body:JSON.stringify(payload)},response=await ajaxRequestor_post(state$5.endpoint,options,!0);return response.offers.map((offer=>offer))}catch(err){throw err}},{set:set$1,subscribe:subscribe$1,update:update}=store$3,offersStore={set:set$1,subscribe:subscribe$1,update:update,init:(config2,collectionsInit)=>{const offersEndpoint=config2.isBundle?offersBundleEndpoints:offersEndpoints,{retailerIntegration:retailerIntegration=RetailerPartnerType.NONE,endpoint:endpoint}=config2,finalEndpoint=endpoint??`${getApiHost()}${offersEndpoint[retailerIntegration]}`,collections=collectionsInit.reduce(((acc,item)=>({...acc,[item.id.toString()]:item.productIds.map((productId=>({productId:productId,offers:[]})))})),{});state$5={...state$5,...config2,endpoint:finalEndpoint,collections:collections},store$3.set(state$5)},fetchOffersForId:async(id,locationId,limit=5)=>{try{if(""===state$5.endpoint)throw new Error(`ERROR: no offers endpoint available for ${state$5.retailerIntegration}`);const collection=state$5.collections[id];if(!collection)throw new Error(`ERROR: no offers collection initialized for ${id}`);const payload={ingredientIds:collection.map((item=>item.productId)),limit:limit,locationId:locationId},offers=await fetchOffers(payload);state$5.collections[id]=collection.map((item=>(item.offers=offers.filter((offer=>{if(item.productId&&offer.ingredientId===item.productId.toString())return offer})),item))),store$3.set(state$5)}catch(err){throw err}},updateOffersCollectionsOffers:offers=>{state$5.collections.cart.map(((offerCollection,index)=>{const item=offers[index];if(offerCollection.offers.push({id:`${item.id}`,imageUrl:`${item.imageSourcesArray[0].url}`,ingredientId:`${item.ingredientId}`,ingredientName:`${item.name}`,name:`${item.subhead}`,price:`${item.price}`,productUrl:"",upc:`${item.id}`}),item.altProducts&&item.altProducts.length>0){item.altProducts.forEach((offer=>{const altOffer=offer;offerCollection.offers.push({id:`${altOffer.id}`,imageUrl:`${altOffer.imageUrl||altOffer.imageSourcesArray[0].url}`,ingredientId:`${altOffer.ingredientId}`,ingredientName:`${altOffer.name}`,name:`${altOffer.subhead}`,price:`${altOffer.price}`,productUrl:"",upc:`${altOffer.id}`})}))}}))}};let state$4={endpoint:"",gsIds:[],retailerLogos:[]};const store$2=writable(state$4),{set:set,subscribe:subscribe}=store$2,logosStore={set:set,subscribe:subscribe,init:async()=>{const endpoint=`${getApiHost()}${logosEndpoint}`;state$4={...state$4,endpoint:endpoint},store$2.set(state$4)},fetchRetailerLogo:async retailerName=>{try{const url2=`${getApiHost()}${logosEndpoint}`,options={body:JSON.stringify({gsIds:[defaultRetailerGroceryServerIdMap[retailerName]]})},retailerLogoResponse=await ajaxRequestor_post(url2,options,!0);state$4={...state$4,gsIds:[defaultRetailerGroceryServerIdMap[retailerName]],retailerLogos:retailerLogoResponse.retailers[0],currentLocationLogo:retailerLogoResponse.retailers[0]},store$2.set(state$4)}catch(error){throw error}},fetchRetailersLogos:async retailerIds=>{try{const url2=`${getApiHost()}${logosEndpoint}`,options={body:JSON.stringify({gsIds:retailerIds})},logosResponse=await ajaxRequestor_post(url2,options,!0);state$4={...state$4,gsIds:retailerIds,retailerLogos:logosResponse.retailers},store$2.set(state$4)}catch(error){throw error}}},_Timer=class _Timer{constructor(duration,handler,tick){__publicField(this,"duration",0),__publicField(this,"current",0),__publicField(this,"completedHandler"),__publicField(this,"tickHandler"),__publicField(this,"isActive",!1),__publicField(this,"isCompleted",!1),__publicField(this,"interval"),this.duration=duration,this.current=0,this.isActive=!1,this.isCompleted=!1,this.completedHandler=handler,tick&&(this.tickHandler=tick)}get Current(){return this.current}get Duration(){return this.duration}get IsActive(){return this.isActive}get IsCompleted(){return this.isCompleted}start(){if(this.isActive)return;this.isActive=!0;const self2=this;this.interval=setInterval((()=>this.update.call(self2)),_Timer.TICK)}pause(){this.isActive&&(this.isActive=!1,clearInterval(this.interval))}reset(){this.current=0}callTickHandler(){this.tickHandler&&this.tickHandler(this.current)}update(){this.current+=_Timer.TICK,this.callTickHandler(),this.current<this.duration||(clearInterval(this.interval),this.reset(),this.completedHandler())}};__publicField(_Timer,"TICK",1e3);let Timer=_Timer;class DeviceUtils{}__publicField(DeviceUtils,"getIsMobile",(()=>!!navigator.userAgent.toLowerCase().match(/iphone|ipad|android/i))),__publicField(DeviceUtils,"getIsEdgeOrIE11",(()=>!!navigator.userAgent.match(/(?:\b(MS)?IE\s+|\bTrident\/7\.0;.*\s+rv:|\bEdge\/)(\d+)/)));const _VideoUtils=class _VideoUtils{static filterPlayableFiles(files2){return void 0===_VideoUtils.testEl&&(_VideoUtils.testEl=document.createElement("video")),files2.filter((file=>{const meta=`video/${file.format}; codecs="${file.videoCodec}"`,isPlayable=_VideoUtils.testEl.canPlayType(meta);return"probably"===isPlayable||"maybe"===isPlayable}))}static sortFilesBySize(files2){return Array.from(files2).sort(((a,b)=>a.size-b.size))}static groupedByHeightAndFileSize(files2,isVASTAsset){const videoVariationsByHeight=new Map([["sm",[]],["md",[]],["lg",[]]]);if(!files2||0===files2.length)return videoVariationsByHeight;const playableFiles=isVASTAsset?files2:_VideoUtils.filterPlayableFiles(files2);for(const file of playableFiles){if(file.height<1)continue;const fileSizeContainerName=file.height>=720?"lg":file.height>=480?"md":"sm";videoVariationsByHeight.get(fileSizeContainerName).push(file)}return videoVariationsByHeight}static getSrcSet(height,variations,isVast){const groupedFilesByHeight=_VideoUtils.groupedByHeightAndFileSize(variations,isVast),large=groupedFilesByHeight.get("lg"),medium=groupedFilesByHeight.get("md"),small=groupedFilesByHeight.get("sm");return height>=600&&(null==large?void 0:large.length)>0?large:height>=420&&(null==medium?void 0:medium.length)>0?medium:small||[]}};__publicField(_VideoUtils,"testEl");let VideoUtils=_VideoUtils;const getApiHost=()=>{var _a;return window&&(null==window?void 0:window.config)&&(null==(_a=window.config)?void 0:_a.host)?window.config.host:"https://live.polaris.me"},getRetailerByEnum=retailer=>{switch(retailer){case"kroger":return MercuryRetailer.KROGER;case"walmart":return MercuryRetailer.WALMART;case"target":return MercuryRetailer.TARGET;default:return""}},flattenArrayByKey=(array,key)=>array.reduce(((acc,item)=>Array.isArray(item[key])?[...acc,...item[key]]:acc),[]),initScriptOrCss=(config2,type2)=>{const src=config2[type2];src&&addScriptToPage(src,"css"===type2?"style":"script")},addScriptToPage=(src,element2="script")=>{const script=document.createElement(element2);script.textContent=src,document.getElementsByTagName("head")[0].appendChild(script)};var ScreenItemComponentType=(ScreenItemComponentType2=>(ScreenItemComponentType2.IMAGE="image",ScreenItemComponentType2.MEDIA="Media",ScreenItemComponentType2.VIDEO="video",ScreenItemComponentType2.VIDEO_PLAYER_CONTROLS="VideoPlayerControls",ScreenItemComponentType2.CLICK_AREA="ClickArea",ScreenItemComponentType2.AUTO_CLOSE_TIMER="AutoCloseTimer",ScreenItemComponentType2.SHOPPING_CART="ShoppingCart",ScreenItemComponentType2.SKIP_COUNT_DOWN_CONTROL="SkipCountDownControl",ScreenItemComponentType2.CAROUSEL="Carousel",ScreenItemComponentType2.FLIPCARD="Flipcard",ScreenItemComponentType2.VIGNETTE="Vignette",ScreenItemComponentType2.PARALLAX_BACKGROUND="ParallaxBackground",ScreenItemComponentType2.TEXT="Text",ScreenItemComponentType2))(ScreenItemComponentType||{}),DisplayType=(DisplayType2=>(DisplayType2.GRID="grid",DisplayType2.PIXEL="pixel",DisplayType2.PERCENT="percent",DisplayType2))(DisplayType||{}),MixedUnitType=(MixedUnitType2=>(MixedUnitType2.PIXEL="px",MixedUnitType2.PERCENT="%",MixedUnitType2))(MixedUnitType||{});const EmptyDisplayConfig={columns:64,rows:36,displayType:DisplayType.GRID};var LayoutBehaviorType=(LayoutBehaviorType2=>(LayoutBehaviorType2.RESPONSIVE="responsive",LayoutBehaviorType2.FIXED="fixed",LayoutBehaviorType2))(LayoutBehaviorType||{});const offerToProduct=productOffer=>({id:productOffer.id,name:productOffer.ingredientName,subhead:productOffer.name,price:productOffer.price,imageSourcesArray:[{url:productOffer.imageUrl,density:1}],altProducts:[],ingredientId:productOffer.ingredientId,regularPrice:productOffer.regularPrice}),convertOffersToCartItemCollection=(offers,productId,heading="")=>{const items=offers.map((offer=>(offer=>convertObject(offer,{name:"ingredientName",description:"name"}))(offer)));return{productId:productId,items:items,currentItem:0,isSelected:!(!items.length||!items[0].id),heading:heading}},getFromSessionStorage=key=>{try{return JSON.parse(SessionStorage.getValue(key))}catch(error){return[]}},sessionStorage_getCartItems=()=>getFromSessionStorage("polCartItems");var EventTypes,EventTypes2,PolarisTelemetryEventTypes,PolarisTelemetryEventTypes2,PolarisTelemetryClickTypes,PolarisTelemetryClickTypes2;(EventTypes2=EventTypes||(EventTypes={})).BUTTON_CLICKED="buttonClicked",EventTypes2.IMPRESSION="cruImpression",EventTypes2.VIEWED="cruViewed",EventTypes2.ADD_TO_CART="confirmedAddToCart",EventTypes2.WIDGET_CLOSE="widget_close",(PolarisTelemetryEventTypes2=PolarisTelemetryEventTypes||(PolarisTelemetryEventTypes={})).IMPRESSION="impression",PolarisTelemetryEventTypes2.VIEWED="viewed",PolarisTelemetryEventTypes2.CLICKED="clicked",PolarisTelemetryEventTypes2.COMPONENT_VIEWED="componentViewed",(PolarisTelemetryClickTypes2=PolarisTelemetryClickTypes||(PolarisTelemetryClickTypes={})).CLICK="clickThru",PolarisTelemetryClickTypes2.EVENT="event",PolarisTelemetryClickTypes2.CAROUSEL="carouselInteraction";const envMap={dev:`${getApiHost()}${Api.POL_TRACKING}/v1/events`,qa:`${getApiHost()}${Api.POL_TRACKING}/v1/events`,staging:`${getApiHost()}${Api.POL_TRACKING}/v1/events`,prod:`${getApiHost()}${Api.POL_TRACKING}/v1/events`,"live.polaris.me":`${getApiHost()}${Api.POL_TRACKING}/v1/events`},_window$1=window||{location:{href:""}},environment=Object.keys(envMap).find((key=>_window$1.location.href.includes(key)))||"prod";let state$3={url:_window$1.location.href.includes("localhost")?envMap.dev:envMap[environment],type:"ajax",method:HttpMethod.POST,omitLogs:!1};const store$1=writable(state$3),reporter=new class{constructor(config2){__publicField(this,"config"),this.config={},this.updateConfig(config2)}updateConfig(config2){config2.baseParams=config2.baseParams?config2.baseParams:{},config2.baseParams.type=config2.baseParams.type?config2.baseParams.type:"MISSING: string value for telemetry 'type' in parent app",config2.baseParams.sessionId=`${config2.baseParams.sessionId?config2.baseParams.sessionId:getSessionId()}`,config2.baseParams.requestId=config2.baseParams.requestId?config2.baseParams.requestId:getRequestId(window),config2.baseParams.muid=config2.baseParams.muid?config2.baseParams.muid:getMuid(window),config2.baseParams.referer=config2.baseParams.referer?config2.baseParams.referer:new URLSearchParams(window.location.search).get("referer")??document.referrer,config2.baseParams.originReferer=config2.baseParams.originReferer?config2.baseParams.originReferer:getOriginReferer(),config2.baseParams.appVersion=config2.baseParams.appVersion?config2.baseParams.appVersion:"MISSING: string value for telemetry 'appVersion' in parent app",config2.baseParams.defaultShown=null===config2.baseParams.defaultShown||void 0===config2.baseParams.defaultShown||config2.baseParams.defaultShown,this.config=config2,this.config.url=this.initializeUrl(config2.url)}async sendReport(event){event.type&&this.sendThirdPartyReport(event.type);const mapped=this.getMappedParams(event);return this.config.method===HttpMethod.GET?this.sendGetReport(mapped):this.sendPostReport(mapped)}async sendPostReport(event){event=this.getMappedParams(event);const init2={method:HttpMethod.POST,body:JSON.stringify({...this.config.baseParams,...event})};await ajaxRequestor_post(this.config.url,init2)}async sendGetReport(event){try{const url2=this.getUrlWithQueryStringParams(event);return void(await ajaxRequestor_get(url2))}catch(err){throw err}}async sendThirdPartyReport(type2){try{if(!this.config.thirdPartyUrls||!this.config.thirdPartyUrls[type2])return;this.config.thirdPartyUrls[type2].forEach((url2=>{ajaxRequestor_get(url2)}))}catch(err){}}getUrlWithQueryStringParams(event){return this.config.baseParams?`${this.config.url}${this.objectToQueryString(this.config.baseParams)}&${this.objectToQueryString(event)}`:`${this.config.url}${this.objectToQueryString(event)}`}getMappedParams(event){if(!this.config.paramNameMap)return event;const mapConfig=this.config.paramNameMap.find((pnm=>pnm.type===event.type));if(!mapConfig)return event;const keys=Object.keys(mapConfig.paramMap),{length:length}=keys;let key;for(let i=0;i<length;i++)key=keys[i],Object.prototype.hasOwnProperty.call(event,key)&&(mapConfig.paramMap[key]=event[key],delete event[key]);return{...event,...mapConfig.staticParams}}objectToQueryString(source,parentKey){const keys=Object.keys(source),paramArray=[];for(let i=0,l=keys.length;i<l;i++)paramArray.push(this.getQueryParam(keys[i],source,parentKey));return paramArray.join("&")}getQueryParam(key,source,parentKey){const returnKey=parentKey?`${parentKey}[${key}]`:key;if(Array.isArray(source[key])){return source[key].map((val=>`${returnKey}[]=${val}`)).join("&")}if(source[key]&&"object"==typeof source[key]){const obj=source[key];return this.objectToQueryString(obj,key)}return`${returnKey}=${source[key].toString()}`}initializeUrl(url2){if(-1===url2.indexOf("?"))return`${url2}?`;const lastChar=url2.charAt(url2.length-1);return"&"===lastChar||"?"===lastChar?url2:`${url2}&`}}(state$3),trackingStore$1={subscribe:store$1.subscribe,set:store$1.set,updateReporter:updatedConfig=>{state$3={...state$3,...updatedConfig},store$1.set(state$3),reporter.updateConfig(state$3)},init:(config2,omitLogs=!1)=>{state$3={...state$3,...config2,omitLogs:omitLogs},store$1.set(state$3),!config2.baseParams||config2.baseParams&&config2.baseParams.defaultShown,reporter.updateConfig(state$3)},sendReport:async event=>{try{if(window.location.href.includes("localhost")&&!state$3.omitLogs)return;if(window.location.href.includes("localhost"))return;await reporter.sendReport(event)}catch(err){}},getBaseParams:()=>reporter.config.baseParams},triggerPolarisTelemetryViewedEvent=()=>{trackingStore$1.sendReport({type:PolarisTelemetryEventTypes.VIEWED})},triggerPolarisTelemetryComponentViewedEvent=products=>{var _a,_b,productsToSendInReport;trackingStore$1.sendReport({type:PolarisTelemetryEventTypes.COMPONENT_VIEWED,retailers:[{name:get_store_value(cartStore).retailer,chain:(null==(_a=get_store_value(cartStore).currentRetailer)?void 0:_a.chain)||"",locationId:(null==(_b=get_store_value(cartStore).currentRetailer)?void 0:_b.id)||"",products:(productsToSendInReport=products,0===productsToSendInReport.length?[]:productsToSendInReport.map((product=>({id:product.id?product.id:product.name,msrp:product.regularPrice,priceDisplayed:product.price,baseItemId:product.ingredientId,promotedProduct:!!product.promotedProduct&&product.promotedProduct,promotedId:product.promotedId?product.promotedId:""}))))}]})},_window=window||{config:{},creativeConfig:{}};let state$2=_window.config||_window.creativeConfig;const cart=writable(state$2);let activeProducts=[];const getIsDefaultShown=()=>{if(!state$2)return!0;const isCurrentRetailerWithAddress=!!(state$2&&state$2.currentRetailer&&state$2.currentRetailer.address),locationsFromAPIFetch=get_store_value(locationsStore).locations.length;if(!isCurrentRetailerWithAddress&&0===locationsFromAPIFetch)return!0;const isOffersStoreEmpty=get_store_value(offersStore).collections.cart&&get_store_value(offersStore).collections.cart.length&&get_store_value(offersStore).collections.cart.filter((collection=>collection.offers.length)).length>0;return!(state$2.activeProducts.length||!isOffersStoreEmpty)},setValue$1=(key,value)=>{state$2[key]=value,cart.set(state$2)},isPromotedProduct=offerProductId=>{if(!state$2.promotedProduct||state$2.promotedProduct&&0===state$2.promotedProduct.length)return!1;return!!state$2.promotedProduct.find((promo=>Number(promo.ingredientId)===offerProductId))},getPromotionId=offerProductId=>{var _a;return!state$2.promotedProduct||state$2.promotedProduct&&0===state$2.promotedProduct.length?"":(null==(_a=state$2.promotedProduct.find((p=>Number(p.ingredientId)===offerProductId)))?void 0:_a.promotionId)??""},fetchAPIData=async()=>{var _a,_b;try{setValue$1("currentScreen","main"),await getOffersData();const offersCollections=get_store_value(offersStore).collections.cart,defaultCartItems=state$2.sections?flattenArrayByKey(state$2.sections,"items"):state$2.items;if(0===state$2.displayedLocations.length)return activeProducts=defaultCartItems.map((i=>({id:"",name:i.name,subhead:i.defaultProductName,regularPrice:i.defaultProductPrice,price:i.defaultProductPrice,imageSourcesArray:[{url:`${i.defaultProductImageFileUrl}300`,density:1}],isDefault:!0,altProducts:[],ingredientId:i.baseIngredient.id.toString(),promotedProduct:!1,promotedId:"",isProductSwapEnabled:!1}))),setValue$1("activeProducts",activeProducts),void setValue$1("offersLoaded",!1);activeProducts=offersCollections.reduce(((allProducts,product,index)=>{if(!product.productId)return allProducts;if(0===product.offers.length){const defaultProduct=defaultCartItems.find((i=>i.baseIngredient.id===product.productId));return defaultProduct&&allProducts.push({id:"",name:defaultProduct.name,subhead:"lrs"===state$2.cartType?"Please check store for price and availability.":defaultProduct.defaultProductName,regularPrice:"lrs"===state$2.cartType?"":defaultProduct.defaultProductPrice,price:"lrs"===state$2.cartType?"":defaultProduct.defaultProductPrice,imageSourcesArray:[{url:`${"lrs"===state$2.cartType?defaultProduct.defaultProductImage:`${defaultProduct.defaultProductImageFileUrl}300`}`,density:1}],isDefault:!0,altProducts:[],ingredientId:`${defaultProduct.baseIngredient.id}`,promotedProduct:isPromotedProduct(product.productId),promotedId:`${getPromotionId(product.productId)}`,isProductSwapEnabled:!1}),allProducts}{const cartItems=state$2.sections?flattenArrayByKey(state$2.sections,"items"):state$2.items,firstOffer=product.offers[0],activeProduct={id:firstOffer.id??"",name:cartItems.filter((item=>firstOffer.ingredientId===`${item.baseIngredient.id}`))[0].name||firstOffer.ingredientName,subhead:firstOffer.name,regularPrice:firstOffer.regularPrice,price:firstOffer.price,imageSourcesArray:[{url:firstOffer.imageUrl,density:1}],altProducts:product.offers.slice(1).map(offerToProduct),ingredientId:firstOffer.ingredientId??"",promotedProduct:isPromotedProduct(product.productId),promotedId:`${getPromotionId(product.productId)}`,isProductSwapEnabled:cartItems[index].enableSwapping};return allProducts.push(activeProduct),allProducts}}),[]),setValue$1("activeProducts",activeProducts),trackingStore$1.updateReporter({baseParams:{...trackingStore$1.getBaseParams(),retailers:[{name:state$2.retailer,chain:(null==(_a=state$2.currentRetailer)?void 0:_a.chain)||"",locationId:(null==(_b=state$2.currentRetailer)?void 0:_b.id)||""}]}}),await updateCheckoutCart(),setValue$1("offersLoaded",!0)}catch(error){}},getLocationData=async(zipCode,isSourceZipcodeIntakeForm=!1)=>{try{const shouldFetchLocationsImmediately=!1,maxStoreLocations=state$2.maxStorePickerAddresses;if(await logosStore.init(),await locationsStore.init({locations:[],maxStoreLocations:maxStoreLocations,retailerIntegration:state$2.retailer},shouldFetchLocationsImmediately),await locationsStore.fetchLocations(maxStoreLocations,zipCode),isSourceZipcodeIntakeForm){if(0===get_store_value(locationsStore).locations.length)return void trackingStore$1.sendReport({type:PolarisTelemetryEventTypes.CLICKED,clicked:{clickType:PolarisTelemetryClickTypes.EVENT,clickValue:"updateZipCode",status:"noStoresWithOffersNearby"},retailers:[{...trackingStore$1.getBaseParams().retailers[0],locationId:""}]});(()=>{const displayLocations=get_store_value(locationsStore).locations;trackingStore$1.sendReport({type:PolarisTelemetryEventTypes.CLICKED,clicked:{clickType:PolarisTelemetryClickTypes.EVENT,clickValue:"updateZipCode",status:"successful"},retailers:displayLocations.map((displayedLocation=>({name:get_store_value(cartStore).retailer,chain:displayedLocation.chain||"",locationId:displayedLocation.id||""})))})})()}}catch(error){isSourceZipcodeIntakeForm&&trackingStore$1.sendReport({type:PolarisTelemetryEventTypes.CLICKED,clicked:{clickType:PolarisTelemetryClickTypes.EVENT,clickValue:"updateZipCode",status:"invalidZipCode"},retailers:[{...trackingStore$1.getBaseParams().retailers[0],locationId:""}]})}finally{setValue$1("currentZip",get_store_value(locationsStore).requestedLocationObject.zip);const storeLocations=get_store_value(locationsStore).locations||[];if(setDisplayedLocations(storeLocations),0===storeLocations.length&&setValue$1("isInitialLocationsFetchCompleted",!0),!state$2.isInitialLocationsFetchCompleted){const currentRetailerLocation=state$2.currentRetailer&&"kroger"===state$2.retailer?storeLocations.find((location2=>{var _a;return location2.id===(null==(_a=state$2.currentRetailer)?void 0:_a.id)})):storeLocations[0];setValue$1("activeLocationId",(null==currentRetailerLocation?void 0:currentRetailerLocation.id)??""),setValue$1("currentRetailer",currentRetailerLocation??null),setValue$1("isInitialLocationsFetchCompleted",!0)}}},setupOffersStore=async()=>{initOffersStore(),offersStore.updateOffersCollectionsOffers(activeProducts),await updateCheckoutCart(),setValue$1("offersLoaded",!0)},initOffersStore=async()=>{try{const retailerIntegration=state$2.retailer,collectionsInit=[],activeProductIds=[];(state$2.sections?flattenArrayByKey(state$2.sections,"items"):state$2.items).forEach((item=>{activeProductIds.push(item.baseIngredient.id)})),collectionsInit.push({id:"cart",productIds:activeProductIds}),await offersStore.init({retailerIntegration:retailerIntegration},collectionsInit)}catch(error){}},getOffersData=async()=>{var _a;try{initOffersStore(),await offersStore.fetchOffersForId("cart",null==(_a=state$2.currentRetailer)?void 0:_a.id)}catch(error){}},setDisplayedLocations=locationsToSet=>{setValue$1("displayedLocations",locationsToSet)},updateCheckoutCart=async()=>{const cardItems=get_store_value(offersStore).collections.cart.map((cardOffer=>convertOffersToCartItemCollection(cardOffer.offers,`${cardOffer.productId}`)));cardItems.map((item=>{isPromotedProduct(Number(item.productId))&&(item.isSelected=!1)})),cartCheckoutStore.setValue("carts",[{id:"cart",itemCollections:[...cardItems]}])},getImpactRadius=()=>{var _a;return state$2.impactRadius?state$2.impactRadius:"kroger"!==state$2.retailer?{subId1:`${(null==(_a=getRetailerByEnum(state$2.retailer))?void 0:_a.toUpperCase())||""}`,subId2:`${state$2.cartName||""}`,subId3:`${getSessionId()||""}`}:void 0},toggleKrogerGoToCartVisibility=()=>{setValue$1("isKrogerGoToCartVisible",!state$2.isKrogerGoToCartVisible)},setFooterLogo=async newRetailer=>{let retailerId;if(newRetailer)retailerId=getGSIdByChainShortName(newRetailer);else{const getKrogerChain=()=>state$2.displayedLocations.length&&state$2.displayedLocations[0].chain?getGSIdByChainShortName(state$2.displayedLocations[0].chain):defaultRetailerGroceryServerIdMap.kroger;retailerId=state$2.retailer===RetailerPartnerType.KROGER?getKrogerChain():defaultRetailerGroceryServerIdMap[state$2.retailer]}await logosStore.fetchRetailersLogos([retailerId]);const currentLocationLogo=get_store_value(logosStore).retailerLogos[0];setValue$1("retailerLogo",currentLocationLogo),setValue$1("footerLogo",currentLocationLogo.squareUrl??"");const footerLogoOverride=state$2.footerLogoFileUrl;footerLogoOverride&&footerLogoOverride.length&&setValue$1("footerLogo",`${footerLogoOverride}300`)};cart.set({...state$2,activeProducts:activeProducts,currentRetailer:null,isInitialLocationsFetchCompleted:!1,offersLoaded:!1,currentScreen:"main",displayedLocations:[],currentZip:"",activeLocationId:"",isKrogerGoToCartVisible:!1,isCartFetchingData:!1});const cartStore={subscribe:cart.subscribe,set:cart.set,setValue:setValue$1,fetchAPIData:fetchAPIData,getLocationData:getLocationData,getAddressItems:locations2=>{const addressItems=[];for(let i=0;i<locations2.length;i++){const location2=locations2[i];addressItems.push(location2.address)}return addressItems},getSelectedCartitems:()=>cartCheckoutStore.getCurrentSelectedItems(),formatRetailerName:()=>{if(state$2){if(state$2.retailer===RetailerPartnerType.KROGER&&state$2.currentRetailer&&state$2.currentRetailer.chain)return getFormattedNameByKey(state$2.currentRetailer.chain);if(state$2.retailer===RetailerPartnerType.WALMART||state$2.retailer===RetailerPartnerType.TARGET){const retailer=state$2.retailer;return retailer[0].toUpperCase()+retailer.slice(1).toLowerCase()}}},formatRetailerStoreLocationAndId:retailerAddressObject=>{if(state$2)return state$2.retailer===RetailerPartnerType.KROGER?`${getFormattedNameByKey(retailerAddressObject.chain)} #${retailerAddressObject.id}`:state$2.retailer===RetailerPartnerType.WALMART||state$2.retailer===RetailerPartnerType.TARGET?`${state$2.retailer} #${retailerAddressObject.id}`:void 0},checkoutCart:async()=>{cartCheckoutStore.checkout(state$2.currentRetailer,getImpactRadius(),toggleKrogerGoToCartVisibility)},initialize:async config2=>{if(config2)return state$2=config2,activeProducts=state$2.activeProducts,setValue$1("activeProducts",activeProducts),await cartCheckoutStore.init({checkoutUrl:state$2.defaultFooterBtnUrl,type:CartType.INTEGRATED_RETAILER,retailer:state$2.retailer,currentCart:0}),await setupOffersStore(),setValue$1("isInitialLocationsFetchCompleted",!0),void setValue$1("isCartFetchingData",!1)},initializeCartStore:async cartType=>{if(setValue$1("isCartFetchingData",!0),setValue$1("cartType",cartType),"persistent"===cartType){const sessionCartItems=sessionStorage_getCartItems()||[];state$2.items=sessionCartItems.length?sessionCartItems:state$2.items}const zipCodeParam=getQueryStringParamValue("zip")||getQueryStringParamValue("zipcode")||getQueryStringParamValue("zipCode");await getLocationData(zipCodeParam),await setFooterLogo(),await fetchAPIData(),await cartCheckoutStore.init({checkoutUrl:state$2.defaultFooterBtnUrl,type:CartType.INTEGRATED_RETAILER,retailer:state$2.retailer,currentCart:0}),setValue$1("isCartFetchingData",!1)},initializeLRSCartStore:async(config2={})=>{state$2=config2,setValue$1("cartType","lrs"),await getLocationData(config2.currentZip);const currentLocationLogo=state$2.retailerLogo;currentLocationLogo&&setValue$1("footerLogo",currentLocationLogo.squareUrl??""),await cartCheckoutStore.init({checkoutUrl:state$2.defaultFooterBtnUrl,type:CartType.INTEGRATED_RETAILER,retailer:state$2.retailer,currentCart:0}),await fetchAPIData(),setValue$1("isCartFetchingData",!1)},isCurrentItemSelected:index=>cartCheckoutStore.isCurrentItemSelected(index),updateSelectedCartItems:cartItemIndex=>{cartCheckoutStore.toggleIsItemSelected(cartItemIndex)},updateSwappedCartItem:(productId,productIndex)=>{cartCheckoutStore.changeItemForProduct(productId,productIndex)},setDisplayedLocations:setDisplayedLocations,toggleKrogerGoToCartVisibility:toggleKrogerGoToCartVisibility,updateSelectedStore:async newStore=>{var _a,_b,_c,newTrackingParameter;setValue$1("isCartFetchingData",!0),state$2.retailer===RetailerPartnerType.KROGER&&(null==(_a=state$2.currentRetailer)?void 0:_a.chain)!==newStore.chain&&(await setFooterLogo(newStore.chain),"lrs"===state$2.cartType&&setValue$1("defaultFooterBtnUrl",`${(null==(_b=Chains.get(`${newStore.chain}`))?void 0:_b.Url)||"https://www.kroger.com"}`)),setValue$1("currentRetailer",newStore),await fetchAPIData(),(null==(_c=trackingStore$1.getBaseParams())?void 0:_c.defaultShown)!==getIsDefaultShown()&&await(newTrackingParameter={defaultShown:getIsDefaultShown()},void trackingStore$1.updateReporter({baseParams:{...trackingStore$1.getBaseParams(),...newTrackingParameter}})),triggerPolarisTelemetryComponentViewedEvent(state$2.activeProducts),setValue$1("isCartFetchingData",!1)},initPolarisTelemetry:async(cartLayout,sharedPackageVersion)=>{var _a,_b;const updatedReporterConfig={baseParams:{defaultShown:getIsDefaultShown(),gamLineItemId:window.top!==window.self&&state$2.telemetryData?state$2.telemetryData.gamLineItemId||"":getGamLineItemId(window),gamCreativeId:window.top!==window.self&&state$2.telemetryData?state$2.telemetryData.gamCreativeId||"":getGamCreativeId(window),documentId:window.top!==window.self&&state$2.telemetryData?state$2.telemetryData.documentId||"":`${getDocumentId()}`,stax:window.top!==window.self&&state$2.telemetryData?state$2.telemetryData.stax||"":getSTax(window),sessionId:window.top!==window.self&&state$2.telemetryData?state$2.telemetryData.sessionId||"":getSessionId(),requestId:window.top!==window.self&&state$2.telemetryData?state$2.telemetryData.requestId||"":getRequestId(window),muid:window.top!==window.self&&state$2.telemetryData?state$2.telemetryData.muid||"":getMuid(window),originReferer:window.top!==window.self&&state$2.telemetryData?state$2.telemetryData.originReferer||"":getOriginReferer(),appVersion:`v${sharedPackageVersion}`,retailers:[{name:state$2.retailer,chain:(null==(_a=state$2.currentRetailer)?void 0:_a.chain)||"",locationId:(null==(_b=state$2.currentRetailer)?void 0:_b.id)||""}]}};if("lrs"!==cartLayout){const assetObject={id:(layout=cartLayout,"standalone"===layout&&state$2.uuid?state$2.uuid:"persistentCart"===layout?"persistentCart":"Error: This should not show up in telemetry event"),type:"cart",layout:window.top!==window.self&&state$2.telemetryData?state$2.telemetryData.cartLayout||"":cartLayout};updatedReporterConfig.baseParams.asset=assetObject}var layout;"lrs"===cartLayout&&(updatedReporterConfig.baseParams.utility="lrs"),await trackingStore$1.init(updatedReporterConfig),await void trackingStore$1.sendReport({type:PolarisTelemetryEventTypes.IMPRESSION}),await(({targetId:targetId="app",onViewed:onViewed})=>{const defaultTarget=document.getElementsByTagName("body")[0],targetRenderDiv=document.getElementById(targetId)??defaultTarget;targetRenderDiv instanceof Element&&new IntersectionObserver(((entries,observer)=>{var _a;(null==(_a=entries[0])?void 0:_a.intersectionRatio)&&(onViewed(),observer.disconnect())})).observe(targetRenderDiv)})({targetId:"app",onViewed:triggerPolarisTelemetryViewedEvent}),await triggerPolarisTelemetryComponentViewedEvent(state$2.activeProducts)},getIsDefaultShown:getIsDefaultShown,handlePostMessageToCart:event=>{"prxPostMsgCartData"===event.data.name&&"prxPostMsgCartData"===event.data.name&&setValue$1("telemetryData",{...event.data.cartData})},locationsStore:locationsStore};Api.PREDICTIVE;let state$1={endpoint:"",initialized:!1};const store=writable(state$1);var Site,Site2;function create_else_block$2(ctx){let current;const default_slot_template=ctx[12].default,default_slot=create_slot(default_slot_template,ctx,ctx[11],null);return{c(){default_slot&&default_slot.c()},m(target,anchor){default_slot&&default_slot.m(target,anchor),current=!0},p(ctx2,dirty){default_slot&&default_slot.p&&(!current||2048&dirty)&&update_slot_base(default_slot,default_slot_template,ctx2,ctx2[11],current?get_slot_changes(default_slot_template,ctx2[11],dirty,null):get_all_dirty_from_scope(ctx2[11]),null)},i(local){current||(transition_in(default_slot,local),current=!0)},o(local){transition_out(default_slot,local),current=!1},d(detaching){default_slot&&default_slot.d(detaching)}}}function create_if_block$a(ctx){let svg,path;return{c(){svg=svg_element("svg"),path=svg_element("path"),attr(path,"fill-rule","evenodd"),attr(path,"clip-rule","evenodd"),attr(path,"d","M12.6835 2.35L10.3335 0L0.333496 10L10.3335 20L12.6835 17.65L5.05016 10L12.6835 2.35Z"),attr(path,"fill",ctx[3]),attr(path,"stroke",ctx[4]),attr(path,"fill-opacity",ctx[2]),attr(path,"stroke-opacity",ctx[5]),attr(svg,"width",ctx[0]),attr(svg,"height",ctx[1]),attr(svg,"viewBox","0 0 13 20"),attr(svg,"class","svelte-11ck081")},m(target,anchor){insert(target,svg,anchor),append(svg,path)},p(ctx2,dirty){8&dirty&&attr(path,"fill",ctx2[3]),16&dirty&&attr(path,"stroke",ctx2[4]),4&dirty&&attr(path,"fill-opacity",ctx2[2]),32&dirty&&attr(path,"stroke-opacity",ctx2[5]),1&dirty&&attr(svg,"width",ctx2[0]),2&dirty&&attr(svg,"height",ctx2[1])},i:noop,o:noop,d(detaching){detaching&&detach(svg)}}}function create_fragment$o(ctx){let button,current_block_type_index,if_block,button_class_value,current,mounted,dispose;const if_block_creators=[create_if_block$a,create_else_block$2],if_blocks=[];function select_block_type(ctx2,dirty){return ctx2[9]?1:0}return current_block_type_index=select_block_type(ctx),if_block=if_blocks[current_block_type_index]=if_block_creators[current_block_type_index](ctx),{c(){button=element("button"),if_block.c(),attr(button,"class",button_class_value=null_to_empty(`navigation-arrow navigation-arrow--${ctx[7]} ${ctx[6]} ${ctx[9]?"navigation-arrow--custom":""}`)+" svelte-11ck081"),attr(button,"style",ctx[10])},m(target,anchor){insert(target,button,anchor),if_blocks[current_block_type_index].m(button,null),current=!0,mounted||(dispose=listen(button,"click",(function(){is_function(ctx[8])&&ctx[8].apply(this,arguments)})),mounted=!0)},p(new_ctx,[dirty]){let previous_block_index=current_block_type_index;current_block_type_index=select_block_type(ctx=new_ctx),current_block_type_index===previous_block_index?if_blocks[current_block_type_index].p(ctx,dirty):(group_outros(),transition_out(if_blocks[previous_block_index],1,1,(()=>{if_blocks[previous_block_index]=null})),check_outros(),if_block=if_blocks[current_block_type_index],if_block?if_block.p(ctx,dirty):(if_block=if_blocks[current_block_type_index]=if_block_creators[current_block_type_index](ctx),if_block.c()),transition_in(if_block,1),if_block.m(button,null)),(!current||704&dirty&&button_class_value!==(button_class_value=null_to_empty(`navigation-arrow navigation-arrow--${ctx[7]} ${ctx[6]} ${ctx[9]?"navigation-arrow--custom":""}`)+" svelte-11ck081"))&&attr(button,"class",button_class_value),(!current||1024&dirty)&&attr(button,"style",ctx[10])},i(local){current||(transition_in(if_block),current=!0)},o(local){transition_out(if_block),current=!1},d(detaching){detaching&&detach(button),if_blocks[current_block_type_index].d(),mounted=!1,dispose()}}}function instance$o($$self,$$props,$$invalidate){let{$$slots:slots={},$$scope:$$scope}=$$props,{width:width=20}=$$props,{height:height=20}=$$props,{fillOpacity:fillOpacity=1}=$$props,{fillColor:fillColor="#000"}=$$props,{strokeColor:strokeColor="none"}=$$props,{strokeOpacity:strokeOpacity=1}=$$props,{navArrowClassNames:navArrowClassNames=""}=$$props,{direction:direction="left"}=$$props,{navArrowClickHandler:navArrowClickHandler}=$$props,{customArrow:customArrow=!1}=$$props,{style:style=""}=$$props;return $$self.$$set=$$props2=>{"width"in $$props2&&$$invalidate(0,width=$$props2.width),"height"in $$props2&&$$invalidate(1,height=$$props2.height),"fillOpacity"in $$props2&&$$invalidate(2,fillOpacity=$$props2.fillOpacity),"fillColor"in $$props2&&$$invalidate(3,fillColor=$$props2.fillColor),"strokeColor"in $$props2&&$$invalidate(4,strokeColor=$$props2.strokeColor),"strokeOpacity"in $$props2&&$$invalidate(5,strokeOpacity=$$props2.strokeOpacity),"navArrowClassNames"in $$props2&&$$invalidate(6,navArrowClassNames=$$props2.navArrowClassNames),"direction"in $$props2&&$$invalidate(7,direction=$$props2.direction),"navArrowClickHandler"in $$props2&&$$invalidate(8,navArrowClickHandler=$$props2.navArrowClickHandler),"customArrow"in $$props2&&$$invalidate(9,customArrow=$$props2.customArrow),"style"in $$props2&&$$invalidate(10,style=$$props2.style),"$$scope"in $$props2&&$$invalidate(11,$$scope=$$props2.$$scope)},[width,height,fillOpacity,fillColor,strokeColor,strokeOpacity,navArrowClassNames,direction,navArrowClickHandler,customArrow,style,$$scope,slots]}store.subscribe,store.set,store.update,Api.SHOPPER_GAM,(Site2=Site||(Site={})).ALLRECIPES="allrecipes",Site2.BETTER_HOMES_GARDENS="bhg",Site2.EATING_WELL="eatingwell",Site2.FOOD_AND_WINE="foodandwine",Site2.HEALTH="health",Site2.MARTHA_LIVING="marthastewart",Site2.MIDWEST_LIVING="midwestliving",Site2.MYRECIPES="myrecipes",Site2.PEOPLE_ESP="peopleenespanol",Site2.PARENTS="parents",Site2.RACHAEL_RAY_MAG="rachaelraymag",Site2.REAL_SIMPLE="realsimple",Site2.SOUTHERN_LIVING="southernliving",Site2.SHAPE="shape",Site2.LOCAL="local",Site.ALLRECIPES,DeviceType.DESKTOP,DeviceType.MOBILE,DeviceType.TABLET,Site.BETTER_HOMES_GARDENS,DeviceType.DESKTOP,DeviceType.MOBILE,DeviceType.TABLET,Site.EATING_WELL,DeviceType.DESKTOP,DeviceType.MOBILE,DeviceType.TABLET,Site.FOOD_AND_WINE,DeviceType.DESKTOP,DeviceType.MOBILE,DeviceType.TABLET,Site.HEALTH,DeviceType.DESKTOP,DeviceType.MOBILE,DeviceType.TABLET,Site.MARTHA_LIVING,DeviceType.DESKTOP,DeviceType.MOBILE,DeviceType.TABLET,Site.MIDWEST_LIVING,DeviceType.DESKTOP,DeviceType.MOBILE,DeviceType.TABLET,Site.MYRECIPES,DeviceType.DESKTOP,DeviceType.MOBILE,DeviceType.TABLET,Site.PEOPLE_ESP,DeviceType.DESKTOP,DeviceType.MOBILE,DeviceType.TABLET,Site.PARENTS,DeviceType.DESKTOP,DeviceType.MOBILE,DeviceType.TABLET,Site.RACHAEL_RAY_MAG,DeviceType.DESKTOP,DeviceType.MOBILE,DeviceType.TABLET,Site.REAL_SIMPLE,DeviceType.DESKTOP,DeviceType.MOBILE,DeviceType.TABLET,Site.SOUTHERN_LIVING,DeviceType.DESKTOP,DeviceType.MOBILE,DeviceType.TABLET,Site.SHAPE,DeviceType.DESKTOP,DeviceType.MOBILE,DeviceType.TABLET,Site.LOCAL,DeviceType.DESKTOP,DeviceType.MOBILE,DeviceType.TABLET;class NavigationArrow extends SvelteComponent{constructor(options){super(),init$6(this,options,instance$o,create_fragment$o,safe_not_equal,{width:0,height:1,fillOpacity:2,fillColor:3,strokeColor:4,strokeOpacity:5,navArrowClassNames:6,direction:7,navArrowClickHandler:8,customArrow:9,style:10})}}function create_if_block$9(ctx){let source,source_srcset_value;return{c(){source=element("source"),function(element_srcset,srcset){const element_urls=split_srcset(element_srcset.srcset),urls=split_srcset(srcset||"");return urls.length===element_urls.length&&urls.every((([url2,width],i)=>width===element_urls[i][1]&&(src_url_equal(element_urls[i][0],url2)||src_url_equal(url2,element_urls[i][0]))))}(source,source_srcset_value=ctx[7])||attr(source,"srcset",source_srcset_value)},m(target,anchor){insert(target,source,anchor)},p(ctx2,dirty){128&dirty&&source_srcset_value!==(source_srcset_value=ctx2[7])&&attr(source,"srcset",source_srcset_value)},d(detaching){detaching&&detach(source)}}}function create_fragment$n(ctx){let picture,t,img,img_src_value,picture_class_value,if_block=!ctx[8]&&create_if_block$9(ctx);return{c(){picture=element("picture"),if_block&&if_block.c(),t=space(),img=element("img"),src_url_equal(img.src,img_src_value=ctx[6])||attr(img,"src",img_src_value),attr(img,"width",ctx[2]),attr(img,"height",ctx[3]),attr(img,"alt",ctx[0]),attr(img,"class","svelte-zxroca"),attr(picture,"title",ctx[1]),attr(picture,"class",picture_class_value=null_to_empty(`image ${ctx[5]}`)+" svelte-zxroca"),attr(picture,"style",ctx[4])},m(target,anchor){insert(target,picture,anchor),if_block&&if_block.m(picture,null),append(picture,t),append(picture,img)},p(ctx2,[dirty]){ctx2[8]?if_block&&(if_block.d(1),if_block=null):if_block?if_block.p(ctx2,dirty):(if_block=create_if_block$9(ctx2),if_block.c(),if_block.m(picture,t)),64&dirty&&!src_url_equal(img.src,img_src_value=ctx2[6])&&attr(img,"src",img_src_value),4&dirty&&attr(img,"width",ctx2[2]),8&dirty&&attr(img,"height",ctx2[3]),1&dirty&&attr(img,"alt",ctx2[0]),2&dirty&&attr(picture,"title",ctx2[1]),32&dirty&&picture_class_value!==(picture_class_value=null_to_empty(`image ${ctx2[5]}`)+" svelte-zxroca")&&attr(picture,"class",picture_class_value),16&dirty&&attr(picture,"style",ctx2[4])},i:noop,o:noop,d(detaching){detaching&&detach(picture),if_block&&if_block.d()}}}function instance$n($$self,$$props,$$invalidate){let firstImageSource,imageSources,hasSingleSource,{altText:altText=""}=$$props,{title:title=""}=$$props,{imageSourcesArray:imageSourcesArray=[]}=$$props,{width:width}=$$props,{height:height}=$$props,{styles:styles=""}=$$props,{class:classNames=""}=$$props;return $$self.$$set=$$props2=>{"altText"in $$props2&&$$invalidate(0,altText=$$props2.altText),"title"in $$props2&&$$invalidate(1,title=$$props2.title),"imageSourcesArray"in $$props2&&$$invalidate(9,imageSourcesArray=$$props2.imageSourcesArray),"width"in $$props2&&$$invalidate(2,width=$$props2.width),"height"in $$props2&&$$invalidate(3,height=$$props2.height),"styles"in $$props2&&$$invalidate(4,styles=$$props2.styles),"class"in $$props2&&$$invalidate(5,classNames=$$props2.class)},$$self.$$.update=()=>{var _a;512&$$self.$$.dirty&&($$invalidate(6,firstImageSource=(null==(_a=null==imageSourcesArray?void 0:imageSourcesArray[0])?void 0:_a.url)??""),$$invalidate(7,imageSources=imageSourcesArray.map((({url:url2,density:density})=>`${url2} ${density}x`)).join(", ")),$$invalidate(8,hasSingleSource=1===imageSourcesArray.length))},[altText,title,width,height,styles,classNames,firstImageSource,imageSources,hasSingleSource,imageSourcesArray]}let Image$1=class extends SvelteComponent{constructor(options){super(),init$6(this,options,instance$n,create_fragment$n,safe_not_equal,{altText:0,title:1,imageSourcesArray:9,width:2,height:3,styles:4,class:5})}};function create_fragment$m(ctx){let div2,div1,div0,div0_class_value,div2_class_value,current,mounted,dispose;const default_slot_template=ctx[34].default,default_slot=create_slot(default_slot_template,ctx,ctx[33],null);return{c(){div2=element("div"),div1=element("div"),div0=element("div"),default_slot&&default_slot.c(),attr(div0,"class",div0_class_value="carousel__slides "+(ctx[9]?ctx[2]:"")+" "+10*Math.random()+" svelte-njbbdg"),set_style(div0,"--transitionTime",ctx[10]+"s"),attr(div1,"class","carousel-container svelte-njbbdg"),attr(div2,"class",div2_class_value="carousel "+ctx[5]+" svelte-njbbdg"),set_style(div2,"--slideSize",ctx[1]+"px"),set_style(div2,"--carouselWidth",ctx[4]+"px"),set_style(div2,"--slidePadding",ctx[6]+"px"),set_style(div2,"--visibleSlides",ctx[0]),set_style(div2,"--backgroundColor",ctx[3]),set_style(div2,"--leftPos",-ctx[8]+"px")},m(target,anchor){insert(target,div2,anchor),append(div2,div1),append(div1,div0),default_slot&&default_slot.m(div0,null),ctx[35](div0),current=!0,mounted||(dispose=[listen(div0,"touchstart",ctx[11]),listen(div0,"touchmove",ctx[13]),listen(div0,"mousedown",prevent_default(ctx[12])),listen(div0,"mousemove",ctx[14]),listen(div0,"mouseup",ctx[15]),listen(div0,"touchend",ctx[15]),listen(div2,"click",ctx[16])],mounted=!0)},p(ctx2,dirty){default_slot&&default_slot.p&&(!current||4&dirty[1])&&update_slot_base(default_slot,default_slot_template,ctx2,ctx2[33],current?get_slot_changes(default_slot_template,ctx2[33],dirty,null):get_all_dirty_from_scope(ctx2[33]),null),(!current||516&dirty[0]&&div0_class_value!==(div0_class_value="carousel__slides "+(ctx2[9]?ctx2[2]:"")+" "+10*Math.random()+" svelte-njbbdg"))&&attr(div0,"class",div0_class_value),(!current||32&dirty[0]&&div2_class_value!==(div2_class_value="carousel "+ctx2[5]+" svelte-njbbdg"))&&attr(div2,"class",div2_class_value),(!current||2&dirty[0])&&set_style(div2,"--slideSize",ctx2[1]+"px"),(!current||16&dirty[0])&&set_style(div2,"--carouselWidth",ctx2[4]+"px"),(!current||64&dirty[0])&&set_style(div2,"--slidePadding",ctx2[6]+"px");const style_changed=82&dirty[0];(83&dirty[0]||style_changed)&&set_style(div2,"--visibleSlides",ctx2[0]),(90&dirty[0]||style_changed)&&set_style(div2,"--backgroundColor",ctx2[3]),(338&dirty[0]||style_changed)&&set_style(div2,"--leftPos",-ctx2[8]+"px")},i(local){current||(transition_in(default_slot,local),current=!0)},o(local){transition_out(default_slot,local),current=!1},d(detaching){detaching&&detach(div2),default_slot&&default_slot.d(detaching),ctx[35](null),mounted=!1,run_all(dispose)}}}function instance$m($$self,$$props,$$invalidate){let transitioning,dragDistance,{$$slots:slots={},$$scope:$$scope}=$$props,{animationStyle:animationStyle="slide"}=$$props,{autoPlayDelay:autoPlayDelay=2e3}=$$props,{backgroundColor:backgroundColor="transparent"}=$$props,{carouselAutoPlayLoopLimit:carouselAutoPlayLoopLimit=0}=$$props,{carouselWidth:carouselWidth=300}=$$props,{classNames:classNames=""}=$$props,{enableDesktopSwipe:enableDesktopSwipe=!0}=$$props,{enableMobileSwipe:enableMobileSwipe=!0}=$$props,{isAutoPlayEnabled:isAutoPlayEnabled=!1}=$$props,{slideAlignment:slideAlignment="left"}=$$props,{slidePadding:slidePadding=5}=$$props,{slideWidthPercentage:slideWidthPercentage=0}=$$props,{transitionTime:transitionTime=500}=$$props,{visibleSlides:visibleSlides=3}=$$props,{slideSize:slideSize=carouselWidth/visibleSlides}=$$props,{startingCarouselSlideIndex:startingCarouselSlideIndex=0}=$$props,{autoSlideDirection:autoSlideDirection="right"}=$$props;const dispatch=createEventDispatcher();let slidesContainer,slides,numberOfCarouselSlides,animationInterval,posInitial=-slideSize,currentSlideIndex=0,allowTransition=!0,transitionTimeInSeconds=.001*transitionTime,dragStartPos=0,dragEndPos=0,startPos=0,centerOffset=0,leftBuffer=0,animationLoopCounter=1;function emitIndexChange(){let index=function(index){return index<0?index=numberOfCarouselSlides+index:index>=numberOfCarouselSlides&&(index-=numberOfCarouselSlides),index}(currentSlideIndex);const renderedSlides=slidesContainer.children;for(let loopIndex=0;loopIndex<renderedSlides.length;loopIndex++)renderedSlides[loopIndex].classList.remove("carousel__slide--active"),currentSlideIndex!==index?(renderedSlides[index+visibleSlides].classList.add("carousel__slide--active"),renderedSlides[currentSlideIndex+visibleSlides].classList.add("carousel__slide--active")):renderedSlides[currentSlideIndex+visibleSlides].classList.add("carousel__slide--active");dispatch("carouselIndexChange",{currentActiveIndex:index})}function cloneSlides(){let lastSlideClones=function(){let lastSlideClones=[];for(let i=numberOfCarouselSlides-visibleSlides;i<numberOfCarouselSlides;i++){let nodeClone=slides[i].cloneNode(!0);nodeClone.classList.add("cloned"),lastSlideClones.push(nodeClone)}return lastSlideClones}(),firstSlideClones=function(){let firstSlideClones=[];for(let i=0;i<visibleSlides;i++){let nodeClone=slides[i].cloneNode(!0);nodeClone.classList.add("cloned"),firstSlideClones.push(nodeClone)}return firstSlideClones}();visibleSlides<=slides.length&&(lastSlideClones=[...lastSlideClones],firstSlideClones=[...firstSlideClones]),slides[0].classList.add("carousel__slide--active");let newHtml=[...lastSlideClones,...slides,...firstSlideClones];slidesContainer.replaceChildren(...newHtml)}function transitionSlide(direction,nextSlideDistance=1){$$invalidate(9,transitioning=!0),allowTransition&&slidesContainer&&(posInitial=slidesContainer.offsetLeft,"right"===direction?($$invalidate(7,slidesContainer.style.left=posInitial-slideSize*nextSlideDistance+"px",slidesContainer),$$invalidate(30,currentSlideIndex+=nextSlideDistance)):"left"===direction&&($$invalidate(7,slidesContainer.style.left=`${posInitial+slideSize*nextSlideDistance}px`,slidesContainer),$$invalidate(30,currentSlideIndex-=nextSlideDistance)),allowTransition=!1,emitIndexChange(),setTimeout(checkIndex,transitionTime))}function stopAutoPlay(){clearInterval(animationInterval)}function checkIndex(){return $$invalidate(9,transitioning=!1),currentSlideIndex===-visibleSlides+leftBuffer?($$invalidate(30,currentSlideIndex=numberOfCarouselSlides+currentSlideIndex),$$invalidate(7,slidesContainer.style.left=`${-slideSize*currentSlideIndex-slideSize*visibleSlides+centerOffset}px`,slidesContainer),void(allowTransition=!0)):currentSlideIndex===numberOfCarouselSlides?($$invalidate(7,slidesContainer.style.left=`-${startPos}px`,slidesContainer),$$invalidate(30,currentSlideIndex=0),void(allowTransition=!0)):void(allowTransition=!0)}return onMount((()=>{slides=slidesContainer.children,numberOfCarouselSlides=slides.length,"center"===slideAlignment&&0===slideWidthPercentage&&1!==numberOfCarouselSlides&&$$invalidate(8,startPos=slideSize),"center"===slideAlignment&&0!==slideWidthPercentage?($$invalidate(0,visibleSlides=Math.ceil(100/slideWidthPercentage)),$$invalidate(1,slideSize=.01*slideWidthPercentage*carouselWidth),centerOffset=carouselWidth/2-slideSize/2,$$invalidate(8,startPos=slideSize*visibleSlides-centerOffset),leftBuffer=1):"left"===slideAlignment&&($$invalidate(8,startPos=slideSize*visibleSlides),startingCarouselSlideIndex&&($$invalidate(30,currentSlideIndex=startingCarouselSlideIndex),$$invalidate(8,startPos=slideSize*visibleSlides*(startingCarouselSlideIndex+1)))),$$invalidate(0,visibleSlides=Math.min(visibleSlides,slides.length)),1===slides.length&&($$invalidate(17,enableDesktopSwipe=!1),$$invalidate(18,enableMobileSwipe=!1),slides[0].classList.add("carousel__slide--active")),slides.length>1&&cloneSlides(),isAutoPlayEnabled&&(animationInterval=setInterval((()=>{if(!(carouselAutoPlayLoopLimit+1!==1&&carouselAutoPlayLoopLimit<animationLoopCounter))return currentSlideIndex===slides.length-2*visibleSlides-1?(animationLoopCounter++,void transitionSlide(autoSlideDirection)):void(slides[currentSlideIndex+1]&&transitionSlide(autoSlideDirection));stopAutoPlay()}),autoPlayDelay))})),$$self.$$set=$$props2=>{"animationStyle"in $$props2&&$$invalidate(2,animationStyle=$$props2.animationStyle),"autoPlayDelay"in $$props2&&$$invalidate(19,autoPlayDelay=$$props2.autoPlayDelay),"backgroundColor"in $$props2&&$$invalidate(3,backgroundColor=$$props2.backgroundColor),"carouselAutoPlayLoopLimit"in $$props2&&$$invalidate(20,carouselAutoPlayLoopLimit=$$props2.carouselAutoPlayLoopLimit),"carouselWidth"in $$props2&&$$invalidate(4,carouselWidth=$$props2.carouselWidth),"classNames"in $$props2&&$$invalidate(5,classNames=$$props2.classNames),"enableDesktopSwipe"in $$props2&&$$invalidate(17,enableDesktopSwipe=$$props2.enableDesktopSwipe),"enableMobileSwipe"in $$props2&&$$invalidate(18,enableMobileSwipe=$$props2.enableMobileSwipe),"isAutoPlayEnabled"in $$props2&&$$invalidate(21,isAutoPlayEnabled=$$props2.isAutoPlayEnabled),"slideAlignment"in $$props2&&$$invalidate(22,slideAlignment=$$props2.slideAlignment),"slidePadding"in $$props2&&$$invalidate(6,slidePadding=$$props2.slidePadding),"slideWidthPercentage"in $$props2&&$$invalidate(23,slideWidthPercentage=$$props2.slideWidthPercentage),"transitionTime"in $$props2&&$$invalidate(24,transitionTime=$$props2.transitionTime),"visibleSlides"in $$props2&&$$invalidate(0,visibleSlides=$$props2.visibleSlides),"slideSize"in $$props2&&$$invalidate(1,slideSize=$$props2.slideSize),"startingCarouselSlideIndex"in $$props2&&$$invalidate(25,startingCarouselSlideIndex=$$props2.startingCarouselSlideIndex),"autoSlideDirection"in $$props2&&$$invalidate(26,autoSlideDirection=$$props2.autoSlideDirection),"$$scope"in $$props2&&$$invalidate(33,$$scope=$$props2.$$scope)},$$self.$$.update=()=>{3&$$self.$$.dirty[1]&&(dragDistance=dragEndPos-dragStartPos),$$self.$$.dirty[0]},$$invalidate(9,transitioning=!1),[visibleSlides,slideSize,animationStyle,backgroundColor,carouselWidth,classNames,slidePadding,slidesContainer,startPos,transitioning,transitionTimeInSeconds,function(e){enableMobileSwipe&&(stopAutoPlay(),$$invalidate(31,dragStartPos=e.touches[0].pageX))},function(e){enableDesktopSwipe&&(stopAutoPlay(),$$invalidate(31,dragStartPos=e.pageX))},function(e){enableMobileSwipe&&$$invalidate(32,dragEndPos=e.touches[0].pageX)},function(e){enableDesktopSwipe&&$$invalidate(32,dragEndPos=e.pageX)},function(e){dragDistance&&(dragDistance<-10?transitionSlide("right"):dragDistance>10&&transitionSlide("left"),dispatch("carouselSwipedByUser"))},()=>{1===slides.length&&dispatch("singleSlideCarouselClicked")},enableDesktopSwipe,enableMobileSwipe,autoPlayDelay,carouselAutoPlayLoopLimit,isAutoPlayEnabled,slideAlignment,slideWidthPercentage,transitionTime,startingCarouselSlideIndex,autoSlideDirection,transitionSlide,function(newSlideIndex){if(0===newSlideIndex&&currentSlideIndex===numberOfCarouselSlides-1)transitionSlide("right");else if(newSlideIndex>currentSlideIndex){transitionSlide("right",newSlideIndex-currentSlideIndex)}else if(newSlideIndex<currentSlideIndex){transitionSlide("left",currentSlideIndex-newSlideIndex)}},stopAutoPlay,currentSlideIndex,dragStartPos,dragEndPos,$$scope,slots,function($$value){binding_callbacks[$$value?"unshift":"push"]((()=>{slidesContainer=$$value,$$invalidate(7,slidesContainer)}))}]}class Carousel extends SvelteComponent{constructor(options){super(),init$6(this,options,instance$m,create_fragment$m,safe_not_equal,{animationStyle:2,autoPlayDelay:19,backgroundColor:3,carouselAutoPlayLoopLimit:20,carouselWidth:4,classNames:5,enableDesktopSwipe:17,enableMobileSwipe:18,isAutoPlayEnabled:21,slideAlignment:22,slidePadding:6,slideWidthPercentage:23,transitionTime:24,visibleSlides:0,slideSize:1,startingCarouselSlideIndex:25,autoSlideDirection:26,transitionSlide:27,handleIndexChange:28,stopAutoPlay:29},null,[-1,-1])}get transitionSlide(){return this.$$.ctx[27]}get handleIndexChange(){return this.$$.ctx[28]}get stopAutoPlay(){return this.$$.ctx[29]}}function get_each_context$8(ctx,list,i){const child_ctx=ctx.slice();return child_ctx[11]=list[i],child_ctx[13]=i,child_ctx}function create_each_block$8(ctx){let button,mounted,dispose,style___indicatorSize=`${ctx[1]}px`,style___indicatorMargin=`${ctx[4]}px`;function click_handler(){return ctx[9](ctx[13])}return{c(){button=element("button"),attr(button,"class","indicators__indicator svelte-12bby5q"),toggle_class(button,"indicators__indicator--active",ctx[13]===ctx[6]),set_style(button,"--indicatorSize",style___indicatorSize),set_style(button,"--borderColor",ctx[2]),set_style(button,"--fillColor",ctx[3]),set_style(button,"--indicatorMargin",style___indicatorMargin)},m(target,anchor){insert(target,button,anchor),mounted||(dispose=listen(button,"click",click_handler),mounted=!0)},p(new_ctx,dirty){ctx=new_ctx,64&dirty&&toggle_class(button,"indicators__indicator--active",ctx[13]===ctx[6]),2&dirty&&style___indicatorSize!==(style___indicatorSize=`${ctx[1]}px`)&&set_style(button,"--indicatorSize",style___indicatorSize),4&dirty&&set_style(button,"--borderColor",ctx[2]),8&dirty&&set_style(button,"--fillColor",ctx[3]),16&dirty&&style___indicatorMargin!==(style___indicatorMargin=`${ctx[4]}px`)&&set_style(button,"--indicatorMargin",style___indicatorMargin)},d(detaching){detaching&&detach(button),mounted=!1,dispose()}}}function create_fragment$l(ctx){let div,div_class_value,each_value=ensure_array_like({length:ctx[0]}),each_blocks=[];for(let i=0;i<each_value.length;i+=1)each_blocks[i]=create_each_block$8(get_each_context$8(ctx,each_value,i));return{c(){div=element("div");for(let i=0;i<each_blocks.length;i+=1)each_blocks[i].c();attr(div,"class",div_class_value="indicators "+ctx[5]+" svelte-12bby5q")},m(target,anchor){insert(target,div,anchor);for(let i=0;i<each_blocks.length;i+=1)each_blocks[i]&&each_blocks[i].m(div,null)},p(ctx2,[dirty]){if(223&dirty){let i;for(each_value=ensure_array_like({length:ctx2[0]}),i=0;i<each_value.length;i+=1){const child_ctx=get_each_context$8(ctx2,each_value,i);each_blocks[i]?each_blocks[i].p(child_ctx,dirty):(each_blocks[i]=create_each_block$8(child_ctx),each_blocks[i].c(),each_blocks[i].m(div,null))}for(;i<each_blocks.length;i+=1)each_blocks[i].d(1);each_blocks.length=each_value.length}32&dirty&&div_class_value!==(div_class_value="indicators "+ctx2[5]+" svelte-12bby5q")&&attr(div,"class",div_class_value)},i:noop,o:noop,d(detaching){detaching&&detach(div),destroy_each(each_blocks,detaching)}}}function instance$l($$self,$$props,$$invalidate){let activeIndex,{numberOfIndicators:numberOfIndicators}=$$props,{indicatorSize:indicatorSize=8}=$$props,{borderColor:borderColor="#000"}=$$props,{fillColor:fillColor="#000"}=$$props,{initialActiveIndex:initialActiveIndex=0}=$$props,{indicatorMargin:indicatorMargin=2}=$$props,{classNames:classNames=""}=$$props;const dispatch=createEventDispatcher();let indicatorClickHandler=index=>{$$invalidate(6,activeIndex=index),dispatch("indicatorClick",{activeIndicator:index})};return $$self.$$set=$$props2=>{"numberOfIndicators"in $$props2&&$$invalidate(0,numberOfIndicators=$$props2.numberOfIndicators),"indicatorSize"in $$props2&&$$invalidate(1,indicatorSize=$$props2.indicatorSize),"borderColor"in $$props2&&$$invalidate(2,borderColor=$$props2.borderColor),"fillColor"in $$props2&&$$invalidate(3,fillColor=$$props2.fillColor),"initialActiveIndex"in $$props2&&$$invalidate(8,initialActiveIndex=$$props2.initialActiveIndex),"indicatorMargin"in $$props2&&$$invalidate(4,indicatorMargin=$$props2.indicatorMargin),"classNames"in $$props2&&$$invalidate(5,classNames=$$props2.classNames)},$$self.$$.update=()=>{256&$$self.$$.dirty&&$$invalidate(6,activeIndex=initialActiveIndex)},[numberOfIndicators,indicatorSize,borderColor,fillColor,indicatorMargin,classNames,activeIndex,indicatorClickHandler,initialActiveIndex,i=>indicatorClickHandler(i)]}class Indicators extends SvelteComponent{constructor(options){super(),init$6(this,options,instance$l,create_fragment$l,safe_not_equal,{numberOfIndicators:0,indicatorSize:1,borderColor:2,fillColor:3,initialActiveIndex:8,indicatorMargin:4,classNames:5})}}var PolarisEvent=(PolarisEvent2=>(PolarisEvent2.VE_IMPRESSION="veImpression",PolarisEvent2.VE_VIEWED="veViewed",PolarisEvent2.BTX_IMPRESSION="btxImpression",PolarisEvent2.BTX_VIEWED="btxViewed",PolarisEvent2.BTX_CLOSED="btxClosed",PolarisEvent2.GALLERY_SLIDE_VIEWED="gallery_slide_viewed",PolarisEvent2.SCREEN_IMPRESSION="screenImpression",PolarisEvent2.SCREEN_VIEWED="screenViewed",PolarisEvent2.PLAYER_IMPRESSION="playerImpression",PolarisEvent2.PLAYER_VIEWED="playerViewed",PolarisEvent2.COMPONENT_IMPRESSION="componentImpression",PolarisEvent2.COMPONENT_VIEWED="componentViewed",PolarisEvent2.COMPONENT_ASSET_IMPRESSION="componentAssetImpression",PolarisEvent2.COMPONENT_ASSET_VIEWED="componentAssetViewed",PolarisEvent2.SM_READY="smReady",PolarisEvent2.SM_PLAYER_READY="smPlayerReady",PolarisEvent2.SM_CLOSE="smClose",PolarisEvent2.WRAPPER_BUILT="wrapperBuilt",PolarisEvent2.ADS_AVAILABLE_RESPONSE="adsAvailableResponse",PolarisEvent2.PUB_WRAPPER_RESPONSE="pubWrapperResponse",PolarisEvent2.PUB_LOBBY_IMPRESSION="pubLobbyImpression",PolarisEvent2.PUB_LOBBY_SUBSCRIBE_CHOSEN="pubLobbySubscribeChosen",PolarisEvent2.PUB_LOBBY_SELECTOR_CHOSEN="pubLobbySelectorChosen",PolarisEvent2.VANGUARD_INITIALIZED="vanguardInitialized",PolarisEvent2.SHOW_PLAYER="showPlayer",PolarisEvent2.HIDE_PLAYER="hidePlayer",PolarisEvent2.PLAYER_SIZED="playerSized",PolarisEvent2.PLAYER_SIZE_CHANGED="playerSizeChanged",PolarisEvent2.UNIT_LOAD="unitLoad",PolarisEvent2.AD_REQUESTED="adRequested",PolarisEvent2.AD_SELECTED="adSelected",PolarisEvent2.AD_STARTED="adStarted",PolarisEvent2.AD_RESTARTED="adRestarted",PolarisEvent2.AD_SYSTEM_STARTED="adSystemStarted",PolarisEvent2.AD_SYSTEM_INITIALIZED="adSystemInitialized",PolarisEvent2.MEDIA_STARTED="mediaStarted",PolarisEvent2.SEND_REPORT="sendReport",PolarisEvent2.SEND_AD_REPORT="sendAdReport",PolarisEvent2.SURVEY_REPORT="surveyReport",PolarisEvent2.FOCUS_LOST="focusLost",PolarisEvent2.REPORT_IMP="reportImp",PolarisEvent2.REPORT_25="report25",PolarisEvent2.REPORT_50="report50",PolarisEvent2.REPORT_75="report75",PolarisEvent2.REPORT_END="reportEnd",PolarisEvent2.BUTTON_CLICKED="buttonClicked",PolarisEvent2.PLAY_PREVIEW="playPreview",PolarisEvent2.PAUSE_VIDEO="pauseVideo",PolarisEvent2.PLAY_VIDEO="playVideo",PolarisEvent2.RESUME_VIDEO="resumeVideo",PolarisEvent2.RESART_VIDEO="restartVideo",PolarisEvent2.MUTE_VIDEO="muteVideo",PolarisEvent2.UNMUTE_VIDEO="unmuteVideo",PolarisEvent2.ADJUST_VOLUME="adjustVolume",PolarisEvent2.BACK_10_SECONDS="back10Seconds",PolarisEvent2.FORWARD_10_SECONDS="forward10Seconds",PolarisEvent2.ENTER_FULLSCREEN="enterFullScreen",PolarisEvent2.EXIT_FULLSCREEN="exitFullScreen",PolarisEvent2.AD_CLICKED="adClicked",PolarisEvent2.SHOW_CART="showCart",PolarisEvent2.CHECKOUT="checkout",PolarisEvent2.CART_ITEM_CAROUSEL="cartItemCarousel",PolarisEvent2.CART_ITEM_LIST="cartItemList",PolarisEvent2.ADD_ITEM_TO_CART="addItemToCart",PolarisEvent2.REMOVE_ITEM_FROM_CART="removeItemFromCart",PolarisEvent2.NEXT_CART_ITEM="nextCartItem",PolarisEvent2.PREV_CART_ITEM="prevCartItem",PolarisEvent2.HIDE_CART="hideCart",PolarisEvent2.CAN_FINISH="canFinish",PolarisEvent2.IN_VIEW_TIME="inViewTime",PolarisEvent2.MEDIA_COMPLETED="mediaCompleted",PolarisEvent2.AD_SYSTEM_COMPLETED="adSystemCompleted",PolarisEvent2.AD_SYSTEMS_COMPLETED="adSystemsCompleted",PolarisEvent2.AD_COMPLETED="adCompleted",PolarisEvent2.NOTIFICATION_COMPLETED="notificationCompleted",PolarisEvent2.ALL_COMPLETED="allCompleted",PolarisEvent2.OPEN_EXTERNAL_LINK="openExternalLink",PolarisEvent2.EXTERNAL_IFRAME_CLOSED="externalIframeClosed",PolarisEvent2.WINDOW_RESIZED="windowResized",PolarisEvent2.SIZE_CATEGORY_CHANGED="sizeCategoryChanged",PolarisEvent2.ORIENTATION_CHANGED="orientationChanged",PolarisEvent2.LOGIN_SUCCESS="loginSuccess",PolarisEvent2.LOGIN_FAIL="loginFail",PolarisEvent2.AUTH_EVENT="authEvent",PolarisEvent2.BEHAVIOR_CLOSED="behaviorClosed",PolarisEvent2.USER_CLOSED="userClosed",PolarisEvent2.VANGUARD_CLOSED="vanguardClosed",PolarisEvent2.TAG_REDIRECT="tagRedirect",PolarisEvent2.ERROR="error",PolarisEvent2.THREE_SECOND_PLAYBACK="threeSecondPlayback",PolarisEvent2.THIRTY_SECOND_PLAYBACK="thirtySecondPlayback",PolarisEvent2.PLAYER_EXPAND="playerExpand",PolarisEvent2.TOUCH_START="touchStart",PolarisEvent2.LOADED_25="loaded25",PolarisEvent2.LOADED_50="loaded50",PolarisEvent2.LOADED_75="loaded75",PolarisEvent2.LOADED_100="loaded100",PolarisEvent2.NO_FILES_ERROR="noFilesError",PolarisEvent2.TIMER_COMPLETED="timerCompleted",PolarisEvent2.START_PLAYER="startPlayer",PolarisEvent2.STOP_PLAYER="stopPlayer",PolarisEvent2.CAPTCHA_EVENT="captchaEvent",PolarisEvent2.ROTATION_EVENT="rotationEvent",PolarisEvent2.BTX_CLICKED="btxClicked",PolarisEvent2.BTX_COMPONENTS_VIEWED="btxComponentsViewed",PolarisEvent2.BTX_SCREEN_VIEWED="btxScreenViewed",PolarisEvent2.BTX_VIDEO="btxVideo",PolarisEvent2.BTX_VIDEO_START="start",PolarisEvent2.BTX_VIDEO_ONE_SECOND="oneSecond",PolarisEvent2.BTX_VIDEO_THREE_SECONDS="threeSeconds",PolarisEvent2.BTX_VIDEO_25="25",PolarisEvent2.BTX_VIDEO_50="50",PolarisEvent2.BTX_VIDEO_75="75",PolarisEvent2.BTX_VIDEO_COMPLETE_MINUS_TWO_SECONDS="completeMinusTwoSeconds",PolarisEvent2.BTX_VIDEO_COMPLETE="complete",PolarisEvent2.BTX_VIDEO_THIRTY_SECONDS="thirtySeconds",PolarisEvent2.LOAD_START="loadstart",PolarisEvent2.PROGRESS="progress",PolarisEvent2.SUSPEND="suspend",PolarisEvent2.ABORT="abort",PolarisEvent2.EMPTIED="emptied",PolarisEvent2.STALLED="stalled",PolarisEvent2.LOADED_META_DATA="loadedmetadata",PolarisEvent2.LOADED_DATA="loadeddata",PolarisEvent2.CAN_PLAY="canplay",PolarisEvent2.CAN_PLAY_THROUGH="canplaythrough",PolarisEvent2.PLAYING="playing",PolarisEvent2.WAITING="waiting",PolarisEvent2.SEEKING="seeking",PolarisEvent2.SEEKED="seeked",PolarisEvent2.ENDED="ended",PolarisEvent2.DURATION_CHANGE="durationchange",PolarisEvent2.TIME_UPDATE="timeupdate",PolarisEvent2.PLAY="play",PolarisEvent2.PAUSE="pause",PolarisEvent2.RATE_CHANGE="ratechange",PolarisEvent2.RESIZE="resize",PolarisEvent2.VOLUME_CHANGE="volumechange",PolarisEvent2))(PolarisEvent||{});window.config&&window.config.bellatrix&&(window.config=window.config.bellatrix);const playerConfig$1=window.config;playerConfig$1.isResponsive=!0;let state={config:playerConfig$1};const btxStore=writable(state);btxStore.set({...state,currentScreenIndex:0,viewedComponents:[],seekTime:-1,currentTime:0,isLoadingInQuickPreview:!1}),btxStore.subscribe((newState=>{newState.currentLayoutIndex!==state.currentLayoutIndex&&(state=newState,initScreens())}));const setValue=(key,value,showConsoleLog=!1)=>{let s=get_store_value(btxStore);s[key]=value,btxStore.set(s)},initScreens=()=>{if(!state.config)return void setValue("screens",[]);const layout=state.config.responsiveLayout.layouts[get_store_value(btxStore).currentLayoutIndex];layout||setValue("screens",[]),setValue("screens",state.config.screens.filter((screen=>layout.screens.indexOf(screen.id)>-1)))},initLayouts=()=>{(async(responsiveLayout,callback,windowEl)=>{try{let layoutIndex=-1,currentLayout=0;const queries=responsiveLayout.layouts.map((layout=>layout.query)),onMqChange=evt=>{currentLayout=0,mqs.forEach(((mq,index)=>{mq.matches&&(currentLayout=index)})),currentLayout!==layoutIndex&&(layoutIndex=currentLayout,callback(currentLayout))},mqs=queries.map(((layout,index)=>{const mq=(windowEl||window).matchMedia(layout);return mq.matches&&(currentLayout=index),mq.onchange=onMqChange,mq}));layoutIndex=currentLayout,callback(currentLayout)}catch(err){throw err}})(state.config.responsiveLayout,(index=>{setValue("currentLayoutIndex",index),get_store_value(btxStore).currentLayoutIndex=index}))},setScreen=newScreenId=>{setValue("currentScreenIndex",get_store_value(btxStore).screens.findIndex((screen=>screen.id===newScreenId)))},playVideo=()=>{state.videoController.play()},btxStore$1={getAppDimensions:()=>get_store_value(btxStore).appDimensions,getBehaviorConfig:()=>{var _a;const layout=state.config.responsiveLayout.layouts[get_store_value(btxStore).currentLayoutIndex];return state.config&&layout?null==(_a=state.config.responsiveLayout.layouts[get_store_value(btxStore).currentLayoutIndex])?void 0:_a.behavior:LayoutBehaviorType.RESPONSIVE},getCurrentKeyFrameItems:screen=>{const currentTime=get_store_value(btxStore).currentTime;return[...screen.timeline.keyframes].sort(((a,b)=>b.time-a.time)).find((keyframe=>(state.currentKeyframeTime=keyframe.time,currentTime>=keyframe.time)))},getCurrentParallaBackground:()=>{if(get_store_value(btxStore).screens.length)return get_store_value(btxStore).screens[get_store_value(btxStore).currentScreenIndex].items.find((item=>item.componentType===ScreenItemComponentType.PARALLAX_BACKGROUND))},getCurrentScreenId:()=>state.screens[state.currentScreenIndex].id,getDimensionsConfig:()=>{const layout=state.config.responsiveLayout.layouts[get_store_value(btxStore).currentLayoutIndex];return layout&&layout.dimensions?layout.dimensions:{width:0,height:0,widthUnit:MixedUnitType.PIXEL,heightUnit:MixedUnitType.PIXEL}},getDisplayConfig:()=>{var _a,_b;const layout=null==(_b=null==(_a=state.config)?void 0:_a.responsiveLayout)?void 0:_b.layouts[get_store_value(btxStore).currentLayoutIndex];return(null==layout?void 0:layout.display)||{...EmptyDisplayConfig}},getIsScreenActive:id=>{let index=state.currentScreenIndex>=0?state.currentScreenIndex:0;return index=state.currentScreenIndex>=state.screens.length?state.screens.length-1:index,state.screens[index].id===id},getResolution:()=>get_store_value(btxStore).currentResolution,getCurrentPlayerState:()=>state,initPlayer:()=>{var config2;state.config&&(setValue("currentLayoutIndex",0),setValue("currentScreenIndex",0),setValue("isEdgeOrIE11",DeviceUtils.getIsEdgeOrIE11()),config2=state.config,initScriptOrCss(config2,"css"),(config2=>{initScriptOrCss(config2,"js")})(state.config),initLayouts(),initScreens(),state.config.hasOwnProperty("prefetchItems")&&(data=>{const head=document.getElementsByTagName("head")[0],fragment=document.createDocumentFragment();data.forEach((item=>{item.files.forEach((file=>{const link=document.createElement("link");link.setAttribute("rel","preload"),link.setAttribute("as",item.type),link.setAttribute("href",file),fragment.appendChild(link)}))})),head.appendChild(fragment)})(state.config.prefetchItems))},initScreens:initScreens,replayWithAudio:()=>{setValue("isMuted",!1),setValue("seekTime",0),state.videoController.unmute(),state.videoController.play()},set:btxStore.set,setAppDimensions:appDimensions=>{get_store_value(btxStore),setValue("appDimensions",appDimensions)},setResolution:resolution=>{setValue("currentResolution",resolution)},setScreen:setScreen,setValue:setValue,subscribe:btxStore.subscribe,update:btxStore.update,toggleMuted:()=>{setValue("isMuted",!state.isMuted),state.videoController.toggleMute()},playVideo:playVideo,pauseVideo:()=>{state.videoController.pause()},seekAndPlay:seekTime=>{state.videoController.seekTime(seekTime),state.videoController.play()},hideItem:id=>{const screenItemToHide=state.screens[state.currentScreenIndex].items.find((item=>item.id===id));screenItemToHide&&(screenItemToHide.isVisible=!1),setValue("screens",state.screens)},showItem:id=>{const screenItemToHide=state.screens[state.currentScreenIndex].items.find((item=>item.id===id));screenItemToHide&&(screenItemToHide.isVisible=!0),setValue("screens",state.screens)},closePlayer:()=>{const event={type:PolarisEvent.AD_COMPLETED};event[PolarisEvent.AD_COMPLETED]={},trackingStore$1.sendReport(event)},checkScreenItemIsVisible:id=>{var _a;return null==(_a=state.screens[state.currentScreenIndex].items.find((item=>item.id===id)))?void 0:_a.isVisible},setScreenAndPlay:id=>{setScreen(id),state.isPlaying=!1,playVideo(),state.isPlaying||setTimeout((()=>{playVideo()}),500)}};function create_fragment$k(ctx){let div,prximage,div_resize_listener,current;const prximage_spread_levels=[ctx[5],{width:Math.max(imageWidth,ctx[2],ctx[4])},{class:"image--full polaris-image-img "+ctx[0]+" "+ctx[3]},{styles:"width: 100%; height: 100%;"}];let prximage_props={};for(let i=0;i<prximage_spread_levels.length;i+=1)prximage_props=assign(prximage_props,prximage_spread_levels[i]);return prximage=new Image$1({props:prximage_props}),{c(){div=element("div"),create_component(prximage.$$.fragment),attr(div,"class","image-item-container svelte-8iwjcr"),add_render_callback((()=>ctx[8].call(div)))},m(target,anchor){insert(target,div,anchor),mount_component(prximage,div,null),ctx[7](div),div_resize_listener=add_iframe_resize_listener(div,ctx[8].bind(div)),current=!0},p(ctx2,[dirty]){const prximage_changes=61&dirty?get_spread_update(prximage_spread_levels,[32&dirty&&get_spread_object(ctx2[5]),20&dirty&&{width:Math.max(imageWidth,ctx2[2],ctx2[4])},9&dirty&&{class:"image--full polaris-image-img "+ctx2[0]+" "+ctx2[3]},prximage_spread_levels[3]]):{};prximage.$set(prximage_changes)},i(local){current||(transition_in(prximage.$$.fragment,local),current=!0)},o(local){transition_out(prximage.$$.fragment,local),current=!1},d(detaching){detaching&&detach(div),destroy_component(prximage),ctx[7](null),div_resize_listener()}}}let imageWidth=32;function instance$k($$self,$$props,$$invalidate){var _a,_b,_c,_d,_e,_f,_g,_h,_j,_k,_l,_m,_o;let containerEl,{itemData:itemData={}}=$$props,{classNames:classNames=""}=$$props,containerWidth=0;const styleFitClass=(null===(_c=null===(_b=null===(_a=itemData.asset)||void 0===_a?void 0:_a.image)||void 0===_b?void 0:_b.data)||void 0===_c?void 0:_c.displayType)?"object-fit-"+(null===(_f=null===(_e=null===(_d=itemData.asset)||void 0===_d?void 0:_d.image)||void 0===_e?void 0:_e.data)||void 0===_f?void 0:_f.displayType):"",imageConfigWidth=Number(null===(_j=null===(_h=null===(_g=itemData.asset)||void 0===_g?void 0:_g.image)||void 0===_h?void 0:_h.data)||void 0===_j?void 0:_j.width)||2048,imageData={imageSourcesArray:[],altText:"",alt:itemData.name};return imageData.imageSourcesArray.push({url:(null===(_l=null===(_k=itemData.asset)||void 0===_k?void 0:_k.image)||void 0===_l?void 0:_l.fileUrl)+(Math.max(imageWidth,imageConfigWidth)+""),density:1}),imageData.imageSourcesArray.push({url:(null===(_o=null===(_m=itemData.asset)||void 0===_m?void 0:_m.image)||void 0===_o?void 0:_o.fileUrl)+(2*Math.max(imageWidth,imageConfigWidth)+""),density:2}),onMount((()=>{})),$$self.$$set=$$props2=>{"itemData"in $$props2&&$$invalidate(6,itemData=$$props2.itemData),"classNames"in $$props2&&$$invalidate(0,classNames=$$props2.classNames)},[classNames,containerEl,containerWidth,styleFitClass,imageConfigWidth,imageData,itemData,function($$value){binding_callbacks[$$value?"unshift":"push"]((()=>{containerEl=$$value,$$invalidate(1,containerEl)}))},function(){containerWidth=this.offsetWidth,$$invalidate(2,containerWidth)}]}class ImageItem extends SvelteComponent{constructor(options){super(),init$6(this,options,instance$k,create_fragment$k,safe_not_equal,{itemData:6,classNames:0})}}var ClickAreaDataType=(ClickAreaDataType2=>(ClickAreaDataType2.CLICK_THRU="clickThru",ClickAreaDataType2.EVENT="event",ClickAreaDataType2))(ClickAreaDataType||{}),ClickAreaParamDataType=(ClickAreaParamDataType2=>(ClickAreaParamDataType2.OBJECT="object",ClickAreaParamDataType2.STRING="string",ClickAreaParamDataType2.INT="integer",ClickAreaParamDataType2.FLOAT="float",ClickAreaParamDataType2.BOOLEAN="boolean",ClickAreaParamDataType2))(ClickAreaParamDataType||{});const openClickThroughUrl=urlString=>{let gamRedirect="";window.sm_params&&(window.sm_params.smcue||window.sm_params.smcuu)&&(gamRedirect=getPotentialGAMClickTracker());const finalUrl=gamRedirect?`${gamRedirect}${encodeURIComponent(urlString)}`:urlString;window.open(finalUrl,"_blank")};function create_else_block$1(ctx){let html_tag,html_anchor,raw_value=ctx[0].contents+"";return{c(){html_tag=new HtmlTag(!1),html_anchor=empty(),html_tag.a=html_anchor},m(target,anchor){html_tag.m(raw_value,target,anchor),insert(target,html_anchor,anchor)},p(ctx2,dirty){1&dirty&&raw_value!==(raw_value=ctx2[0].contents+"")&&html_tag.p(raw_value)},i:noop,o:noop,d(detaching){detaching&&(detach(html_anchor),html_tag.d())}}}function create_if_block$8(ctx){let imageitem,current;return imageitem=new ImageItem({props:{itemData:ctx[0]}}),{c(){create_component(imageitem.$$.fragment)},m(target,anchor){mount_component(imageitem,target,anchor),current=!0},p(ctx2,dirty){const imageitem_changes={};1&dirty&&(imageitem_changes.itemData=ctx2[0]),imageitem.$set(imageitem_changes)},i(local){current||(transition_in(imageitem.$$.fragment,local),current=!0)},o(local){transition_out(imageitem.$$.fragment,local),current=!1},d(detaching){destroy_component(imageitem,detaching)}}}function create_fragment$j(ctx){let div,current_block_type_index,if_block,current,mounted,dispose;const if_block_creators=[create_if_block$8,create_else_block$1],if_blocks=[];function select_block_type(ctx2,dirty){var _a,_b;return ctx2[0].asset&&(null==(_b=null==(_a=ctx2[0].asset)?void 0:_a.image)?void 0:_b.fileUrl)?0:1}return current_block_type_index=select_block_type(ctx),if_block=if_blocks[current_block_type_index]=if_block_creators[current_block_type_index](ctx),{c(){div=element("div"),if_block.c(),attr(div,"class","click-area click-area-"+ctx[1]+" svelte-1igbpyk"),attr(div,"role","button"),attr(div,"tabindex","0")},m(target,anchor){insert(target,div,anchor),if_blocks[current_block_type_index].m(div,null),current=!0,mounted||(dispose=[listen(div,"click",ctx[2]),listen(div,"keypress",ctx[2])],mounted=!0)},p(ctx2,[dirty]){let previous_block_index=current_block_type_index;current_block_type_index=select_block_type(ctx2),current_block_type_index===previous_block_index?if_blocks[current_block_type_index].p(ctx2,dirty):(group_outros(),transition_out(if_blocks[previous_block_index],1,1,(()=>{if_blocks[previous_block_index]=null})),check_outros(),if_block=if_blocks[current_block_type_index],if_block?if_block.p(ctx2,dirty):(if_block=if_blocks[current_block_type_index]=if_block_creators[current_block_type_index](ctx2),if_block.c()),transition_in(if_block,1),if_block.m(div,null))},i(local){current||(transition_in(if_block),current=!0)},o(local){transition_out(if_block),current=!1},d(detaching){detaching&&detach(div),if_blocks[current_block_type_index].d(),mounted=!1,run_all(dispose)}}}function instance$j($$self,$$props,$$invalidate){let{itemData:itemData={}}=$$props;const clickAreaId=itemData.id;return onMount((()=>{})),$$self.$$set=$$props2=>{"itemData"in $$props2&&$$invalidate(0,itemData=$$props2.itemData)},[itemData,clickAreaId,event=>{event.currentTarget.blur();const clickData=itemData.data;let polarisReport={type:PolarisEvent.BTX_CLICKED};const generatePolarisEvent=()=>{let componentName=itemData.name||"";return itemData.parentItem&&"Flipcard"===itemData.parentItem&&(componentName=`flipcard,${componentName}`),{screenId:String(itemData.reportingData.screenId),screenName:itemData.reportingData.screenName,componentId:String(clickAreaId),componentName:componentName,componentType:ScreenItemComponentType.CLICK_AREA,clickType:clickData.type,clickValue:clickData.value}};switch(event[PolarisEvent.BTX_CLICKED]=generatePolarisEvent(),clickData.type){case ClickAreaDataType.CLICK_THRU:const url2=(data=>{const url2=data.params?`${data.value}?${data.params}`:data.value;if(!data.isGAMClickThru)return url2;const gamClickThru=window.gamClickThru;return gamClickThru&&"%%CLICK_URL_UNESC%%"!==gamClickThru?`${gamClickThru}${url2}`:url2})(clickData);if(!url2)return;clickData.value=url2,trackingStore$1.sendReport(Object.assign(Object.assign({},polarisReport),event)),openClickThroughUrl(url2);break;case ClickAreaDataType.EVENT:let params;if(clickData.params&&(params=((paramsType,data)=>{switch(paramsType){case ClickAreaParamDataType.OBJECT:return(str=>{const obj={};return str.split(",").forEach((param=>{const kvp=param.split("=");obj[kvp[0]]=kvp[1]})),obj})(data);case ClickAreaParamDataType.INT:return parseInt(data,10);case ClickAreaParamDataType.FLOAT:return parseFloat(data);case ClickAreaParamDataType.BOOLEAN:return"false"!==data;default:return data}})(clickData.paramsType,clickData.params)),!clickData.value)return;btxStore$1[clickData.value]&&btxStore$1[clickData.value](params);let eventObj=Object.assign(Object.assign({},itemData.reportingData),{type:PolarisEvent.BTX_CLICKED});eventObj[PolarisEvent.BTX_CLICKED]=generatePolarisEvent(),trackingStore$1.sendReport(eventObj)}}]}class ClickAreaItem extends SvelteComponent{constructor(options){super(),init$6(this,options,instance$j,create_fragment$j,safe_not_equal,{itemData:0})}}const getGridStyles=(dimensionConfig,behaviorConfig,displayConfig,currentResolution,isEdgeOrIE11)=>{function fixedGridStyles(){return`${(null==dimensionConfig?void 0:dimensionConfig.widthUnit)===MixedUnitType.PERCENT&&displayConfig.displayType!==DisplayType.GRID?"":isEdgeOrIE11?(null==dimensionConfig?void 0:dimensionConfig.widthUnit)===MixedUnitType.PERCENT?`grid-columns: ( ${currentResolution}px )[${displayConfig.columns}];`:`grid-columns: ( ${dimensionConfig.width/displayConfig.columns}px )[${displayConfig.columns}];`:(null==dimensionConfig||dimensionConfig.widthUnit,MixedUnitType.PERCENT,`grid-template-columns: repeat(${displayConfig.columns}, ${dimensionConfig.width/displayConfig.columns}px);`)} ${(null==dimensionConfig?void 0:dimensionConfig.heightUnit)===MixedUnitType.PERCENT&&displayConfig.displayType!==DisplayType.GRID?"":isEdgeOrIE11?(null==dimensionConfig?void 0:dimensionConfig.heightUnit)===MixedUnitType.PERCENT?`grid-rows: ( ${currentResolution}px )[${displayConfig.rows}];`:`grid-rows: ( ${dimensionConfig.height/displayConfig.rows}px )[${displayConfig.rows}];`:(null==dimensionConfig?void 0:dimensionConfig.heightUnit)===MixedUnitType.PERCENT?`grid-template-rows: repeat(${displayConfig.rows}, ${currentResolution}px);`:`grid-template-rows: repeat(${displayConfig.rows}, ${dimensionConfig.height/displayConfig.rows}px);`}`}let width,height;return behaviorConfig===LayoutBehaviorType.FIXED?(width=`${dimensionConfig.width}${(null==dimensionConfig?void 0:dimensionConfig.widthUnit)||"px"}`,height=`${dimensionConfig.height}${(null==dimensionConfig?void 0:dimensionConfig.heightUnit)||"px"}`):(width=currentResolution*displayConfig.columns+"px",height=currentResolution*displayConfig.rows+"px"),`width: ${width}; height: ${height}; ${behaviorConfig===LayoutBehaviorType.FIXED?fixedGridStyles():isEdgeOrIE11?`grid-columns: ( ${currentResolution}px )[${displayConfig.columns}];grid-rows: ( ${currentResolution}px )[${displayConfig.rows}];`:`grid-template-columns: repeat(${displayConfig.columns}, ${currentResolution}px);grid-template-rows: repeat(${displayConfig.rows}, ${currentResolution}px);`}`},pkg_version="1.20.0",playerConfig=get_store_value(btxStore$1).config,configs=playerConfig.trackingServerConfigs||[],{sm_params:sm_params={}}=window;window.sm_params=window.sm_params||{};let thirdPartyUrls,baseReportingParams={creative:{id:playerConfig.uuid,type:playerConfig.type},gamLineItemId:getGamLineItemId(window),gamCreativeId:getGamCreativeId(window)};(null==configs?void 0:configs.length)>0&&configs.forEach((config2=>{if("Polaris"===config2.paramNameMapTemplate){const sessionId=window.crypto.randomUUID().toString();baseReportingParams={...config2.baseParams,...sm_params,...baseReportingParams,sessionId:sessionId,creative:{id:playerConfig.uuid},iid:Math.floor(1e5+9e12*Math.random())},thirdPartyUrls=config2.thirdPartyUrls}else sm_params&&"Selectable"===config2.paramNameMapTemplate?(baseReportingParams={...baseReportingParams,c9:`${null==sm_params?void 0:sm_params.gamCreativeId},${null==sm_params?void 0:sm_params.gamLineItemId}`},Object.assign(baseReportingParams,sm_params)):baseReportingParams={...config2.baseParams,...baseReportingParams};!thirdPartyUrls&&config2.thirdPartyUrls&&(thirdPartyUrls=config2.thirdPartyUrls)})),trackingStore$1.init({baseParams:{...baseReportingParams,appVersion:`v${pkg_version}`},thirdPartyUrls:thirdPartyUrls},!1),window.sm_params.baseReportingParams=baseReportingParams;const trackingStore={sendImpressionEvents:()=>{const impressionEvent={type:PolarisEvent.BTX_IMPRESSION};impressionEvent[PolarisEvent.BTX_IMPRESSION]={};const startedEvent={type:PolarisEvent.AD_STARTED};startedEvent[PolarisEvent.AD_STARTED]={},trackingStore$1.sendReport(impressionEvent),trackingStore$1.sendReport(startedEvent)},updateTrackingParameter:newTrackingParameter=>{trackingStore$1.updateReporter({baseParams:{...baseReportingParams,...newTrackingParameter}}),window.sm_params.baseReportingParams=baseReportingParams},sendReport:trackingStore$1.sendReport,addthirdPartyEvents:thirdPartyEvents=>{trackingStore$1.updateReporter({thirdPartyUrls:thirdPartyEvents})}};class ViewRportingUtil{constructor(componentViewEvent){this.store=btxStore$1,this.activeScreen=!1,this.playerVisibilityWatcher,this.componentViewEvent=componentViewEvent}getIsPlayerVisible(){return get_store_value(this.store).isPlayerVisible}getViewedComponents(){return get_store_value(this.store).viewedComponents}addToViewedComponents(){this.componentViewEvent[PolarisEvent.BTX_COMPONENTS_VIEWED]&&this.store.setValue("viewedComponents",[...this.getViewedComponents(),this.componentViewEvent[PolarisEvent.BTX_COMPONENTS_VIEWED][0].componentId]),this.componentViewEvent.type===PolarisEvent.BTX_SCREEN_VIEWED&&this.store.setValue("viewedComponents",[...this.getViewedComponents(),this.componentViewEvent[PolarisEvent.BTX_SCREEN_VIEWED].screenId])}sendViewReport(){var _a;this.isComponentViewed()||this.componentViewEvent.type===PolarisEvent.BTX_SCREEN_VIEWED&&!this.activeScreen||(trackingStore.sendReport(this.componentViewEvent),this.addToViewedComponents(),null==(_a=this.playerVisibilityWatcher)||_a.call(this))}isComponentViewed(){var _a;const components=this.getViewedComponents();return this.componentViewEvent[PolarisEvent.BTX_COMPONENTS_VIEWED]?components.includes(this.componentViewEvent[PolarisEvent.BTX_COMPONENTS_VIEWED][0].componentId):!!(null==(_a=this.componentViewEvent)?void 0:_a.screenId)&&components.includes(this.componentViewEvent.screenId)}}function get_each_context$7(ctx,list,i){const child_ctx=ctx.slice();return child_ctx[16]=list[i],child_ctx[18]=i,child_ctx}function get_each_context_1$1(ctx,list,i){const child_ctx=ctx.slice();return child_ctx[16]=list[i],child_ctx[18]=i,child_ctx}function create_if_block_1$3(ctx){let each_1_anchor,current,each_value_1=ensure_array_like(ctx[0].flipcardFrontItems),each_blocks=[];for(let i=0;i<each_value_1.length;i+=1)each_blocks[i]=create_each_block_1$1(get_each_context_1$1(ctx,each_value_1,i));const out=i=>transition_out(each_blocks[i],1,1,(()=>{each_blocks[i]=null}));return{c(){for(let i=0;i<each_blocks.length;i+=1)each_blocks[i].c();each_1_anchor=empty()},m(target,anchor){for(let i=0;i<each_blocks.length;i+=1)each_blocks[i]&&each_blocks[i].m(target,anchor);insert(target,each_1_anchor,anchor),current=!0},p(ctx2,dirty){if(1&dirty){let i;for(each_value_1=ensure_array_like(ctx2[0].flipcardFrontItems),i=0;i<each_value_1.length;i+=1){const child_ctx=get_each_context_1$1(ctx2,each_value_1,i);each_blocks[i]?(each_blocks[i].p(child_ctx,dirty),transition_in(each_blocks[i],1)):(each_blocks[i]=create_each_block_1$1(child_ctx),each_blocks[i].c(),transition_in(each_blocks[i],1),each_blocks[i].m(each_1_anchor.parentNode,each_1_anchor))}for(group_outros(),i=each_value_1.length;i<each_blocks.length;i+=1)out(i);check_outros()}},i(local){if(!current){for(let i=0;i<each_value_1.length;i+=1)transition_in(each_blocks[i]);current=!0}},o(local){each_blocks=each_blocks.filter(Boolean);for(let i=0;i<each_blocks.length;i+=1)transition_out(each_blocks[i]);current=!1},d(detaching){detaching&&detach(each_1_anchor),destroy_each(each_blocks,detaching)}}}function create_each_block_1$1(ctx){let screenitem,current;return screenitem=new ScreenItem({props:{screenItem:{...ctx[16],classes:[...ctx[16].classes||[]," image--full"],parentItem:"Flipcard",reportingData:ctx[0].reportingData},ordinal:ctx[18],isAlwaysVisible:!0,omitViewedEvents:!0}}),{c(){create_component(screenitem.$$.fragment)},m(target,anchor){mount_component(screenitem,target,anchor),current=!0},p(ctx2,dirty){const screenitem_changes={};1&dirty&&(screenitem_changes.screenItem={...ctx2[16],classes:[...ctx2[16].classes||[]," image--full"],parentItem:"Flipcard",reportingData:ctx2[0].reportingData}),screenitem.$set(screenitem_changes)},i(local){current||(transition_in(screenitem.$$.fragment,local),current=!0)},o(local){transition_out(screenitem.$$.fragment,local),current=!1},d(detaching){destroy_component(screenitem,detaching)}}}function create_if_block$7(ctx){let each_1_anchor,current,each_value=ensure_array_like(ctx[0].flipcardBackItems),each_blocks=[];for(let i=0;i<each_value.length;i+=1)each_blocks[i]=create_each_block$7(get_each_context$7(ctx,each_value,i));const out=i=>transition_out(each_blocks[i],1,1,(()=>{each_blocks[i]=null}));return{c(){for(let i=0;i<each_blocks.length;i+=1)each_blocks[i].c();each_1_anchor=empty()},m(target,anchor){for(let i=0;i<each_blocks.length;i+=1)each_blocks[i]&&each_blocks[i].m(target,anchor);insert(target,each_1_anchor,anchor),current=!0},p(ctx2,dirty){if(1&dirty){let i;for(each_value=ensure_array_like(ctx2[0].flipcardBackItems),i=0;i<each_value.length;i+=1){const child_ctx=get_each_context$7(ctx2,each_value,i);each_blocks[i]?(each_blocks[i].p(child_ctx,dirty),transition_in(each_blocks[i],1)):(each_blocks[i]=create_each_block$7(child_ctx),each_blocks[i].c(),transition_in(each_blocks[i],1),each_blocks[i].m(each_1_anchor.parentNode,each_1_anchor))}for(group_outros(),i=each_value.length;i<each_blocks.length;i+=1)out(i);check_outros()}},i(local){if(!current){for(let i=0;i<each_value.length;i+=1)transition_in(each_blocks[i]);current=!0}},o(local){each_blocks=each_blocks.filter(Boolean);for(let i=0;i<each_blocks.length;i+=1)transition_out(each_blocks[i]);current=!1},d(detaching){detaching&&detach(each_1_anchor),destroy_each(each_blocks,detaching)}}}function create_each_block$7(ctx){let screenitem,current;return screenitem=new ScreenItem({props:{screenItem:{...ctx[16],classes:[...ctx[16].classes||[]," image--full"],parentItem:"Flipcard",reportingData:ctx[0].reportingData},ordinal:ctx[18],isAlwaysVisible:!0,omitViewedEvents:!0}}),{c(){create_component(screenitem.$$.fragment)},m(target,anchor){mount_component(screenitem,target,anchor),current=!0},p(ctx2,dirty){const screenitem_changes={};1&dirty&&(screenitem_changes.screenItem={...ctx2[16],classes:[...ctx2[16].classes||[]," image--full"],parentItem:"Flipcard",reportingData:ctx2[0].reportingData}),screenitem.$set(screenitem_changes)},i(local){current||(transition_in(screenitem.$$.fragment,local),current=!0)},o(local){transition_out(screenitem.$$.fragment,local),current=!1},d(detaching){destroy_component(screenitem,detaching)}}}function create_fragment$i(ctx){let div3,div2,div0,t,div1,div3_class_value,current,mounted,dispose,if_block0=ctx[0]&&ctx[0].flipcardFrontItems&&create_if_block_1$3(ctx),if_block1=ctx[0]&&ctx[0].flipcardBackItems&&create_if_block$7(ctx);return{c(){div3=element("div"),div2=element("div"),div0=element("div"),if_block0&&if_block0.c(),t=space(),div1=element("div"),if_block1&&if_block1.c(),attr(div0,"class",null_to_empty(ctx[5]("card-front"))+" svelte-17tt1kw"),attr(div0,"style",ctx[6]()),attr(div0,"role","button"),attr(div0,"tabindex","0"),attr(div1,"class",null_to_empty(ctx[5]("card-back"))+" svelte-17tt1kw"),attr(div1,"style",ctx[6]()),attr(div1,"role","button"),attr(div1,"tabindex","0"),attr(div2,"class",null_to_empty(ctx[3]())+" svelte-17tt1kw"),attr(div2,"style",ctx[4]()),attr(div3,"class",div3_class_value=null_to_empty(ctx[2])+" svelte-17tt1kw")},m(target,anchor){insert(target,div3,anchor),append(div3,div2),append(div2,div0),if_block0&&if_block0.m(div0,null),append(div2,t),append(div2,div1),if_block1&&if_block1.m(div1,null),current=!0,mounted||(dispose=[listen(div0,"click",ctx[1]),listen(div0,"keypress",ctx[1]),listen(div1,"click",ctx[1]),listen(div1,"keypress",ctx[1])],mounted=!0)},p(ctx2,[dirty]){ctx2[0]&&ctx2[0].flipcardFrontItems?if_block0?(if_block0.p(ctx2,dirty),1&dirty&&transition_in(if_block0,1)):(if_block0=create_if_block_1$3(ctx2),if_block0.c(),transition_in(if_block0,1),if_block0.m(div0,null)):if_block0&&(group_outros(),transition_out(if_block0,1,1,(()=>{if_block0=null})),check_outros()),ctx2[0]&&ctx2[0].flipcardBackItems?if_block1?(if_block1.p(ctx2,dirty),1&dirty&&transition_in(if_block1,1)):(if_block1=create_if_block$7(ctx2),if_block1.c(),transition_in(if_block1,1),if_block1.m(div1,null)):if_block1&&(group_outros(),transition_out(if_block1,1,1,(()=>{if_block1=null})),check_outros()),(!current||4&dirty&&div3_class_value!==(div3_class_value=null_to_empty(ctx2[2])+" svelte-17tt1kw"))&&attr(div3,"class",div3_class_value)},i(local){current||(transition_in(if_block0),transition_in(if_block1),current=!0)},o(local){transition_out(if_block0),transition_out(if_block1),current=!1},d(detaching){detaching&&detach(div3),if_block0&&if_block0.d(),if_block1&&if_block1.d(),mounted=!1,run_all(dispose)}}}function instance$i($$self,$$props,$$invalidate){let displayConfig,dimensionConfig,behaviorConfig,flipCardClasses,$btxStore;component_subscribe($$self,btxStore$1,($$value=>$$invalidate(12,$btxStore=$$value)));let{itemData:itemData={}}=$$props,flipControlData=itemData.data||{},isCardFlipped=!1,flipDirection=(flipControlData.flipDirection+"").toLowerCase();const classes=()=>`flipcard flipcard-container ${isCardFlipped?"flipped":""}`;onMount((()=>{}));const flipFlipcard=()=>{isCardFlipped=!isCardFlipped,$$invalidate(2,flipCardClasses=classes())};return onMount((()=>{})),$$self.$$set=$$props2=>{"itemData"in $$props2&&$$invalidate(0,itemData=$$props2.itemData)},displayConfig=btxStore$1.getDisplayConfig(),dimensionConfig=btxStore$1.getDimensionsConfig(),behaviorConfig=btxStore$1.getBehaviorConfig(),$$invalidate(2,flipCardClasses=classes()),[itemData,event=>{flipFlipcard();if(event.composedPath().find((element2=>{var _a;return null===(_a=element2.classList)||void 0===_a?void 0:_a.contains("click-area")})))return;const flipcardData=`${""!==itemData.name?itemData.name:`${itemData.componentType}-${itemData.id}`},${isCardFlipped?"backCardClicked":"frontCardClicked"}`,viewEvent={type:PolarisEvent.BTX_COMPONENTS_VIEWED};viewEvent[PolarisEvent.BTX_COMPONENTS_VIEWED]=[{componentName:itemData.name,componentId:String(itemData.id),componentType:itemData.componentType,screenName:itemData.reportingData.screenName,screenId:String(itemData.reportingData.screenId)}];let polarisClickData=Object.assign(Object.assign({},itemData.reportingData),{type:PolarisEvent.BTX_CLICKED});polarisClickData[PolarisEvent.BTX_CLICKED]=event[PolarisEvent.BTX_CLICKED]={componentName:itemData.name,componentId:String(itemData.id),componentType:itemData.componentType,screenName:itemData.reportingData.screenName,screenId:String(itemData.reportingData.screenId),clickType:"Click to Flip",clickValue:"",flipcardData:flipcardData},trackingStore.sendReport(polarisClickData),$$invalidate(2,flipCardClasses=classes());const cardSideId=isCardFlipped?2:1,currentCardSideId=Number(`${config.id}.${cardSideId}`);if($btxStore.viewedComponents.includes(currentCardSideId)||!$btxStore.isPlayerVisible)return;const sideViewed=isCardFlipped?"Back Card":"Front Card",componentViewEvent=Object.assign(Object.assign({},viewEvent),{componentName:`${itemData.name},${sideViewed}`,componentId:`${itemData.id}.2`});new ViewRportingUtil(componentViewEvent).sendViewReport()},flipCardClasses,()=>`flipcard-inner ${flipDirection}`,()=>`transition: transform ${flipControlData.flipSpeed};`,baseSideClass=>{const gridded=displayConfig.displayType===DisplayType.GRID?"is-gridded":"";return`${baseSideClass} ${flipDirection} ${gridded}`},()=>displayConfig.displayType===DisplayType.GRID?getGridStyles(dimensionConfig,behaviorConfig,displayConfig,$btxStore.currentResolution,$btxStore.isEdgeOrIE11):"",flipFlipcard]}class FlipCardItem extends SvelteComponent{constructor(options){super(),init$6(this,options,instance$i,create_fragment$i,safe_not_equal,{itemData:0,onClick:1,flipFlipcard:7})}get onClick(){return this.$$.ctx[1]}get flipFlipcard(){return this.$$.ctx[7]}}class VideoController{constructor(videoElement,itemData){this.hasVideoStarted=!1,this.isReady=!1,this.currentTime=0,this.duration=0,this.isVideoActivated=!1,this.mediaIsPlaying=!1,this.isMuted=!1,this.videoElement=videoElement,this.store=btxStore$1,this.itemData=itemData}addListeners(){this.videoElement.addEventListener("play",(()=>{this.onPlay()})),this.videoElement.addEventListener("pause",(()=>{this.onPause()})),this.videoElement.addEventListener("timeupdate",(()=>{this.onTimeUpdate()})),this.videoElement.addEventListener("durationchange",(()=>{this.onDurationChange()})),this.videoElement.addEventListener("ended",(()=>{this.onEnded()})),this.videoElement.addEventListener("volumechange",(()=>{this.onVolumeChange()})),this.videoElement.addEventListener("canplay",(()=>{this.onCanPlay()})),this.videoElement.addEventListener("canplaythrough",(()=>{this.onCanPlayThrough()})),this.videoElement.addEventListener("error",(e=>{this.onVideoError(e)})),this.videoElement.addEventListener("durationchange",(e=>{this.store.setValue("totalTime",this.videoElement.duration)}))}togglePlayback(){get_store_value(this.store).isPlaying?this.videoElement.play():this.videoElement.pause()}play(){this.videoElement.play()}pause(){this.videoElement.pause()}toggleMute(){this.isMuted=get_store_value(this.store).isMuted,this.videoElement.muted=this.isMuted}unmute(){this.isMuted=!1,this.videoElement.muted=!1}timeUpdate(seekTime){this.videoElement&&null!=seekTime&&(this.videoElement.currentTime=0===seekTime?seekTime:this.videoElement.currentTime+seekTime)}seekTime(seekTime){this.videoElement&&null!=seekTime&&(this.videoElement.currentTime=seekTime)}onVideoError(e){}onVideoReady(){this.isReady||(this.isReady=!0,this.store.setValue("displayLoadingIconForMediaId",-1),this.isVideoActivated||this.activate())}activate(){this.isReady||this.store.setValue("displayLoadingIconForMediaId",this.itemData.id),get_store_value(this.store).screens[get_store_value(this.store).currentScreenIndex].timeline.duration=this.videoElement.duration,this.isVideoActivated=!0}onCanPlay(){this.onVideoReady(),this.videoElement.removeEventListener("canplay",this.onCanPlay)}onCanPlayThrough(){this.videoElement.removeEventListener("canplaythrough",this.onCanPlayThrough)}onPlay(){this.mediaIsPlaying=!0,this.hasVideoStarted=!0,this.store.setValue("isPlaying",!0),this.store.setValue("isEnded",!1)}onVideoMuted(){this.isMuted=!0,this.store.setValue("isMuted",!0)}onPause(){this.store.setValue("isPlaying",!1),this.mediaIsPlaying=!1}onTimeUpdate(){!this.isReady&&this.videoElement.currentTime>0&&(this.isReady=!0,this.store.setValue("displayLoadingIconForMediaId",-1)),this.currentTime=this.videoElement.currentTime,this.store.setValue("currentTime",this.currentTime),get_store_value(this.store).isEnded&&this.store.setValue("isEnded",!1)}onDurationChange(){this.duration=this.videoElement.duration}onEnded(){this.store.setValue("isPlaying",!1),this.store.setValue("isEnded",!0)}onVolumeChange(){0===this.videoElement.volume&&this.toggleMute(),this.isMuted!==this.videoElement.muted&&(this.isMuted=this.videoElement.muted)}}class VideoReportingUtils{constructor(videoElm,reportingData){this.watchedPercentages={},this.timing={},this.remaining={},this.reportingData={},this.onSeekTime=seekTime=>{0!==seekTime?seekTime>0?this.sendEvent(PolarisEvent.FORWARD_10_SECONDS):this.sendEvent(PolarisEvent.BACK_10_SECONDS):this.sendEvent(PolarisEvent.RESART_VIDEO)},this.onPlay=ev=>{if(this.isValidEvent(ev))if(ev.currentTarget.currentTime<=.01)this.sendEvent(PolarisEvent.BTX_VIDEO_START);else{const event={...this.reportingData,event:PolarisEvent.PLAY_VIDEO};event[PolarisEvent.PLAY_VIDEO]={},trackingStore.sendReport(event)}},this.onPause=ev=>{if(this.isValidEvent(ev))if(ev.currentTarget.ended)this.sendEvent(PolarisEvent.BTX_VIDEO_COMPLETE);else{const event={...this.reportingData,type:PolarisEvent.PAUSE_VIDEO};event[PolarisEvent.PAUSE_VIDEO]={},trackingStore.sendReport(event)}},this.onAdjustVolume=ev=>{if(this.isValidEvent(ev))if(ev.currentTarget.muted){const mutedEvent={...this.reportingData,type:PolarisEvent.MUTE_VIDEO};mutedEvent[PolarisEvent.MUTE_VIDEO]={},trackingStore.sendReport(mutedEvent)}else{const unmuteEvent={...this.reportingData,type:PolarisEvent.UNMUTE_VIDEO},volumeEvent={...this.reportingData,type:PolarisEvent.ADJUST_VOLUME};unmuteEvent[PolarisEvent.UNMUTE_VIDEO]={},volumeEvent[PolarisEvent.ADJUST_VOLUME]={},trackingStore.sendReport(unmuteEvent),trackingStore.sendReport(volumeEvent)}},this.onProgress=ev=>{if(!this.isValidEvent(ev))return;const percentPlayed=ev.currentTarget.currentTime/ev.currentTarget.duration*100;[25,50,75].forEach((threshold=>{if(percentPlayed>=threshold&&!this.watchedPercentages[threshold])switch(this.watchedPercentages[threshold]=!0,threshold){case 25:this.sendEvent(PolarisEvent.BTX_VIDEO_25);break;case 50:this.sendEvent(PolarisEvent.BTX_VIDEO_50);break;case 75:this.sendEvent(PolarisEvent.BTX_VIDEO_75)}})),[1,3,30].forEach((seconds=>{if(ev.currentTarget.currentTime>=seconds&&!this.timing[seconds])switch(this.timing[seconds]=!0,seconds){case 1:this.sendEvent(PolarisEvent.BTX_VIDEO_ONE_SECOND);break;case 3:this.sendEvent(PolarisEvent.BTX_VIDEO_THREE_SECONDS);break;case 30:this.sendEvent(PolarisEvent.BTX_VIDEO_THIRTY_SECONDS)}})),!this.remaining[2]&&ev.currentTarget.duration-ev.currentTarget.currentTime<=2&&(this.remaining[2]=!0,this.sendEvent(PolarisEvent.BTX_VIDEO_COMPLETE_MINUS_TWO_SECONDS))},this.videoElm=videoElm,this.reportingData=reportingData,videoElm&&this.addCallbacks()}addCallbacks(){this.videoElm.addEventListener("play",this.onPlay),this.videoElm.addEventListener("pause",this.onPause),this.videoElm.addEventListener("volumechange",this.onAdjustVolume),this.videoElm.addEventListener("timeupdate",this.onProgress)}isValidEvent(ev){return!!ev.currentTarget&&ev.currentTarget instanceof HTMLMediaElement}sendEvent(type2){const event={type:type2};event[PolarisEvent.BTX_VIDEO]={...this.reportingData,event:type2},trackingStore.sendReport(event)}}function get_each_context$6(ctx,list,i){const child_ctx=ctx.slice();return child_ctx[10]=list[i],child_ctx[12]=i,child_ctx}function create_each_block$6(ctx){let source,source_levels=[{src:ctx[10].url,type:`video/${ctx[10].format}`,codecs:ctx[10].videoCodec}],source_data={};for(let i=0;i<source_levels.length;i+=1)source_data=assign(source_data,source_levels[i]);return{c(){source=element("source"),set_attributes(source,source_data)},m(target,anchor){insert(target,source,anchor)},p(ctx2,dirty){set_attributes(source,source_data=get_spread_update(source_levels,[2&dirty&&{src:ctx2[10].url,type:`video/${ctx2[10].format}`,codecs:ctx2[10].videoCodec}]))},d(detaching){detaching&&detach(source)}}}function create_fragment$h(ctx){let video,track,t,each_value=ensure_array_like(ctx[1]),each_blocks=[];for(let i=0;i<each_value.length;i+=1)each_blocks[i]=create_each_block$6(get_each_context$6(ctx,each_value,i));let video_levels=[ctx[0]],video_data={};for(let i=0;i<video_levels.length;i+=1)video_data=assign(video_data,video_levels[i]);return{c(){video=element("video");for(let i=0;i<each_blocks.length;i+=1)each_blocks[i].c();track=element("track"),t=text("\n    This browser does not support the HTML5 video element."),attr(track,"kind","captions"),set_attributes(video,video_data)},m(target,anchor){insert(target,video,anchor);for(let i=0;i<each_blocks.length;i+=1)each_blocks[i]&&each_blocks[i].m(video,null);append(video,track),append(video,t),ctx[9](video)},p(ctx2,[dirty]){if(2&dirty){let i;for(each_value=ensure_array_like(ctx2[1]),i=0;i<each_value.length;i+=1){const child_ctx=get_each_context$6(ctx2,each_value,i);each_blocks[i]?each_blocks[i].p(child_ctx,dirty):(each_blocks[i]=create_each_block$6(child_ctx),each_blocks[i].c(),each_blocks[i].m(video,track))}for(;i<each_blocks.length;i+=1)each_blocks[i].d(1);each_blocks.length=each_value.length}set_attributes(video,video_data=get_spread_update(video_levels,[1&dirty&&ctx2[0]]))},i:noop,o:noop,d(detaching){detaching&&detach(video),destroy_each(each_blocks,detaching),ctx[9](null)}}}function instance$h($$self,$$props,$$invalidate){let $btxStore;component_subscribe($$self,btxStore$1,($$value=>$$invalidate(8,$btxStore=$$value)));let videoElement,vc,videoReporter,{videoAttrs:videoAttrs={}}=$$props,{videoSources:videoSources=[]}=$$props,{mediaData:mediaData={}}=$$props,{itemData:itemData={}}=$$props,seekTime=-1;return onMount((()=>{const{isMuted:isMuted,isAutoplay:isAutoplay,hasControls:hasControls,isLoop:isLoop,isPreload:isPreload,isPlayOutOfViewEnabled:isPlayOutOfViewEnabled}=mediaData;Object.assign(videoElement,{muted:Boolean(isMuted),controls:Boolean(hasControls),loop:Boolean(isLoop),preload:isPreload?"auto":""}),isAutoplay&&!isPlayOutOfViewEnabled&&Object.assign(videoElement,{autoplay:Boolean(isAutoplay)}),btxStore$1.setValue("isMuted",Boolean(mediaData.isMuted)),videoElement.addEventListener("durationchange",(e=>{btxStore$1.setValue("totalTime",videoElement.duration)})),$$invalidate(5,vc=new VideoController(videoElement,itemData)),vc.addListeners(),btxStore$1.setValue("videoController",vc),setTimeout((()=>{const eventParams={screenId:String(itemData.reportingData.screenId),screenName:itemData.reportingData.screenName,componentId:String(itemData.id),componentType:"Media",componentName:itemData.name};$$invalidate(7,videoReporter=new VideoReportingUtils(videoElement,eventParams))}),0),isPlayOutOfViewEnabled&&VisibilityUtil.addIntersectionObserver((isIntersecting=>{isIntersecting&&videoElement.play()}),videoElement)})),$$self.$$set=$$props2=>{"videoAttrs"in $$props2&&$$invalidate(0,videoAttrs=$$props2.videoAttrs),"videoSources"in $$props2&&$$invalidate(1,videoSources=$$props2.videoSources),"mediaData"in $$props2&&$$invalidate(3,mediaData=$$props2.mediaData),"itemData"in $$props2&&$$invalidate(4,itemData=$$props2.itemData)},$$self.$$.update=()=>{480&$$self.$$.dirty&&(void 0!==$btxStore.isPlaying&&vc&&$btxStore.isPlaying!==vc.mediaIsPlaying&&vc.togglePlayback(),$btxStore.seekTime!==seekTime&&vc&&($$invalidate(6,seekTime=$btxStore.seekTime),vc.timeUpdate(seekTime),videoReporter&&videoReporter.onSeekTime(seekTime),setTimeout((()=>{btxStore$1.setValue("seekTime",-1),$$invalidate(6,seekTime=-1)}),1e3)))},[videoAttrs,videoSources,videoElement,mediaData,itemData,vc,seekTime,videoReporter,$btxStore,function($$value){binding_callbacks[$$value?"unshift":"push"]((()=>{videoElement=$$value,$$invalidate(2,videoElement)}))}]}class VideoContainer extends SvelteComponent{constructor(options){super(),init$6(this,options,instance$h,create_fragment$h,safe_not_equal,{videoAttrs:0,videoSources:1,mediaData:3,itemData:4})}}function create_fragment$g(ctx){let div,videocontainer,current;return videocontainer=new VideoContainer({props:{videoAttrs:ctx[2],videoSources:ctx[1],mediaData:ctx[3],itemData:ctx[0]}}),{c(){div=element("div"),create_component(videocontainer.$$.fragment),attr(div,"class","mediaElContianer video svelte-42n32g")},m(target,anchor){insert(target,div,anchor),mount_component(videocontainer,div,null),current=!0},p(ctx2,[dirty]){const videocontainer_changes={};4&dirty&&(videocontainer_changes.videoAttrs=ctx2[2]),2&dirty&&(videocontainer_changes.videoSources=ctx2[1]),1&dirty&&(videocontainer_changes.itemData=ctx2[0]),videocontainer.$set(videocontainer_changes)},i(local){current||(transition_in(videocontainer.$$.fragment,local),current=!0)},o(local){transition_out(videocontainer.$$.fragment,local),current=!1},d(detaching){detaching&&detach(div),destroy_component(videocontainer)}}}function instance$g($$self,$$props,$$invalidate){var _a,_b,_c,_d,_e,_f,_g,_h;let{itemData:itemData={}}=$$props;const mediaData=itemData.data;let videoSources=[],videoAttrs={};return onMount((()=>{})),$$self.$$set=$$props2=>{"itemData"in $$props2&&$$invalidate(0,itemData=$$props2.itemData)},$$self.$$.update=()=>{if(4081&$$self.$$.dirty){const variations=(null===$$invalidate(5,_b=null===$$invalidate(4,_a=itemData.asset)||void 0===_a?void 0:_a.video)||void 0===_b?void 0:_b.variations)||[];let chosenHeight=1;if(mediaData.isForcingOriginal)chosenHeight=(null===$$invalidate(8,_e=null===$$invalidate(7,_d=null===$$invalidate(6,_c=itemData.asset)||void 0===_c?void 0:_c.video)||void 0===_d?void 0:_d.original)||void 0===_e?void 0:_e.height)||1;else{chosenHeight=null!==$$invalidate(11,_h=null!==$$invalidate(10,_g=null===$$invalidate(9,_f=void 0)||void 0===_f?void 0:_f.height)&&void 0!==_g?_g:itemData.height)&&void 0!==_h?_h:1}$$invalidate(1,videoSources=VideoUtils.getSrcSet(chosenHeight,variations,!1)),$$invalidate(2,videoAttrs=Object.assign(Object.assign(Object.assign(Object.assign({"webkit-playsinline":!0,playsinline:!0,allowfullscreen:!0,controlslist:"nodownload",id:itemData.id.toString(),style:"width: 100%; height: 100%"},mediaData.isMuted?{muted:mediaData.isMuted}:{}),mediaData.isLoop?{loop:mediaData.isLoop}:{}),mediaData.isPreload?{preload:mediaData.isPreload+""}:{}),mediaData.hasControls?{controls:mediaData.hasControls}:{}))}},[itemData,videoSources,videoAttrs,mediaData,_a,_b,_c,_d,_e,_f,_g,_h]}class Video extends SvelteComponent{constructor(options){super(),init$6(this,options,instance$g,create_fragment$g,safe_not_equal,{itemData:0})}}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var vastClient_min={exports:{}};!function(e){function t(e2,t2){var r2=Object.keys(e2);if(Object.getOwnPropertySymbols){var i2=Object.getOwnPropertySymbols(e2);t2&&(i2=i2.filter((function(t3){return Object.getOwnPropertyDescriptor(e2,t3).enumerable}))),r2.push.apply(r2,i2)}return r2}function r(e2){for(var r2=1;r2<arguments.length;r2++){var i2=null!=arguments[r2]?arguments[r2]:{};r2%2?t(Object(i2),!0).forEach((function(t2){s(e2,t2,i2[t2])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e2,Object.getOwnPropertyDescriptors(i2)):t(Object(i2)).forEach((function(t2){Object.defineProperty(e2,t2,Object.getOwnPropertyDescriptor(i2,t2))}))}return e2}function i(e2){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e3){return typeof e3}:function(e3){return e3&&"function"==typeof Symbol&&e3.constructor===Symbol&&e3!==Symbol.prototype?"symbol":typeof e3})(e2)}function n(e2,t2){if(!(e2 instanceof t2))throw new TypeError("Cannot call a class as a function")}function a(e2,t2){for(var r2=0;r2<t2.length;r2++){var i2=t2[r2];i2.enumerable=i2.enumerable||!1,i2.configurable=!0,"value"in i2&&(i2.writable=!0),Object.defineProperty(e2,i2.key,i2)}}function o(e2,t2,r2){return t2&&a(e2.prototype,t2),Object.defineProperty(e2,"prototype",{writable:!1}),e2}function s(e2,t2,r2){return t2 in e2?Object.defineProperty(e2,t2,{value:r2,enumerable:!0,configurable:!0,writable:!0}):e2[t2]=r2,e2}function l(e2,t2){if("function"!=typeof t2&&null!==t2)throw new TypeError("Super expression must either be null or a function");e2.prototype=Object.create(t2&&t2.prototype,{constructor:{value:e2,writable:!0,configurable:!0}}),Object.defineProperty(e2,"prototype",{writable:!1}),t2&&c(e2,t2)}function u(e2){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e3){return e3.__proto__||Object.getPrototypeOf(e3)})(e2)}function c(e2,t2){return(c=Object.setPrototypeOf||function(e3,t3){return e3.__proto__=t3,e3})(e2,t2)}function d(e2,t2){if(t2&&("object"==typeof t2||"function"==typeof t2))return t2;if(void 0!==t2)throw new TypeError("Derived constructors may only return object or undefined");return function(e3){if(void 0===e3)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e3}(e2)}function p(e2){var t2=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e3){return!1}}();return function(){var r2,i2=u(e2);if(t2){var n2=u(this).constructor;r2=Reflect.construct(i2,arguments,n2)}else r2=i2.apply(this,arguments);return d(this,r2)}}function h(e2){return function(e3){if(Array.isArray(e3))return v(e3)}(e2)||function(e3){if("undefined"!=typeof Symbol&&null!=e3[Symbol.iterator]||null!=e3["@@iterator"])return Array.from(e3)}(e2)||function(e3,t2){if(e3){if("string"==typeof e3)return v(e3,t2);var r2=Object.prototype.toString.call(e3).slice(8,-1);return"Object"===r2&&e3.constructor&&(r2=e3.constructor.name),"Map"===r2||"Set"===r2?Array.from(e3):"Arguments"===r2||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r2)?v(e3,t2):void 0}}(e2)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e2,t2){(null==t2||t2>e2.length)&&(t2=e2.length);for(var r2=0,i2=new Array(t2);r2<t2;r2++)i2[r2]=e2[r2];return i2}function f(){var e2=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{id:e2.id||null,adId:e2.adId||null,sequence:e2.sequence||null,apiFramework:e2.apiFramework||null,universalAdIds:[],creativeExtensions:[]}}var m=["ADCATEGORIES","ADCOUNT","ADPLAYHEAD","ADSERVINGID","ADTYPE","APIFRAMEWORKS","APPBUNDLE","ASSETURI","BLOCKEDADCATEGORIES","BREAKMAXADLENGTH","BREAKMAXADS","BREAKMAXDURATION","BREAKMINADLENGTH","BREAKMINDURATION","BREAKPOSITION","CLICKPOS","CLICKTYPE","CLIENTUA","CONTENTID","CONTENTPLAYHEAD","CONTENTURI","DEVICEIP","DEVICEUA","DOMAIN","EXTENSIONS","GDPRCONSENT","IFA","IFATYPE","INVENTORYSTATE","LATLONG","LIMITADTRACKING","MEDIAMIME","MEDIAPLAYHEAD","OMIDPARTNER","PAGEURL","PLACEMENTTYPE","PLAYERCAPABILITIES","PLAYERSIZE","PLAYERSTATE","PODSEQUENCE","REGULATIONS","SERVERSIDE","SERVERUA","TRANSACTIONID","UNIVERSALADID","VASTVERSIONS","VERIFICATIONVENDORS"];function g(e2){var t2=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r2=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i2=[],n2=A(e2);for(var a2 in!t2.ERRORCODE||r2.isCustomCode||/^[0-9]{3}$/.test(t2.ERRORCODE)||(t2.ERRORCODE=900),t2.CACHEBUSTING=E(Math.round(1e8*Math.random())),t2.TIMESTAMP=(new Date).toISOString(),t2.RANDOM=t2.random=t2.CACHEBUSTING,t2)t2[a2]=b(t2[a2]);for(var o2 in n2){var s2=n2[o2];"string"==typeof s2&&i2.push(y(s2,t2))}return i2}function y(e2,t2){var r2=(e2=T(e2,t2)).match(/[^[\]]+(?=])/g);if(!r2)return e2;var i2=r2.filter((function(e3){return m.indexOf(e3)>-1}));return 0===i2.length?e2:T(e2,i2=i2.reduce((function(e3,t3){return e3[t3]=-1,e3}),{}))}function T(e2,t2){var r2=e2;for(var i2 in t2){var n2=t2[i2];r2=r2.replace(new RegExp("(?:\\[|%%)(".concat(i2,")(?:\\]|%%)"),"g"),n2)}return r2}function A(e2){return Array.isArray(e2)?e2.map((function(e3){return e3&&e3.hasOwnProperty("url")?e3.url:e3})):e2}function k(e2,t2){for(var r2=0;r2<t2.length;r2++)if(R(t2[r2],e2))return!0;return!1}function R(e2,t2){if(e2&&t2){var r2=Object.getOwnPropertyNames(e2),i2=Object.getOwnPropertyNames(t2);return r2.length===i2.length&&e2.id===t2.id&&e2.url===t2.url}return!1}function b(e2){return encodeURIComponent(e2).replace(/[!'()*]/g,(function(e3){return"%".concat(e3.charCodeAt(0).toString(16))}))}function E(e2){var t2=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8;return e2.toString().padStart(t2,"0")}var N={track:function(e2,t2,r2){g(e2,t2,r2).forEach((function(e3){"undefined"!=typeof window&&null!==window&&((new Image).src=e3)}))},resolveURLTemplates:g,extractURLsFromTemplates:A,containsTemplateObject:k,isTemplateObjectEqual:R,encodeURIComponentRFC3986:b,replaceUrlMacros:y,isNumeric:function(e2){return!isNaN(parseFloat(e2))&&isFinite(e2)},flatten:function e2(t2){return t2.reduce((function(t3,r2){return t3.concat(Array.isArray(r2)?e2(r2):r2)}),[])},joinArrayOfUniqueTemplateObjs:function(){var e2=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t2=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r2=Array.isArray(e2)?e2:[],i2=Array.isArray(t2)?t2:[];return r2.concat(i2).reduce((function(e3,t3){return k(t3,e3)||e3.push(t3),e3}),[])},isValidTimeValue:function(e2){return Number.isFinite(e2)&&e2>=-2},addLeadingZeros:E};function L(e2){return-1!==["true","TRUE","True","1"].indexOf(e2)}var w={childByName:function(e2,t2){var r2=e2.childNodes;for(var i2 in r2){var n2=r2[i2];if(n2.nodeName===t2)return n2}},childrenByName:function(e2,t2){var r2=[],i2=e2.childNodes;for(var n2 in i2){var a2=i2[n2];a2.nodeName===t2&&r2.push(a2)}return r2},resolveVastAdTagURI:function(e2,t2){if(!t2)return e2;if(0===e2.indexOf("//")){var r2=location.protocol;return"".concat(r2).concat(e2)}if(-1===e2.indexOf("://")){var i2=t2.slice(0,t2.lastIndexOf("/"));return"".concat(i2,"/").concat(e2)}return e2},parseBoolean:L,parseNodeText:function(e2){return e2&&(e2.textContent||e2.text||"").trim()},copyNodeAttribute:function(e2,t2,r2){var i2=t2.getAttribute(e2);i2&&r2.setAttribute(e2,i2)},parseAttributes:function(e2){for(var t2=e2.attributes,r2={},i2=0;i2<t2.length;i2++)r2[t2[i2].nodeName]=t2[i2].nodeValue;return r2},parseDuration:function(e2){if(null==e2)return-1;if(N.isNumeric(e2))return parseInt(e2);var t2=e2.split(":");if(3!==t2.length)return-1;var r2=t2[2].split("."),i2=parseInt(r2[0]);2===r2.length&&(i2+=parseFloat("0.".concat(r2[1])));var n2=parseInt(60*t2[1]),a2=parseInt(60*t2[0]*60);return isNaN(a2)||isNaN(n2)||isNaN(i2)||n2>3600||i2>60?-1:a2+n2+i2},splitVAST:function(e2){var t2=[],r2=null;return e2.forEach((function(i2,n2){if(i2.sequence&&(i2.sequence=parseInt(i2.sequence,10)),i2.sequence>1){var a2=e2[n2-1];if(a2&&a2.sequence===i2.sequence-1)return void(r2&&r2.push(i2));delete i2.sequence}r2=[i2],t2.push(r2)})),t2},assignAttributes:function(e2,t2){if(e2)for(var r2 in e2){var i2=e2[r2];if(i2.nodeName&&i2.nodeValue&&t2.hasOwnProperty(i2.nodeName)){var n2=i2.nodeValue;"boolean"==typeof t2[i2.nodeName]&&(n2=L(n2)),t2[i2.nodeName]=n2}}},mergeWrapperAdData:function(e2,t2){e2.errorURLTemplates=t2.errorURLTemplates.concat(e2.errorURLTemplates),e2.impressionURLTemplates=t2.impressionURLTemplates.concat(e2.impressionURLTemplates),e2.extensions=t2.extensions.concat(e2.extensions),t2.viewableImpression.length>0&&(e2.viewableImpression=[].concat(h(e2.viewableImpression),h(t2.viewableImpression))),e2.followAdditionalWrappers=t2.followAdditionalWrappers,e2.allowMultipleAds=t2.allowMultipleAds,e2.fallbackOnNoAd=t2.fallbackOnNoAd;var r2=(t2.creatives||[]).filter((function(e3){return e3&&"companion"===e3.type})),i2=r2.reduce((function(e3,t3){return(t3.variations||[]).forEach((function(t4){(t4.companionClickTrackingURLTemplates||[]).forEach((function(t5){N.containsTemplateObject(t5,e3)||e3.push(t5)}))})),e3}),[]);e2.creatives=r2.concat(e2.creatives);var n2=t2.videoClickTrackingURLTemplates&&t2.videoClickTrackingURLTemplates.length,a2=t2.videoCustomClickURLTemplates&&t2.videoCustomClickURLTemplates.length;e2.creatives.forEach((function(e3){if(t2.trackingEvents&&t2.trackingEvents[e3.type])for(var r3 in t2.trackingEvents[e3.type]){var o2=t2.trackingEvents[e3.type][r3];Array.isArray(e3.trackingEvents[r3])||(e3.trackingEvents[r3]=[]),e3.trackingEvents[r3]=e3.trackingEvents[r3].concat(o2)}"linear"===e3.type&&(n2&&(e3.videoClickTrackingURLTemplates=e3.videoClickTrackingURLTemplates.concat(t2.videoClickTrackingURLTemplates)),a2&&(e3.videoCustomClickURLTemplates=e3.videoCustomClickURLTemplates.concat(t2.videoCustomClickURLTemplates)),!t2.videoClickThroughURLTemplate||null!==e3.videoClickThroughURLTemplate&&void 0!==e3.videoClickThroughURLTemplate||(e3.videoClickThroughURLTemplate=t2.videoClickThroughURLTemplate)),"companion"===e3.type&&i2.length&&(e3.variations||[]).forEach((function(e4){e4.companionClickTrackingURLTemplates=N.joinArrayOfUniqueTemplateObjs(e4.companionClickTrackingURLTemplates,i2)}))})),t2.adVerifications&&(e2.adVerifications=e2.adVerifications.concat(t2.adVerifications)),t2.blockedAdCategories&&(e2.blockedAdCategories=e2.blockedAdCategories.concat(t2.blockedAdCategories))}};function U(e2,t2){var r2=function(){var e3=f(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{});return{id:e3.id,adId:e3.adId,sequence:e3.sequence,apiFramework:e3.apiFramework,type:"companion",required:null,variations:[]}}(t2);return r2.required=e2.getAttribute("required")||null,r2.variations=w.childrenByName(e2,"Companion").map((function(e3){var t3=function(){var e4=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{id:e4.id||null,adType:"companionAd",width:e4.width||0,height:e4.height||0,assetWidth:e4.assetWidth||null,assetHeight:e4.assetHeight||null,expandedWidth:e4.expandedWidth||null,expandedHeight:e4.expandedHeight||null,apiFramework:e4.apiFramework||null,adSlotID:e4.adSlotID||null,pxratio:e4.pxratio||"1",renderingMode:e4.renderingMode||"default",staticResources:[],htmlResources:[],iframeResources:[],adParameters:null,xmlEncoded:null,altText:null,companionClickThroughURLTemplate:null,companionClickTrackingURLTemplates:[],trackingEvents:{}}}(w.parseAttributes(e3));t3.htmlResources=w.childrenByName(e3,"HTMLResource").reduce((function(e4,t4){var r4=w.parseNodeText(t4);return r4?e4.concat(r4):e4}),[]),t3.iframeResources=w.childrenByName(e3,"IFrameResource").reduce((function(e4,t4){var r4=w.parseNodeText(t4);return r4?e4.concat(r4):e4}),[]),t3.staticResources=w.childrenByName(e3,"StaticResource").reduce((function(e4,t4){var r4=w.parseNodeText(t4);return r4?e4.concat({url:r4,creativeType:t4.getAttribute("creativeType")||null}):e4}),[]),t3.altText=w.parseNodeText(w.childByName(e3,"AltText"))||null;var r3=w.childByName(e3,"TrackingEvents");r3&&w.childrenByName(r3,"Tracking").forEach((function(e4){var r4=e4.getAttribute("event"),i3=w.parseNodeText(e4);r4&&i3&&(Array.isArray(t3.trackingEvents[r4])||(t3.trackingEvents[r4]=[]),t3.trackingEvents[r4].push(i3))})),t3.companionClickTrackingURLTemplates=w.childrenByName(e3,"CompanionClickTracking").map((function(e4){return{id:e4.getAttribute("id")||null,url:w.parseNodeText(e4)}})),t3.companionClickThroughURLTemplate=w.parseNodeText(w.childByName(e3,"CompanionClickThrough"))||null;var i2=w.childByName(e3,"AdParameters");return i2&&(t3.adParameters=w.parseNodeText(i2),t3.xmlEncoded=i2.getAttribute("xmlEncoded")||null),t3})),r2}function C(e2){return"linear"===e2.type}function I(e2,t2){var r2,i2=function(){var e3=f(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{});return{id:e3.id,adId:e3.adId,sequence:e3.sequence,apiFramework:e3.apiFramework,type:"linear",duration:0,skipDelay:null,mediaFiles:[],mezzanine:null,interactiveCreativeFile:null,closedCaptionFiles:[],videoClickThroughURLTemplate:null,videoClickTrackingURLTemplates:[],videoCustomClickURLTemplates:[],adParameters:null,icons:[],trackingEvents:{}}}(t2);i2.duration=w.parseDuration(w.parseNodeText(w.childByName(e2,"Duration")));var n2=e2.getAttribute("skipoffset");if(null==n2)i2.skipDelay=null;else if("%"===n2.charAt(n2.length-1)&&-1!==i2.duration){var a2=parseInt(n2,10);i2.skipDelay=i2.duration*(a2/100)}else i2.skipDelay=w.parseDuration(n2);var o2=w.childByName(e2,"VideoClicks");if(o2){var s2=w.childByName(o2,"ClickThrough");i2.videoClickThroughURLTemplate=s2?{id:s2.getAttribute("id")||null,url:w.parseNodeText(s2)}:null,w.childrenByName(o2,"ClickTracking").forEach((function(e3){i2.videoClickTrackingURLTemplates.push({id:e3.getAttribute("id")||null,url:w.parseNodeText(e3)})})),w.childrenByName(o2,"CustomClick").forEach((function(e3){i2.videoCustomClickURLTemplates.push({id:e3.getAttribute("id")||null,url:w.parseNodeText(e3)})}))}var l2=w.childByName(e2,"AdParameters");l2&&(i2.adParameters=w.parseNodeText(l2)),w.childrenByName(e2,"TrackingEvents").forEach((function(e3){w.childrenByName(e3,"Tracking").forEach((function(e4){var t3=e4.getAttribute("event"),n3=w.parseNodeText(e4);if(t3&&n3){if("progress"===t3){if(!(r2=e4.getAttribute("offset")))return;t3="%"===r2.charAt(r2.length-1)?"progress-".concat(r2):"progress-".concat(Math.round(w.parseDuration(r2)))}Array.isArray(i2.trackingEvents[t3])||(i2.trackingEvents[t3]=[]),i2.trackingEvents[t3].push(n3)}}))})),w.childrenByName(e2,"MediaFiles").forEach((function(e3){w.childrenByName(e3,"MediaFile").forEach((function(e4){i2.mediaFiles.push(function(e5){var t4={id:null,fileURL:null,fileSize:0,deliveryType:"progressive",mimeType:null,mediaType:null,codec:null,bitrate:0,minBitrate:0,maxBitrate:0,width:0,height:0,apiFramework:null,scalable:null,maintainAspectRatio:null};t4.id=e5.getAttribute("id"),t4.fileURL=w.parseNodeText(e5),t4.deliveryType=e5.getAttribute("delivery"),t4.codec=e5.getAttribute("codec"),t4.mimeType=e5.getAttribute("type"),t4.mediaType=e5.getAttribute("mediaType")||"2D",t4.apiFramework=e5.getAttribute("apiFramework"),t4.fileSize=parseInt(e5.getAttribute("fileSize")||0),t4.bitrate=parseInt(e5.getAttribute("bitrate")||0),t4.minBitrate=parseInt(e5.getAttribute("minBitrate")||0),t4.maxBitrate=parseInt(e5.getAttribute("maxBitrate")||0),t4.width=parseInt(e5.getAttribute("width")||0),t4.height=parseInt(e5.getAttribute("height")||0);var r4=e5.getAttribute("scalable");r4&&"string"==typeof r4&&(t4.scalable=w.parseBoolean(r4));var i3=e5.getAttribute("maintainAspectRatio");return i3&&"string"==typeof i3&&(t4.maintainAspectRatio=w.parseBoolean(i3)),t4}(e4))}));var e4,t4,t3=w.childByName(e3,"InteractiveCreativeFile");t3&&(i2.interactiveCreativeFile=(e4=t3,t4=function(){var e5=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:e5.type||null,apiFramework:e5.apiFramework||null,variableDuration:w.parseBoolean(e5.variableDuration),fileURL:null}}(w.parseAttributes(e4)),t4.fileURL=w.parseNodeText(e4),t4));var r3=w.childByName(e3,"ClosedCaptionFiles");r3&&w.childrenByName(r3,"ClosedCaptionFile").forEach((function(e4){var t4=function(){var e5=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:e5.type||null,language:e5.language||null,fileURL:null}}(w.parseAttributes(e4));t4.fileURL=w.parseNodeText(e4),i2.closedCaptionFiles.push(t4)}));var n3,a3,o3,s3=w.childByName(e3,"Mezzanine"),l3=(n3=s3,a3={},o3=!1,["delivery","type","width","height"].forEach((function(e4){n3&&n3.getAttribute(e4)?a3[e4]=n3.getAttribute(e4):o3=!0})),o3?null:a3);if(l3){var u3={id:null,fileURL:null,delivery:null,codec:null,type:null,width:0,height:0,fileSize:0,mediaType:"2D"};u3.id=s3.getAttribute("id"),u3.fileURL=w.parseNodeText(s3),u3.delivery=l3.delivery,u3.codec=s3.getAttribute("codec"),u3.type=l3.type,u3.width=parseInt(l3.width,10),u3.height=parseInt(l3.height,10),u3.fileSize=parseInt(s3.getAttribute("fileSize"),10),u3.mediaType=s3.getAttribute("mediaType")||"2D",i2.mezzanine=u3}}));var u2=w.childByName(e2,"Icons");return u2&&w.childrenByName(u2,"Icon").forEach((function(e3){i2.icons.push(function(e4){var e5,t3={program:null,height:0,width:0,xPosition:0,yPosition:0,apiFramework:null,offset:null,duration:0,type:null,staticResource:null,htmlResource:null,iframeResource:null,pxratio:"1",iconClickThroughURLTemplate:null,iconClickTrackingURLTemplates:[],iconViewTrackingURLTemplate:null};t3.program=e4.getAttribute("program"),t3.height=parseInt(e4.getAttribute("height")||0),t3.width=parseInt(e4.getAttribute("width")||0),t3.xPosition=(e5=e4.getAttribute("xPosition"),-1!==["left","right"].indexOf(e5)?e5:parseInt(e5||0)),t3.yPosition=function(e5){return-1!==["top","bottom"].indexOf(e5)?e5:parseInt(e5||0)}(e4.getAttribute("yPosition")),t3.apiFramework=e4.getAttribute("apiFramework"),t3.pxratio=e4.getAttribute("pxratio")||"1",t3.offset=w.parseDuration(e4.getAttribute("offset")),t3.duration=w.parseDuration(e4.getAttribute("duration")),w.childrenByName(e4,"HTMLResource").forEach((function(e5){t3.type=e5.getAttribute("creativeType")||"text/html",t3.htmlResource=w.parseNodeText(e5)})),w.childrenByName(e4,"IFrameResource").forEach((function(e5){t3.type=e5.getAttribute("creativeType")||0,t3.iframeResource=w.parseNodeText(e5)})),w.childrenByName(e4,"StaticResource").forEach((function(e5){t3.type=e5.getAttribute("creativeType")||0,t3.staticResource=w.parseNodeText(e5)}));var r3=w.childByName(e4,"IconClicks");return r3&&(t3.iconClickThroughURLTemplate=w.parseNodeText(w.childByName(r3,"IconClickThrough")),w.childrenByName(r3,"IconClickTracking").forEach((function(e5){t3.iconClickTrackingURLTemplates.push({id:e5.getAttribute("id")||null,url:w.parseNodeText(e5)})}))),t3.iconViewTrackingURLTemplate=w.parseNodeText(w.childByName(e4,"IconViewTracking")),t3}(e3))})),i2}function x(e2,t2){var r2=function(){var e3=f(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{});return{id:e3.id,adId:e3.adId,sequence:e3.sequence,apiFramework:e3.apiFramework,type:"nonlinear",variations:[],trackingEvents:{}}}(t2);return w.childrenByName(e2,"TrackingEvents").forEach((function(e3){var t3,i2;w.childrenByName(e3,"Tracking").forEach((function(e4){t3=e4.getAttribute("event"),i2=w.parseNodeText(e4),t3&&i2&&(Array.isArray(r2.trackingEvents[t3])||(r2.trackingEvents[t3]=[]),r2.trackingEvents[t3].push(i2))}))})),w.childrenByName(e2,"NonLinear").forEach((function(e3){var t3={id:null,width:0,height:0,expandedWidth:0,expandedHeight:0,scalable:!0,maintainAspectRatio:!0,minSuggestedDuration:0,apiFramework:"static",adType:"nonLinearAd",type:null,staticResource:null,htmlResource:null,iframeResource:null,nonlinearClickThroughURLTemplate:null,nonlinearClickTrackingURLTemplates:[],adParameters:null};t3.id=e3.getAttribute("id")||null,t3.width=e3.getAttribute("width"),t3.height=e3.getAttribute("height"),t3.expandedWidth=e3.getAttribute("expandedWidth"),t3.expandedHeight=e3.getAttribute("expandedHeight"),t3.scalable=w.parseBoolean(e3.getAttribute("scalable")),t3.maintainAspectRatio=w.parseBoolean(e3.getAttribute("maintainAspectRatio")),t3.minSuggestedDuration=w.parseDuration(e3.getAttribute("minSuggestedDuration")),t3.apiFramework=e3.getAttribute("apiFramework"),w.childrenByName(e3,"HTMLResource").forEach((function(e4){t3.type=e4.getAttribute("creativeType")||"text/html",t3.htmlResource=w.parseNodeText(e4)})),w.childrenByName(e3,"IFrameResource").forEach((function(e4){t3.type=e4.getAttribute("creativeType")||0,t3.iframeResource=w.parseNodeText(e4)})),w.childrenByName(e3,"StaticResource").forEach((function(e4){t3.type=e4.getAttribute("creativeType")||0,t3.staticResource=w.parseNodeText(e4)}));var i2=w.childByName(e3,"AdParameters");i2&&(t3.adParameters=w.parseNodeText(i2)),t3.nonlinearClickThroughURLTemplate=w.parseNodeText(w.childByName(e3,"NonLinearClickThrough")),w.childrenByName(e3,"NonLinearClickTracking").forEach((function(e4){t3.nonlinearClickTrackingURLTemplates.push({id:e4.getAttribute("id")||null,url:w.parseNodeText(e4)})})),r2.variations.push(t3)})),r2}function S(e2){var t2=[];return e2.forEach((function(e3){var r2=O(e3);r2&&t2.push(r2)})),t2}function O(e2){if("#comment"===e2.nodeName)return null;var t2,r2={name:null,value:null,attributes:{},children:[]},i2=e2.attributes,n2=e2.childNodes;if(r2.name=e2.nodeName,e2.attributes)for(var a2 in i2)if(i2.hasOwnProperty(a2)){var o2=i2[a2];o2.nodeName&&o2.nodeValue&&(r2.attributes[o2.nodeName]=o2.nodeValue)}for(var s2 in n2)if(n2.hasOwnProperty(s2)){var l2=O(n2[s2]);l2&&r2.children.push(l2)}if(0===r2.children.length||1===r2.children.length&&["#cdata-section","#text"].indexOf(r2.children[0].name)>=0){var u2=w.parseNodeText(e2);""!==u2&&(r2.value=u2),r2.children=[]}return null===(t2=r2).value&&0===Object.keys(t2.attributes).length&&0===t2.children.length?null:r2}function D(e2){var t2=[];return e2.forEach((function(e3){var r2,i2={id:e3.getAttribute("id")||null,adId:V(e3),sequence:e3.getAttribute("sequence")||null,apiFramework:e3.getAttribute("apiFramework")||null},n2=[];w.childrenByName(e3,"UniversalAdId").forEach((function(e4){var t3={idRegistry:e4.getAttribute("idRegistry")||"unknown",value:w.parseNodeText(e4)};n2.push(t3)}));var a2=w.childByName(e3,"CreativeExtensions");for(var o2 in a2&&(r2=S(w.childrenByName(a2,"CreativeExtension"))),e3.childNodes){var s2=e3.childNodes[o2],l2=void 0;switch(s2.nodeName){case"Linear":l2=I(s2,i2);break;case"NonLinearAds":l2=x(s2,i2);break;case"CompanionAds":l2=U(s2,i2)}l2&&(n2&&(l2.universalAdIds=n2),r2&&(l2.creativeExtensions=r2),t2.push(l2))}})),t2}function V(e2){return e2.getAttribute("AdID")||e2.getAttribute("adID")||e2.getAttribute("adId")||null}var P={Wrapper:{subElements:["VASTAdTagURI","Impression"]},BlockedAdCategories:{attributes:["authority"]},InLine:{subElements:["AdSystem","AdTitle","Impression","AdServingId","Creatives"]},Category:{attributes:["authority"]},Pricing:{attributes:["model","currency"]},Verification:{oneOfinLineResources:["JavaScriptResource","ExecutableResource"],attributes:["vendor"]},UniversalAdId:{attributes:["idRegistry"]},JavaScriptResource:{attributes:["apiFramework","browserOptional"]},ExecutableResource:{attributes:["apiFramework","type"]},Tracking:{attributes:["event"]},Creatives:{subElements:["Creative"]},Creative:{subElements:["UniversalAdId"]},Linear:{subElements:["MediaFiles","Duration"]},MediaFiles:{subElements:["MediaFile"]},MediaFile:{attributes:["delivery","type","width","height"]},Mezzanine:{attributes:["delivery","type","width","height"]},NonLinear:{oneOfinLineResources:["StaticResource","IFrameResource","HTMLResource"],attributes:["width","height"]},Companion:{oneOfinLineResources:["StaticResource","IFrameResource","HTMLResource"],attributes:["width","height"]},StaticResource:{attributes:["creativeType"]},Icons:{subElements:["Icon"]},Icon:{oneOfinLineResources:["StaticResource","IFrameResource","HTMLResource"]}};function B(e2,t2){if(P[e2.nodeName]&&P[e2.nodeName].attributes){var r2=P[e2.nodeName].attributes.filter((function(t3){return!e2.getAttribute(t3)}));r2.length>0&&j({name:e2.nodeName,parentName:e2.parentNode.nodeName,attributes:r2},t2)}}function F(e2,t2,r2){var i2=P[e2.nodeName],n2=!r2&&"Wrapper"!==e2.nodeName;if(i2&&!n2){if(i2.subElements){var a2=i2.subElements.filter((function(t3){return!w.childByName(e2,t3)}));a2.length>0&&j({name:e2.nodeName,parentName:e2.parentNode.nodeName,subElements:a2},t2)}r2&&i2.oneOfinLineResources&&(i2.oneOfinLineResources.some((function(t3){return w.childByName(e2,t3)}))||j({name:e2.nodeName,parentName:e2.parentNode.nodeName,oneOfResources:i2.oneOfinLineResources},t2))}}function M(e2){return e2.children&&0!==e2.children.length}function j(e2,t2){var r2=e2.name,i2=e2.parentName,n2=e2.attributes,a2=e2.subElements,o2=e2.oneOfResources,s2="Element '".concat(r2,"'");t2("VAST-warning",{message:s2+=n2?" missing required attribute(s) '".concat(n2.join(", "),"' "):a2?" missing required sub element(s) '".concat(a2.join(", "),"' "):o2?" must provide one of the following '".concat(o2.join(", "),"' "):" is empty",parentElement:i2,specVersion:4.1})}var W={verifyRequiredValues:function e2(t2,r2,i2){if(t2&&t2.nodeName)if("InLine"===t2.nodeName&&(i2=!0),B(t2,r2),M(t2)){F(t2,r2,i2);for(var n2=0;n2<t2.children.length;n2++)e2(t2.children[n2],r2,i2)}else 0===w.parseNodeText(t2).length&&j({name:t2.nodeName,parentName:t2.parentNode.nodeName},r2)},hasSubElements:M,emitMissingValueWarning:j,verifyRequiredAttributes:B,verifyRequiredSubElements:F};function q(e2,t2){var r2=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i2=r2.allowMultipleAds,n2=r2.followAdditionalWrappers,a2=e2.childNodes;for(var o2 in a2){var s2=a2[o2];if(-1!==["Wrapper","InLine"].indexOf(s2.nodeName)&&("Wrapper"!==s2.nodeName||!1!==n2)){if(w.copyNodeAttribute("id",e2,s2),w.copyNodeAttribute("sequence",e2,s2),w.copyNodeAttribute("adType",e2,s2),"Wrapper"===s2.nodeName)return{ad:G(s2,t2),type:"WRAPPER"};if("InLine"===s2.nodeName)return{ad:H(s2,t2,{allowMultipleAds:i2}),type:"INLINE"}}}}function H(e2,t2){return!1===(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).allowMultipleAds&&e2.getAttribute("sequence")?null:_(e2,t2)}function _(e2,t2){var r2=[];t2&&W.verifyRequiredValues(e2,t2);var i2=e2.childNodes,n2=function(){var e3=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{id:e3.id||null,sequence:e3.sequence||null,adType:e3.adType||null,adServingId:null,categories:[],expires:null,viewableImpression:[],system:null,title:null,description:null,advertiser:null,pricing:null,survey:null,errorURLTemplates:[],impressionURLTemplates:[],creatives:[],extensions:[],adVerifications:[],blockedAdCategories:[],followAdditionalWrappers:!0,allowMultipleAds:!1,fallbackOnNoAd:null}}(w.parseAttributes(e2));for(var a2 in i2){var o2=i2[a2];switch(o2.nodeName){case"Error":n2.errorURLTemplates.push(w.parseNodeText(o2));break;case"Impression":n2.impressionURLTemplates.push({id:o2.getAttribute("id")||null,url:w.parseNodeText(o2)});break;case"Creatives":n2.creatives=D(w.childrenByName(o2,"Creative"));break;case"Extensions":var s2=w.childrenByName(o2,"Extension");n2.extensions=S(s2),n2.adVerifications.length||(r2=Y(s2));break;case"AdVerifications":n2.adVerifications=z(w.childrenByName(o2,"Verification"));break;case"AdSystem":n2.system={value:w.parseNodeText(o2),version:o2.getAttribute("version")||null};break;case"AdTitle":n2.title=w.parseNodeText(o2);break;case"AdServingId":n2.adServingId=w.parseNodeText(o2);break;case"Category":n2.categories.push({authority:o2.getAttribute("authority")||null,value:w.parseNodeText(o2)});break;case"Expires":n2.expires=parseInt(w.parseNodeText(o2),10);break;case"ViewableImpression":n2.viewableImpression.push(X(o2));break;case"Description":n2.description=w.parseNodeText(o2);break;case"Advertiser":n2.advertiser={id:o2.getAttribute("id")||null,value:w.parseNodeText(o2)};break;case"Pricing":n2.pricing={value:w.parseNodeText(o2),model:o2.getAttribute("model")||null,currency:o2.getAttribute("currency")||null};break;case"Survey":n2.survey=w.parseNodeText(o2);break;case"BlockedAdCategories":n2.blockedAdCategories.push({authority:o2.getAttribute("authority")||null,value:w.parseNodeText(o2)})}}return r2.length&&(n2.adVerifications=n2.adVerifications.concat(r2)),n2}function G(e2,t2){var r2=_(e2,t2),i2=e2.getAttribute("followAdditionalWrappers"),n2=e2.getAttribute("allowMultipleAds"),a2=e2.getAttribute("fallbackOnNoAd");r2.followAdditionalWrappers=!i2||w.parseBoolean(i2),r2.allowMultipleAds=!!n2&&w.parseBoolean(n2),r2.fallbackOnNoAd=a2?w.parseBoolean(a2):null;var o2=w.childByName(e2,"VASTAdTagURI");if(o2?r2.nextWrapperURL=w.parseNodeText(o2):(o2=w.childByName(e2,"VASTAdTagURL"))&&(r2.nextWrapperURL=w.parseNodeText(w.childByName(o2,"URL"))),r2.creatives.forEach((function(e3){if(-1!==["linear","nonlinear"].indexOf(e3.type)){if(e3.trackingEvents){r2.trackingEvents||(r2.trackingEvents={}),r2.trackingEvents[e3.type]||(r2.trackingEvents[e3.type]={});var t3=function(t4){var i4=e3.trackingEvents[t4];Array.isArray(r2.trackingEvents[e3.type][t4])||(r2.trackingEvents[e3.type][t4]=[]),i4.forEach((function(i5){r2.trackingEvents[e3.type][t4].push(i5)}))};for(var i3 in e3.trackingEvents)t3(i3)}e3.videoClickTrackingURLTemplates&&(Array.isArray(r2.videoClickTrackingURLTemplates)||(r2.videoClickTrackingURLTemplates=[]),e3.videoClickTrackingURLTemplates.forEach((function(e4){r2.videoClickTrackingURLTemplates.push(e4)}))),e3.videoClickThroughURLTemplate&&(r2.videoClickThroughURLTemplate=e3.videoClickThroughURLTemplate),e3.videoCustomClickURLTemplates&&(Array.isArray(r2.videoCustomClickURLTemplates)||(r2.videoCustomClickURLTemplates=[]),e3.videoCustomClickURLTemplates.forEach((function(e4){r2.videoCustomClickURLTemplates.push(e4)})))}})),r2.nextWrapperURL)return r2}function z(e2){var t2=[];return e2.forEach((function(e3){var r2={resource:null,vendor:null,browserOptional:!1,apiFramework:null,type:null,parameters:null,trackingEvents:{}},i2=e3.childNodes;for(var n2 in w.assignAttributes(e3.attributes,r2),i2){var a2=i2[n2];switch(a2.nodeName){case"JavaScriptResource":case"ExecutableResource":r2.resource=w.parseNodeText(a2),w.assignAttributes(a2.attributes,r2);break;case"VerificationParameters":r2.parameters=w.parseNodeText(a2)}}var o2=w.childByName(e3,"TrackingEvents");o2&&w.childrenByName(o2,"Tracking").forEach((function(e4){var t3=e4.getAttribute("event"),i3=w.parseNodeText(e4);t3&&i3&&(Array.isArray(r2.trackingEvents[t3])||(r2.trackingEvents[t3]=[]),r2.trackingEvents[t3].push(i3))})),t2.push(r2)})),t2}function Y(e2){var t2=null,r2=[];return e2.some((function(e3){return t2=w.childByName(e3,"AdVerifications")})),t2&&(r2=z(w.childrenByName(t2,"Verification"))),r2}function X(e2){var t2={};t2.id=e2.getAttribute("id")||null;var r2=e2.childNodes;for(var i2 in r2){var n2=r2[i2],a2=n2.nodeName,o2=w.parseNodeText(n2);if(("Viewable"===a2||"NotViewable"===a2||"ViewUndetermined"===a2)&&o2){var s2=a2.toLowerCase();Array.isArray(t2[s2])||(t2[s2]=[]),t2[s2].push(o2)}}return t2}var K=function(){function e2(){n(this,e2),this._handlers=[]}return o(e2,[{key:"on",value:function(e3,t2){if("function"!=typeof t2)throw new TypeError("The handler argument must be of type Function. Received type ".concat(i(t2)));if(!e3)throw new TypeError("The event argument must be of type String. Received type ".concat(i(e3)));return this._handlers.push({event:e3,handler:t2}),this}},{key:"once",value:function(e3,t2){return this.on(e3,function(e4,t3,r2){var i2={fired:!1,wrapFn:void 0};function n2(){i2.fired||(e4.off(t3,i2.wrapFn),i2.fired=!0,r2.bind(e4).apply(void 0,arguments))}return i2.wrapFn=n2,n2}(this,e3,t2))}},{key:"off",value:function(e3,t2){return this._handlers=this._handlers.filter((function(r2){return r2.event!==e3||r2.handler!==t2})),this}},{key:"emit",value:function(e3){for(var t2=arguments.length,r2=new Array(t2>1?t2-1:0),i2=1;i2<t2;i2++)r2[i2-1]=arguments[i2];var n2=!1;return this._handlers.forEach((function(t3){"*"===t3.event&&(n2=!0,t3.handler.apply(t3,[e3].concat(r2))),t3.event===e3&&(n2=!0,t3.handler.apply(t3,r2))})),n2}},{key:"removeAllListeners",value:function(e3){return e3?(this._handlers=this._handlers.filter((function(t2){return t2.event!==e3})),this):(this._handlers=[],this)}},{key:"listenerCount",value:function(e3){return this._handlers.filter((function(t2){return t2.event===e3})).length}},{key:"listeners",value:function(e3){return this._handlers.reduce((function(t2,r2){return r2.event===e3&&t2.push(r2.handler),t2}),[])}},{key:"eventNames",value:function(){return this._handlers.map((function(e3){return e3.event}))}}]),e2}(),Q={get:function(e2,t2,r2){r2(new Error("Please bundle the library for node to use the node urlHandler"))}},Z=12e4;function J(){try{var e2=new window.XMLHttpRequest;return"withCredentials"in e2?e2:null}catch(e3){return null}}function $(e2,t2,r2){var i2=r2?408:e2.status,n2=r2?"XHRURLHandler: Request timed out after ".concat(e2.timeout," ms (").concat(i2,")"):"XHRURLHandler: ".concat(e2.statusText," (").concat(i2,")");t2(new Error(n2),null,{statusCode:i2})}var ee={get:function(e2,t2,r2){if("https:"===window.location.protocol&&0===e2.indexOf("http://"))return r2(new Error("XHRURLHandler: Cannot go from HTTPS to HTTP."));try{var i2=J();i2.open("GET",e2),i2.timeout=t2.timeout||Z,i2.withCredentials=t2.withCredentials||!1,i2.overrideMimeType&&i2.overrideMimeType("text/xml"),i2.onload=function(){return t3=r2,void(200===(e3=i2).status?t3(null,e3.responseXML,{byteLength:e3.response.length,statusCode:e3.status}):$(e3,t3,!1));var e3,t3},i2.onerror=function(){return $(i2,r2,!1)},i2.onabort=function(){return $(i2,r2,!1)},i2.ontimeout=function(){return $(i2,r2,!0)},i2.send()}catch(e3){r2(new Error("XHRURLHandler: Unexpected error"))}},supported:function(){return!!J()}},te={get:function(e2,t2,r2){return r2||("function"==typeof t2&&(r2=t2),t2={}),"undefined"==typeof window||null===window?Q.get(e2,t2,r2):ee.supported()?ee.get(e2,t2,r2):r2(new Error("Current context is not supported by any of the default URLHandlers. Please provide a custom URLHandler"))}},re=0,ie=0,ne=function(e2,t2){!e2||!t2||e2<=0||t2<=0||(ie=(ie*re+8*e2/t2)/++re)},ae={ERRORCODE:900,extensions:[]},oe=function(e2){l(r2,e2);var t2=p(r2);function r2(){var e3;return n(this,r2),(e3=t2.call(this)).remainingAds=[],e3.parentURLs=[],e3.errorURLTemplates=[],e3.rootErrorURLTemplates=[],e3.maxWrapperDepth=null,e3.URLTemplateFilters=[],e3.fetchingOptions={},e3.parsingOptions={},e3}return o(r2,[{key:"addURLTemplateFilter",value:function(e3){"function"==typeof e3&&this.URLTemplateFilters.push(e3)}},{key:"removeURLTemplateFilter",value:function(){this.URLTemplateFilters.pop()}},{key:"countURLTemplateFilters",value:function(){return this.URLTemplateFilters.length}},{key:"clearURLTemplateFilters",value:function(){this.URLTemplateFilters=[]}},{key:"trackVastError",value:function(e3,t3){for(var r3=arguments.length,i2=new Array(r3>2?r3-2:0),n2=2;n2<r3;n2++)i2[n2-2]=arguments[n2];this.emit("VAST-error",Object.assign.apply(Object,[{},ae,t3].concat(i2))),N.track(e3,t3)}},{key:"getErrorURLTemplates",value:function(){return this.rootErrorURLTemplates.concat(this.errorURLTemplates)}},{key:"getEstimatedBitrate",value:function(){return ie}},{key:"fetchVAST",value:function(e3){var t3=this,r3=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i2=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n2=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return new Promise((function(a2,o2){t3.URLTemplateFilters.forEach((function(t4){e3=t4(e3)})),t3.parentURLs.push(e3);var s2=Date.now();t3.emit("VAST-resolving",{url:e3,previousUrl:i2,wrapperDepth:r3,maxWrapperDepth:t3.maxWrapperDepth,timeout:t3.fetchingOptions.timeout,wrapperAd:n2}),t3.urlHandler.get(e3,t3.fetchingOptions,(function(n3,l2){var u2=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c2=Math.round(Date.now()-s2),d2=Object.assign({url:e3,previousUrl:i2,wrapperDepth:r3,error:n3,duration:c2},u2);t3.emit("VAST-resolved",d2),ne(u2.byteLength,c2),n3?o2(n3):a2(l2)}))}))}},{key:"initParsingStatus",value:function(){var e3=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.errorURLTemplates=[],this.fetchingOptions={timeout:e3.timeout||Z,withCredentials:e3.withCredentials},this.maxWrapperDepth=e3.wrapperLimit||10,this.parentURLs=[],this.parsingOptions={allowMultipleAds:e3.allowMultipleAds},this.remainingAds=[],this.rootErrorURLTemplates=[],this.rootURL="",this.urlHandler=e3.urlHandler||e3.urlhandler||te,this.vastVersion=null,ne(e3.byteLength,e3.requestDuration)}},{key:"getRemainingAds",value:function(e3){var t3=this;if(0===this.remainingAds.length)return Promise.reject(new Error("No more ads are available for the given VAST"));var r3=e3?N.flatten(this.remainingAds):this.remainingAds.shift();return this.errorURLTemplates=[],this.parentURLs=[],this.resolveAds(r3,{wrapperDepth:0,url:this.rootURL}).then((function(e4){return t3.buildVASTResponse(e4)}))}},{key:"getAndParseVAST",value:function(e3){var t3=this,r3=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.initParsingStatus(r3),this.URLTemplateFilters.forEach((function(t4){e3=t4(e3)})),this.rootURL=e3,this.fetchVAST(e3).then((function(i2){return r3.previousUrl=e3,r3.isRootVAST=!0,r3.url=e3,t3.parse(i2,r3).then((function(e4){return t3.buildVASTResponse(e4)}))}))}},{key:"parseVAST",value:function(e3){var t3=this,r3=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.initParsingStatus(r3),r3.isRootVAST=!0,this.parse(e3,r3).then((function(e4){return t3.buildVASTResponse(e4)}))}},{key:"buildVASTResponse",value:function(e3){var t3,r3={ads:(t3={ads:e3,errorURLTemplates:this.getErrorURLTemplates(),version:this.vastVersion}).ads||[],errorURLTemplates:t3.errorURLTemplates||[],version:t3.version||null};return this.completeWrapperResolving(r3),r3}},{key:"parseVastXml",value:function(e3,t3){var r3=t3.isRootVAST,i2=void 0!==r3&&r3,n2=t3.url,a2=void 0===n2?null:n2,o2=t3.wrapperDepth,s2=void 0===o2?0:o2,l2=t3.allowMultipleAds,u2=t3.followAdditionalWrappers;if(!e3||!e3.documentElement||"VAST"!==e3.documentElement.nodeName)throw this.emit("VAST-ad-parsed",{type:"ERROR",url:a2,wrapperDepth:s2}),new Error("Invalid VAST XMLDocument");var c2=[],d2=e3.documentElement.childNodes,p2=e3.documentElement.getAttribute("version");for(var h2 in i2&&p2&&(this.vastVersion=p2),d2){var v2=d2[h2];if("Error"===v2.nodeName){var f2=w.parseNodeText(v2);i2?this.rootErrorURLTemplates.push(f2):this.errorURLTemplates.push(f2)}else if("Ad"===v2.nodeName){if(this.vastVersion&&parseFloat(this.vastVersion)<3)l2=!0;else if(!1===l2&&c2.length>1)break;var m2=q(v2,this.emit.bind(this),{allowMultipleAds:l2,followAdditionalWrappers:u2});m2.ad?(c2.push(m2.ad),this.emit("VAST-ad-parsed",{type:m2.type,url:a2,wrapperDepth:s2,adIndex:c2.length-1,vastVersion:p2})):this.trackVastError(this.getErrorURLTemplates(),{ERRORCODE:101})}}return c2}},{key:"parse",value:function(e3){var t3=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r3=t3.url,i2=void 0===r3?null:r3,n2=t3.resolveAll,a2=void 0===n2||n2,o2=t3.wrapperSequence,s2=void 0===o2?null:o2,l2=t3.previousUrl,u2=void 0===l2?null:l2,c2=t3.wrapperDepth,d2=void 0===c2?0:c2,p2=t3.isRootVAST,h2=void 0!==p2&&p2,v2=t3.followAdditionalWrappers,f2=t3.allowMultipleAds,m2=[];this.vastVersion&&parseFloat(this.vastVersion)<3&&h2&&(f2=!0);try{m2=this.parseVastXml(e3,{isRootVAST:h2,url:i2,wrapperDepth:d2,allowMultipleAds:f2,followAdditionalWrappers:v2})}catch(e4){return Promise.reject(e4)}return 1===m2.length&&null!=s2&&(m2[0].sequence=s2),!1===a2&&(this.remainingAds=w.splitVAST(m2),m2=this.remainingAds.shift()),this.resolveAds(m2,{wrapperDepth:d2,previousUrl:u2,url:i2})}},{key:"resolveAds",value:function(){var e3=this,t3=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r3=arguments.length>1?arguments[1]:void 0,i2=r3.wrapperDepth,n2=r3.previousUrl,a2=r3.url,o2=[];return n2=a2,t3.forEach((function(t4){var r4=e3.resolveWrappers(t4,i2,n2);o2.push(r4)})),Promise.all(o2).then((function(t4){var r4=N.flatten(t4);if(!r4&&e3.remainingAds.length>0){var o3=e3.remainingAds.shift();return e3.resolveAds(o3,{wrapperDepth:i2,previousUrl:n2,url:a2})}return r4}))}},{key:"resolveWrappers",value:function(e3,t3,r3){var i2=this;return new Promise((function(n2){var a2;if(t3++,!e3.nextWrapperURL)return delete e3.nextWrapperURL,n2(e3);if(t3>=i2.maxWrapperDepth||-1!==i2.parentURLs.indexOf(e3.nextWrapperURL))return e3.errorCode=302,delete e3.nextWrapperURL,n2(e3);e3.nextWrapperURL=w.resolveVastAdTagURI(e3.nextWrapperURL,r3),i2.URLTemplateFilters.forEach((function(t4){e3.nextWrapperURL=t4(e3.nextWrapperURL)}));var o2=null!==(a2=i2.parsingOptions.allowMultipleAds)&&void 0!==a2?a2:e3.allowMultipleAds,s2=e3.sequence;i2.fetchVAST(e3.nextWrapperURL,t3,r3,e3).then((function(a3){return i2.parse(a3,{url:e3.nextWrapperURL,previousUrl:r3,wrapperSequence:s2,wrapperDepth:t3,followAdditionalWrappers:e3.followAdditionalWrappers,allowMultipleAds:o2}).then((function(t4){if(delete e3.nextWrapperURL,0===t4.length)return e3.creatives=[],n2(e3);t4.forEach((function(t5){t5&&w.mergeWrapperAdData(t5,e3)})),n2(t4)}))})).catch((function(t4){e3.errorCode=301,e3.errorMessage=t4.message,n2(e3)}))}))}},{key:"completeWrapperResolving",value:function(e3){if(0===e3.ads.length)this.trackVastError(e3.errorURLTemplates,{ERRORCODE:303});else for(var t3=e3.ads.length-1;t3>=0;t3--){var r3=e3.ads[t3];(r3.errorCode||0===r3.creatives.length)&&(this.trackVastError(r3.errorURLTemplates.concat(e3.errorURLTemplates),{ERRORCODE:r3.errorCode||303},{ERRORMESSAGE:r3.errorMessage||""},{extensions:r3.extensions},{system:r3.system}),e3.ads.splice(t3,1))}}}]),r2}(K),se=null,le={data:{},length:0,getItem:function(e2){return this.data[e2]},setItem:function(e2,t2){this.data[e2]=t2,this.length=Object.keys(this.data).length},removeItem:function(e2){delete this.data[e2],this.length=Object.keys(this.data).length},clear:function(){this.data={},this.length=0}},ue=function(){function e2(){n(this,e2),this.storage=this.initStorage()}return o(e2,[{key:"initStorage",value:function(){if(se)return se;try{se="undefined"!=typeof window&&null!==window?window.localStorage||window.sessionStorage:null}catch(e3){se=null}return se&&!this.isStorageDisabled(se)||(se=le).clear(),se}},{key:"isStorageDisabled",value:function(e3){var t2="__VASTStorage__";try{if(e3.setItem(t2,t2),e3.getItem(t2)!==t2)return e3.removeItem(t2),!0}catch(e4){return!0}return e3.removeItem(t2),!1}},{key:"getItem",value:function(e3){return this.storage.getItem(e3)}},{key:"setItem",value:function(e3,t2){return this.storage.setItem(e3,t2)}},{key:"removeItem",value:function(e3){return this.storage.removeItem(e3)}},{key:"clear",value:function(){return this.storage.clear()}}]),e2}(),ce=function(){function e2(t2,r2,i2){n(this,e2),this.cappingFreeLunch=t2||0,this.cappingMinimumTimeInterval=r2||0,this.defaultOptions={withCredentials:!1,timeout:0},this.vastParser=new oe,this.storage=i2||new ue,void 0===this.lastSuccessfulAd&&(this.lastSuccessfulAd=0),void 0===this.totalCalls&&(this.totalCalls=0),void 0===this.totalCallsTimeout&&(this.totalCallsTimeout=0)}return o(e2,[{key:"getParser",value:function(){return this.vastParser}},{key:"lastSuccessfulAd",get:function(){return this.storage.getItem("vast-client-last-successful-ad")},set:function(e3){this.storage.setItem("vast-client-last-successful-ad",e3)}},{key:"totalCalls",get:function(){return this.storage.getItem("vast-client-total-calls")},set:function(e3){this.storage.setItem("vast-client-total-calls",e3)}},{key:"totalCallsTimeout",get:function(){return this.storage.getItem("vast-client-total-calls-timeout")},set:function(e3){this.storage.setItem("vast-client-total-calls-timeout",e3)}},{key:"hasRemainingAds",value:function(){return this.vastParser.remainingAds.length>0}},{key:"getNextAds",value:function(e3){return this.vastParser.getRemainingAds(e3)}},{key:"get",value:function(e3){var t2=this,r2=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i2=Date.now();return(r2=Object.assign({},this.defaultOptions,r2)).hasOwnProperty("resolveAll")||(r2.resolveAll=!1),this.totalCallsTimeout<i2?(this.totalCalls=1,this.totalCallsTimeout=i2+36e5):this.totalCalls++,new Promise((function(n2,a2){if(t2.cappingFreeLunch>=t2.totalCalls)return a2(new Error("VAST call canceled – FreeLunch capping not reached yet ".concat(t2.totalCalls,"/").concat(t2.cappingFreeLunch)));var o2=i2-t2.lastSuccessfulAd;if(o2<0)t2.lastSuccessfulAd=0;else if(o2<t2.cappingMinimumTimeInterval)return a2(new Error("VAST call canceled – (".concat(t2.cappingMinimumTimeInterval,")ms minimum interval reached")));t2.vastParser.getAndParseVAST(e3,r2).then((function(e4){return n2(e4)})).catch((function(e4){return a2(e4)}))}))}}]),e2}(),de=function(e2){l(a2,e2);var t2=p(a2);function a2(e3,r2,i2){var o2,s2=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;for(var l2 in n(this,a2),(o2=t2.call(this)).ad=r2,o2.creative=i2,o2.variation=s2,o2.muted=!1,o2.impressed=!1,o2.skippable=!1,o2.trackingEvents={},o2.lastPercentage=0,o2._alreadyTriggeredQuartiles={},o2.emitAlwaysEvents=["creativeView","start","firstQuartile","midpoint","thirdQuartile","complete","resume","pause","rewind","skip","closeLinear","close"],o2.creative.trackingEvents){var u2=o2.creative.trackingEvents[l2];o2.trackingEvents[l2]=u2.slice(0)}return C(o2.creative)?o2._initLinearTracking():o2._initVariationTracking(),e3&&o2.on("start",(function(){e3.lastSuccessfulAd=Date.now()})),o2}return o(a2,[{key:"_initLinearTracking",value:function(){this.linear=!0,this.skipDelay=this.creative.skipDelay,this.setDuration(this.creative.duration),this.clickThroughURLTemplate=this.creative.videoClickThroughURLTemplate,this.clickTrackingURLTemplates=this.creative.videoClickTrackingURLTemplates}},{key:"_initVariationTracking",value:function(){if(this.linear=!1,this.skipDelay=-1,this.variation){for(var e3 in this.variation.trackingEvents){var t3=this.variation.trackingEvents[e3];this.trackingEvents[e3]?this.trackingEvents[e3]=this.trackingEvents[e3].concat(t3.slice(0)):this.trackingEvents[e3]=t3.slice(0)}"nonLinearAd"===this.variation.adType?(this.clickThroughURLTemplate=this.variation.nonlinearClickThroughURLTemplate,this.clickTrackingURLTemplates=this.variation.nonlinearClickTrackingURLTemplates,this.setDuration(this.variation.minSuggestedDuration)):"companionAd"===this.variation.adType&&(this.clickThroughURLTemplate=this.variation.companionClickThroughURLTemplate,this.clickTrackingURLTemplates=this.variation.companionClickTrackingURLTemplates)}}},{key:"setDuration",value:function(e3){N.isValidTimeValue(e3)&&(this.assetDuration=e3,this.quartiles={firstQuartile:Math.round(25*this.assetDuration)/100,midpoint:Math.round(50*this.assetDuration)/100,thirdQuartile:Math.round(75*this.assetDuration)/100})}},{key:"setProgress",value:function(e3){var t3=this,r2=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(N.isValidTimeValue(e3)&&"object"===i(r2)){var n2=this.skipDelay||-1;if(-1===n2||this.skippable||(n2>e3?this.emit("skip-countdown",n2-e3):(this.skippable=!0,this.emit("skip-countdown",0))),this.assetDuration>0){var a3=Math.round(e3/this.assetDuration*100),o2=[];if(e3>0){o2.push("start");for(var s2=this.lastPercentage;s2<a3;s2++)o2.push("progress-".concat(s2+1,"%"));for(var l2 in o2.push("progress-".concat(Math.round(e3))),this.quartiles)this.isQuartileReached(l2,this.quartiles[l2],e3)&&(o2.push(l2),this._alreadyTriggeredQuartiles[l2]=!0);this.lastPercentage=a3}o2.forEach((function(e4){t3.track(e4,{macros:r2,once:!0})})),e3<this.progress&&this.track("rewind",{macros:r2})}this.progress=e3}}},{key:"isQuartileReached",value:function(e3,t3,r2){var i2=!1;return t3<=r2&&!this._alreadyTriggeredQuartiles[e3]&&(i2=!0),i2}},{key:"setMuted",value:function(e3){var t3=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"boolean"==typeof e3&&"object"===i(t3)&&(this.muted!==e3&&this.track(e3?"mute":"unmute",{macros:t3}),this.muted=e3)}},{key:"setPaused",value:function(e3){var t3=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"boolean"==typeof e3&&"object"===i(t3)&&(this.paused!==e3&&this.track(e3?"pause":"resume",{macros:t3}),this.paused=e3)}},{key:"setFullscreen",value:function(e3){var t3=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"boolean"==typeof e3&&"object"===i(t3)&&(this.fullscreen!==e3&&this.track(e3?"fullscreen":"exitFullscreen",{macros:t3}),this.fullscreen=e3)}},{key:"setExpand",value:function(e3){var t3=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"boolean"==typeof e3&&"object"===i(t3)&&(this.expanded!==e3&&(this.track(e3?"expand":"collapse",{macros:t3}),this.track(e3?"playerExpand":"playerCollapse",{macros:t3})),this.expanded=e3)}},{key:"setSkipDelay",value:function(e3){N.isValidTimeValue(e3)&&(this.skipDelay=e3)}},{key:"trackImpression",value:function(){var e3=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"object"===i(e3)&&(this.impressed||(this.impressed=!0,this.trackURLs(this.ad.impressionURLTemplates,e3),this.track("creativeView",{macros:e3})))}},{key:"error",value:function(){var e3=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t3=arguments.length>1&&void 0!==arguments[1]&&arguments[1];"object"===i(e3)&&"boolean"==typeof t3&&this.trackURLs(this.ad.errorURLTemplates,e3,{isCustomCode:t3})}},{key:"errorWithCode",value:function(e3){var t3=arguments.length>1&&void 0!==arguments[1]&&arguments[1];"string"==typeof e3&&"boolean"==typeof t3&&this.error({ERRORCODE:e3},t3)}},{key:"complete",value:function(){var e3=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"object"===i(e3)&&this.track("complete",{macros:e3})}},{key:"notUsed",value:function(){var e3=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"object"===i(e3)&&(this.track("notUsed",{macros:e3}),this.trackingEvents=[])}},{key:"otherAdInteraction",value:function(){var e3=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"object"===i(e3)&&this.track("otherAdInteraction",{macros:e3})}},{key:"acceptInvitation",value:function(){var e3=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"object"===i(e3)&&this.track("acceptInvitation",{macros:e3})}},{key:"adExpand",value:function(){var e3=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"object"===i(e3)&&this.track("adExpand",{macros:e3})}},{key:"adCollapse",value:function(){var e3=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"object"===i(e3)&&this.track("adCollapse",{macros:e3})}},{key:"minimize",value:function(){var e3=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"object"===i(e3)&&this.track("minimize",{macros:e3})}},{key:"verificationNotExecuted",value:function(e3){var t3=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"==typeof e3&&"object"===i(t3)){if(!this.ad||!this.ad.adVerifications||!this.ad.adVerifications.length)throw new Error("No adVerifications provided");if(!e3)throw new Error("No vendor provided, unable to find associated verificationNotExecuted");var r2=this.ad.adVerifications.find((function(t4){return t4.vendor===e3}));if(!r2)throw new Error("No associated verification element found for vendor: ".concat(e3));var n2=r2.trackingEvents;if(n2&&n2.verificationNotExecuted){var a3=n2.verificationNotExecuted;this.trackURLs(a3,t3),this.emit("verificationNotExecuted",{trackingURLTemplates:a3})}}}},{key:"overlayViewDuration",value:function(e3){var t3=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"string"==typeof e3&&"object"===i(t3)&&(t3.ADPLAYHEAD=e3,this.track("overlayViewDuration",{macros:t3}))}},{key:"close",value:function(){var e3=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"object"===i(e3)&&this.track(this.linear?"closeLinear":"close",{macros:e3})}},{key:"skip",value:function(){var e3=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"object"===i(e3)&&this.track("skip",{macros:e3})}},{key:"load",value:function(){var e3=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"object"===i(e3)&&this.track("loaded",{macros:e3})}},{key:"click",value:function(){var e3=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t3=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((null===e3||"string"==typeof e3)&&"object"===i(t3)){this.clickTrackingURLTemplates&&this.clickTrackingURLTemplates.length&&this.trackURLs(this.clickTrackingURLTemplates,t3);var n2=this.clickThroughURLTemplate||e3,a3=r({},t3);if(n2){this.progress&&(a3.ADPLAYHEAD=this.progressFormatted());var o2=N.resolveURLTemplates([n2],a3)[0];this.emit("clickthrough",o2)}}}},{key:"track",value:function(e3){var t3=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r2=t3.macros,n2=void 0===r2?{}:r2,a3=t3.once,o2=void 0!==a3&&a3;if("object"===i(n2)){"closeLinear"===e3&&!this.trackingEvents[e3]&&this.trackingEvents.close&&(e3="close");var s2=this.trackingEvents[e3],l2=this.emitAlwaysEvents.indexOf(e3)>-1;s2?(this.emit(e3,{trackingURLTemplates:s2}),this.trackURLs(s2,n2)):l2&&this.emit(e3,null),o2&&(delete this.trackingEvents[e3],l2&&this.emitAlwaysEvents.splice(this.emitAlwaysEvents.indexOf(e3),1))}}},{key:"trackURLs",value:function(e3){var t3,i2,a3=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o2=r({},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});this.linear&&(this.creative&&this.creative.mediaFiles&&this.creative.mediaFiles[0]&&this.creative.mediaFiles[0].fileURL&&(o2.ASSETURI=this.creative.mediaFiles[0].fileURL),this.progress&&(o2.ADPLAYHEAD=this.progressFormatted())),null!==(t3=this.creative)&&void 0!==t3&&null!==(i2=t3.universalAdIds)&&void 0!==i2&&i2.length&&(o2.UNIVERSALADID=this.creative.universalAdIds.map((function(e4){return e4.idRegistry.concat(" ",e4.value)})).join(",")),this.ad&&(this.ad.sequence&&(o2.PODSEQUENCE=this.ad.sequence),this.ad.adType&&(o2.ADTYPE=this.ad.adType),this.ad.adServingId&&(o2.ADSERVINGID=this.ad.adServingId),this.ad.categories&&this.ad.categories.length&&(o2.ADCATEGORIES=this.ad.categories.map((function(e4){return e4.value})).join(",")),this.ad.blockedAdCategories&&this.ad.blockedAdCategories.length&&(o2.BLOCKEDADCATEGORIES=this.ad.blockedAdCategories)),N.track(e3,o2,a3)}},{key:"convertToTimecode",value:function(e3){if(!N.isValidTimeValue(e3))return"";var t3=1e3*e3,r2=Math.floor(t3/36e5),i2=Math.floor(t3/6e4%60),n2=Math.floor(t3/1e3%60),a3=Math.floor(t3%1e3);return"".concat(N.addLeadingZeros(r2,2),":").concat(N.addLeadingZeros(i2,2),":").concat(N.addLeadingZeros(n2,2),".").concat(N.addLeadingZeros(a3,3))}},{key:"progressFormatted",value:function(){return this.convertToTimecode(this.progress)}}]),a2}(K);e.VASTClient=ce,e.VASTParser=oe,e.VASTTracker=de,Object.defineProperty(e,"__esModule",{value:!0})}(vastClient_min.exports);var vastClient_minExports=vastClient_min.exports;class VASTVideoUtils{static async parseVAST(url2){try{if(""===url2)return;return await(new vastClient_minExports.VASTParser).getAndParseVAST(url2)}catch(error){throw error}}static getVASTMediaFiles(mediaData){try{const VASTMediaFiles=[];if(!mediaData.VASTResponse)return[];const ad=mediaData.VASTResponse.ads[0];return ad.creatives[0].mediaFiles.forEach((file=>{const mediaInfo={audioCodec:"",format:(file.mimeType||"").split("/")[1],height:file.height||1,size:file.fileSize||1,thumbnail:"",url:file.fileURL,videoCodec:file.codec||"",width:file.width||1};VASTMediaFiles.push(mediaInfo)})),VASTMediaFiles}catch(error){throw error}}static async parseAndGetVASTMediaFiles(url2){if(""===url2)return[];const VASTResponse=await VASTVideoUtils.parseVAST(url2);return VASTVideoUtils.getVASTMediaFiles({VASTResponse:VASTResponse})}}function create_if_block$6(ctx){let a,img,img_src_value,img_width_value,img_height_value,img_alt_value,img_title_value,a_href_value;return{c(){a=element("a"),img=element("img"),src_url_equal(img.src,img_src_value=ctx[0].staticResource)||attr(img,"src",img_src_value),attr(img,"width",img_width_value=ctx[0].width),attr(img,"height",img_height_value=ctx[0].height),attr(img,"alt",img_alt_value=ctx[0].program+" icon"),attr(img,"title",img_title_value=ctx[0].program+" icon"),attr(a,"target","_blank"),attr(a,"rel","noreferrer"),attr(a,"href",a_href_value=ctx[0].iconClickThroughURLTemplate)},m(target,anchor){insert(target,a,anchor),append(a,img)},p(ctx2,dirty){1&dirty&&!src_url_equal(img.src,img_src_value=ctx2[0].staticResource)&&attr(img,"src",img_src_value),1&dirty&&img_width_value!==(img_width_value=ctx2[0].width)&&attr(img,"width",img_width_value),1&dirty&&img_height_value!==(img_height_value=ctx2[0].height)&&attr(img,"height",img_height_value),1&dirty&&img_alt_value!==(img_alt_value=ctx2[0].program+" icon")&&attr(img,"alt",img_alt_value),1&dirty&&img_title_value!==(img_title_value=ctx2[0].program+" icon")&&attr(img,"title",img_title_value),1&dirty&&a_href_value!==(a_href_value=ctx2[0].iconClickThroughURLTemplate)&&attr(a,"href",a_href_value)},d(detaching){detaching&&detach(a)}}}function create_fragment$f(ctx){let div,if_block=ctx[1]&&create_if_block$6(ctx);return{c(){div=element("div"),if_block&&if_block.c(),attr(div,"style",ctx[2]),attr(div,"class","vast-icon-image svelte-1vcjusw")},m(target,anchor){insert(target,div,anchor),if_block&&if_block.m(div,null)},p(ctx2,[dirty]){ctx2[1]?if_block?if_block.p(ctx2,dirty):(if_block=create_if_block$6(ctx2),if_block.c(),if_block.m(div,null)):if_block&&(if_block.d(1),if_block=null)},i:noop,o:noop,d(detaching){detaching&&detach(div),if_block&&if_block.d()}}}function instance$f($$self,$$props,$$invalidate){let $btxStore;component_subscribe($$self,btxStore$1,($$value=>$$invalidate(5,$btxStore=$$value)));let{icon:icon={}}=$$props,{currentTime:currentTime=0}=$$props,isIconVisible=!0,hasImpressionFired=!1;const styles=(()=>{const xValue="number"==typeof icon.xPosition?`${icon.xPosition}px`:"0px",yValue="number"==typeof icon.yPosition?`${icon.yPosition}px`:"0px";return`width: ${icon.width}px; height: ${icon.height}px; ${"right"===icon.xPosition?"right":"left"}: ${xValue}; ${"bottom"===icon.yPosition?"bottom":"top"}: ${yValue};`})();return onMount((()=>{})),$$self.$$set=$$props2=>{"icon"in $$props2&&$$invalidate(0,icon=$$props2.icon),"currentTime"in $$props2&&$$invalidate(4,currentTime=$$props2.currentTime)},$$self.$$.update=()=>{if(49&$$self.$$.dirty){const offset=icon.offset||0;$btxStore.isPlayerVisible&&currentTime>=offset&&currentTime<offset+icon.duration&&($$invalidate(1,isIconVisible=!0),(()=>{if(hasImpressionFired)return;(new Image).src=icon.iconViewTrackingURLTemplate||"",hasImpressionFired=!0})()),$$invalidate(1,isIconVisible=!1)}},[icon,isIconVisible,styles,{},currentTime,$btxStore]}class VASTIcon extends SvelteComponent{constructor(options){super(),init$6(this,options,instance$f,create_fragment$f,safe_not_equal,{itemData:3,icon:0,currentTime:4})}get itemData(){return this.$$.ctx[3]}}function get_each_context$5(ctx,list,i){const child_ctx=ctx.slice();return child_ctx[13]=list[i],child_ctx}function create_each_block$5(ctx){let vasticon,current;return vasticon=new VASTIcon({props:{icon:ctx[13]}}),{c(){create_component(vasticon.$$.fragment)},m(target,anchor){mount_component(vasticon,target,anchor),current=!0},p:noop,i(local){current||(transition_in(vasticon.$$.fragment,local),current=!0)},o(local){transition_out(vasticon.$$.fragment,local),current=!1},d(detaching){destroy_component(vasticon,detaching)}}}function create_fragment$e(ctx){let div,videocontainer,t,current;videocontainer=new VideoContainer({props:{videoAttrs:ctx[1],videoSources:ctx[2],mediaData:ctx[3],itemData:ctx[0]}});let each_value=ensure_array_like(ctx[4]),each_blocks=[];for(let i=0;i<each_value.length;i+=1)each_blocks[i]=create_each_block$5(get_each_context$5(ctx,each_value,i));const out=i=>transition_out(each_blocks[i],1,1,(()=>{each_blocks[i]=null}));return{c(){div=element("div"),create_component(videocontainer.$$.fragment),t=space();for(let i=0;i<each_blocks.length;i+=1)each_blocks[i].c();attr(div,"class","mediaElContianer svelte-42n32g")},m(target,anchor){insert(target,div,anchor),mount_component(videocontainer,div,null),append(div,t);for(let i=0;i<each_blocks.length;i+=1)each_blocks[i]&&each_blocks[i].m(div,null);current=!0},p(ctx2,[dirty]){const videocontainer_changes={};if(2&dirty&&(videocontainer_changes.videoAttrs=ctx2[1]),4&dirty&&(videocontainer_changes.videoSources=ctx2[2]),1&dirty&&(videocontainer_changes.itemData=ctx2[0]),videocontainer.$set(videocontainer_changes),16&dirty){let i;for(each_value=ensure_array_like(ctx2[4]),i=0;i<each_value.length;i+=1){const child_ctx=get_each_context$5(ctx2,each_value,i);each_blocks[i]?(each_blocks[i].p(child_ctx,dirty),transition_in(each_blocks[i],1)):(each_blocks[i]=create_each_block$5(child_ctx),each_blocks[i].c(),transition_in(each_blocks[i],1),each_blocks[i].m(div,null))}for(group_outros(),i=each_value.length;i<each_blocks.length;i+=1)out(i);check_outros()}},i(local){if(!current){transition_in(videocontainer.$$.fragment,local);for(let i=0;i<each_value.length;i+=1)transition_in(each_blocks[i]);current=!0}},o(local){transition_out(videocontainer.$$.fragment,local),each_blocks=each_blocks.filter(Boolean);for(let i=0;i<each_blocks.length;i+=1)transition_out(each_blocks[i]);current=!1},d(detaching){detaching&&detach(div),destroy_component(videocontainer),destroy_each(each_blocks,detaching)}}}function instance$e($$self,$$props,$$invalidate){var _a,_b,_c,_d,_e,_f;let{itemData:itemData={}}=$$props;const mediaData=itemData.data,vastIcons=(null===(_c=null===(_b=null===(_a=mediaData.VASTResponse)||void 0===_a?void 0:_a.ads[0])||void 0===_b?void 0:_b.creatives[0])||void 0===_c?void 0:_c.icons)||[],trackingEvents=(null===(_f=null===(_e=null===(_d=mediaData.VASTResponse)||void 0===_d?void 0:_d.ads[0])||void 0===_e?void 0:_e.creatives[0])||void 0===_f?void 0:_f.trackingEvents)||{};let videoAttrs={},videoSources=[];return onMount((()=>{trackingStore.addthirdPartyEvents(trackingEvents)})),$$self.$$set=$$props2=>{"itemData"in $$props2&&$$invalidate(0,itemData=$$props2.itemData)},$$self.$$.update=()=>{if(1&$$self.$$.dirty){const{height:height=1}={};$$invalidate(2,videoSources=VideoUtils.getSrcSet(height,VASTVideoUtils.getVASTMediaFiles(mediaData),!0)),$$invalidate(1,videoAttrs={"webkit-playsinline":!0,playsinline:!0,allowfullscreen:!0,controlslist:"nodownload",muted:mediaData.isMuted,loop:mediaData.isLoop,preload:mediaData.isPreload+"",id:itemData.id.toString(),controls:mediaData.hasControls,style:"width: 100%; height: 100%"})}},[itemData,videoAttrs,videoSources,mediaData,vastIcons]}class VASTVideo extends SvelteComponent{constructor(options){super(),init$6(this,options,instance$e,create_fragment$e,safe_not_equal,{itemData:0})}}class VPAIDPlayerController{constructor(vpaidData,slotId,onReportingEvent,isAutoplay=!0,onClickthrough,onInteractionClick,eventParams={}){this.isValidVPAID=()=>{const requiredMethods=["handshakeVersion","initAd","startAd","stopAd","skipAd","resizeAd","pauseAd","resumeAd","expandAd","collapseAd","subscribe","unsubscribe"];for(const method of requiredMethods){const prop=this.creative[method];if(!prop||"function"!=typeof prop)return!1}return!0},this.setCallbacksForCreative=()=>{for(let event in this.eventListeners)this.creative.subscribe(this.eventListeners[event],event,this)},this.dispatchEvent=event=>{this.onReportingEvent(event)},this.onStartAd=()=>{this.dispatchEvent({type:"adStarted"})},this.onStopAd=()=>{this.dispatchEvent({type:"adStopped"})},this.onSkipAd=()=>this.unused,this.onAdLoaded=()=>{this.dispatchEvent({type:"adLoaded"}),this.isAutoplay&&this.startAd()},this.onAdLinearChange=()=>this.unused,this.onAdSizeChange=()=>{this.dispatchEvent({type:"adResized"})},this.onAdExpandedChange=()=>this.unused,this.onAdSkippableStateChange=()=>this.unused,this.onAdDurationChange=()=>this.unused,this.onAdRemainingTimeChange=()=>this.unused,this.onAdVolumeChange=()=>this.unused,this.onAdImpression=()=>this.unused,this.onAdVideoStart=()=>this.unused,this.onAdVideoFirstQuartile=()=>{this.dispatchEvent({type:"AdVideoFirstQuartile"})},this.onAdVideoMidpoint=()=>{this.dispatchEvent({type:"onAdVideoMidpoint"})},this.onAdVideoThirdQuartile=()=>{this.dispatchEvent({type:"onAdVideoThirdQuartile"})},this.onAdVideoComplete=()=>this.unused,this.onAdUserAcceptInvitation=()=>this.unused,this.onAdUserMinimize=()=>this.unused,this.onAdUserClose=()=>this.unused,this.onAdPaused=()=>{this.dispatchEvent({type:PolarisEvent.PAUSE_VIDEO})},this.onAdPlaying=()=>{this.dispatchEvent({type:PolarisEvent.RESUME_VIDEO})},this.onAdClickThru=(url2,id,playerHandles)=>{playerHandles&&this.onClickthrough(url2,id)},this.onAdInteraction=id=>{this.onInteractionClick(id)},this.onAdError=message=>{},this.onAdLog=id=>{},this.vpaidData=vpaidData,this.onReportingEvent=onReportingEvent,this.onClickthrough=onClickthrough,this.onInteractionClick=onInteractionClick,this.isAutoplay=isAutoplay,this.eventParams=eventParams,this.eventListeners={AdStarted:this.onStartAd,AdStopped:this.onStopAd,AdSkipped:this.onSkipAd,AdLoaded:this.onAdLoaded,AdLinearChange:this.onAdLinearChange,AdSizeChange:this.onAdSizeChange,AdExpandedChange:this.onAdExpandedChange,AdSkippableStateChange:this.onAdSkippableStateChange,AdDurationChange:this.onAdDurationChange,AdRemainingTimeChange:this.onAdRemainingTimeChange,AdVolumeChange:this.onAdVolumeChange,AdImpression:this.onAdImpression,AdClickThru:this.onAdClickThru,AdInteraction:this.onAdInteraction,AdVideoStart:this.onAdVideoStart,AdVideoFirstQuartile:this.onAdVideoFirstQuartile,AdVideoMidpoint:this.onAdVideoMidpoint,AdVideoThirdQuartile:this.onAdVideoThirdQuartile,AdVideoComplete:this.onAdVideoComplete,AdUserAcceptInvitation:this.onAdUserAcceptInvitation,AdUserMinimize:this.onAdUserMinimize,AdUserClose:this.onAdUserClose,AdPaused:this.onAdPaused,AdPlaying:this.onAdPlaying,AdError:this.onAdError,AdLog:this.onAdLog},this.loadScript(slotId)}loadScript(slotId){const script=document.createElement("script");script.onload=()=>{const fn=window.getVPAIDAd;if(fn&&"function"==typeof fn){if(this.creative=fn(),!this.isValidVPAID())return;this.setCallbacksForCreative(),this.initAd(slotId)}},script.src=this.vpaidData.url,script.type="text/javascript",document.head.appendChild(script)}initAd(slotId){const videoEl=document.getElementById(slotId+"video");videoEl.style.width="100%",videoEl.style.height="100%";const environmentVars={slot:document.getElementById("slot"+slotId),videoSlot:videoEl,videoSlotCanAutoPlay:!1};new VideoReportingUtils(videoEl,this.eventParams);const parsedAdParameters=(new DOMParser).parseFromString(this.vpaidData.adParameters.value,"text/html").documentElement.textContent;this.creative.initAd(document.documentElement.clientWidth,document.documentElement.clientHeight,"normal",null,{AdParameters:parsedAdParameters},environmentVars)}startAd(){this.creative.startAd()}handshakeVersion(playerVPAIDVersion){throw new Error("Method not implemented.")}stopAd(){this.creative.stopAd()}skipAd(){this.creative.skipAd()}resizeAd(width,height,viewMode){this.creative.resizeAd(width,height,viewMode)}pauseAd(){this.creative.pauseAd()}resumeAd(){this.creative.resumeAd()}expandAd(){this.creative.expandAd()}collapseAd(){this.creative.collapseAd()}subscribe(fn,event,listenerScope){throw new Error("Method not implemented.")}unsubscribe(fn,event){throw new Error("Method not implemented.")}getAdLinear(){return this.creative.getAdLinear()}getAdWidth(){throw new Error("Method not implemented.")}getAdHeight(){throw new Error("Method not implemented.")}getAdExpanded(){return this.creative.getAdExpanded()}getAdSkippableState(){return this.creative.getAdSkippableState()}getAdRemainingTime(){return this.creative.getAdRemainingTime()}getAdDuration(){return this.creative.adDuration||this.creative.getAdDuration()}getAdCompanions(){throw new Error("Method not implemented.")}getAdIcons(){throw new Error("Method not implemented.")}getAdVolume(){throw new Error("Method not implemented.")}setAdVolume(volume){this.creative.setAdVolume(volume)}mute(){this.setAdVolume(0)}unused(){throw new Error("Callback not implemented.")}}function create_fragment$d(ctx){let div,videocontainer,div_id_value,current;return videocontainer=new VideoContainer({props:{videoAttrs:ctx[1],mediaData:ctx[2],itemData:ctx[0]}}),{c(){div=element("div"),create_component(videocontainer.$$.fragment),attr(div,"id",div_id_value="slot"+ctx[0].id),attr(div,"class","mediaElContianer vpaid svelte-42n32g")},m(target,anchor){insert(target,div,anchor),mount_component(videocontainer,div,null),current=!0},p(ctx2,[dirty]){const videocontainer_changes={};2&dirty&&(videocontainer_changes.videoAttrs=ctx2[1]),1&dirty&&(videocontainer_changes.itemData=ctx2[0]),videocontainer.$set(videocontainer_changes),(!current||1&dirty&&div_id_value!==(div_id_value="slot"+ctx2[0].id))&&attr(div,"id",div_id_value)},i(local){current||(transition_in(videocontainer.$$.fragment,local),current=!0)},o(local){transition_out(videocontainer.$$.fragment,local),current=!1},d(detaching){detaching&&detach(div),destroy_component(videocontainer)}}}function instance$d($$self,$$props,$$invalidate){let{itemData:itemData={}}=$$props;const mediaData=itemData.data;let videoAttrs={};function sendReport2(event){if(!mediaData||!mediaData.reportParams)return void trackingStore$1.sendReport(event);mediaData.reportParams.split("&").forEach((param=>{const kvp=param.split("=");event[kvp[0]]=kvp[1]})),trackingStore$1.sendReport(event)}function completeClick(event){switch(event.type){case ClickAreaDataType.CLICK_THRU:event.value&&window.open(event.value,"_blank");break;case ClickAreaDataType.EVENT:event.value&&trackingStore$1.sendReport(event)}}return onMount((()=>{const creative=mediaData.VASTResponse.ads[0].creatives[0];creative.mediaFiles.forEach((file=>{var _a,_b,_c;const mediaInfo={audioCodec:"",format:null!==(_b=null===(_a=file.mimeType)||void 0===_a?void 0:_a.split("/")[1])&&void 0!==_b?_b:"",height:file.height||1,size:file.fileSize||1,thumbnail:"",url:file.fileURL,videoCodec:null!==(_c=file.codec)&&void 0!==_c?_c:"",width:file.width||1},vpaidInfo=Object.assign(Object.assign(Object.assign({},mediaInfo),file),creative),eventParams={screenId:String(itemData.reportingData.screenId),screenName:itemData.reportingData.screenName,componentId:String(itemData.id),componentType:"Media",componentName:itemData.name};new VPAIDPlayerController(vpaidInfo,itemData.id,sendReport2,mediaData.isAutoplay,((url2,id)=>{completeClick({type:ClickAreaDataType.CLICK_THRU,value:url2})}),(id=>{completeClick({type:ClickAreaDataType.EVENT,value:id})}),eventParams)}))})),$$self.$$set=$$props2=>{"itemData"in $$props2&&$$invalidate(0,itemData=$$props2.itemData)},$$self.$$.update=()=>{1&$$self.$$.dirty&&$$invalidate(1,videoAttrs={"webkit-playsinline":!0,playsinline:!0,allowfullscreen:!0,controlslist:"nodownload",muted:mediaData.isMuted||!1,loop:mediaData.isLoop||!1,preload:mediaData.isPreload?"auto":"",id:itemData.id+"video",controls:mediaData.hasControls||!1,style:"width: 100%; height: 100%",autoplay:mediaData.isAutoplay||!1})},[itemData,videoAttrs,mediaData]}class VPAID extends SvelteComponent{constructor(options){super(),init$6(this,options,instance$d,create_fragment$d,safe_not_equal,{itemData:0})}}function create_fragment$c(ctx){let div,switch_instance,current;var switch_value=ctx[1];function switch_props(ctx2,dirty){return{props:{itemData:ctx2[0]}}}return switch_value&&(switch_instance=construct_svelte_component(switch_value,switch_props(ctx))),{c(){div=element("div"),switch_instance&&create_component(switch_instance.$$.fragment),attr(div,"class","mediaContainer svelte-plirjt")},m(target,anchor){insert(target,div,anchor),switch_instance&&mount_component(switch_instance,div,null),current=!0},p(ctx2,[dirty]){if(2&dirty&&switch_value!==(switch_value=ctx2[1])){if(switch_instance){group_outros();const old_component=switch_instance;transition_out(old_component.$$.fragment,1,0,(()=>{destroy_component(old_component,1)})),check_outros()}switch_value?(switch_instance=construct_svelte_component(switch_value,switch_props(ctx2)),create_component(switch_instance.$$.fragment),transition_in(switch_instance.$$.fragment,1),mount_component(switch_instance,div,null)):switch_instance=null}else if(switch_value){const switch_instance_changes={};1&dirty&&(switch_instance_changes.itemData=ctx2[0]),switch_instance.$set(switch_instance_changes)}},i(local){current||(switch_instance&&transition_in(switch_instance.$$.fragment,local),current=!0)},o(local){switch_instance&&transition_out(switch_instance.$$.fragment,local),current=!1},d(detaching){detaching&&detach(div),switch_instance&&destroy_component(switch_instance)}}}function instance$c($$self,$$props,$$invalidate){let{itemData:itemData={}}=$$props,isVASTVideo=!1,isVPAID=!1,mediaType=Video;return onMount((()=>{const VASTData=itemData.data.VASTResponse;if(isVASTVideo=Boolean(VASTData),isVASTVideo){const{ads:ads=[]}=VASTData,hasAdCreatives=ads.length>0&&ads[0].creatives.length>0;isVPAID=hasAdCreatives&&ads[0].creatives[0].mediaFiles.every((file=>"VPAID"===(null==file?void 0:file.apiFramework))),$$invalidate(1,mediaType=isVPAID?VPAID:VASTVideo)}})),$$self.$$set=$$props2=>{"itemData"in $$props2&&$$invalidate(0,itemData=$$props2.itemData)},[itemData,mediaType]}class Media extends SvelteComponent{constructor(options){super(),init$6(this,options,instance$c,create_fragment$c,safe_not_equal,{itemData:0})}}const isQuickPreview=(timeout=1e3)=>{const postMessageData={type:"quickPreviewCheck",currentBTXPlayerState:btxStore$1.getCurrentPlayerState()};return new Promise((resolve=>{const onMessage=event=>{"quick-preview-check-response"===event.data.type&&(window.removeEventListener("message",onMessage),clearTimeout(timeoutId),btxStore$1.setValue("isLoadingInQuickPreview",event.data.isQuickPreview),resolve(event.data.isQuickPreview))};window.addEventListener("message",onMessage);try{window.parent.postMessage(postMessageData,"*")}catch(e){window.removeEventListener("message",onMessage),resolve(!1)}const timeoutId=setTimeout((()=>{window.removeEventListener("message",onMessage),resolve(!1)}),timeout)}))};function create_fragment$b(ctx){let div;return{c(){div=element("div")},m(target,anchor){insert(target,div,anchor)},p:noop,i:noop,o:noop,d(detaching){detaching&&detach(div)}}}function instance$b($$self,$$props,$$invalidate){let $btxStore;component_subscribe($$self,btxStore$1,($$value=>$$invalidate(1,$btxStore=$$value)));var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};let{itemData:itemData={}}=$$props;return onMount((()=>__awaiter(void 0,void 0,void 0,(function*(){if($btxStore.isLoadingInQuickPreview||(yield isQuickPreview()))try{itemData.asset&&window.parent.postMessage({type:"loadParallaxBackground"},"*")}catch(error){}})))),$$self.$$set=$$props2=>{"itemData"in $$props2&&$$invalidate(0,itemData=$$props2.itemData)},[itemData]}class ParallaxBackground extends SvelteComponent{constructor(options){super(),init$6(this,options,instance$b,create_fragment$b,safe_not_equal,{itemData:0})}}function create_fragment$a(ctx){let div2,div0,t,div1;return{c(){div2=element("div"),div0=element("div"),t=space(),div1=element("div"),attr(div0,"class","progress_control duration svelte-256onn"),attr(div1,"class","progress_control played svelte-256onn"),set_style(div1,"width",ctx[0]+"%"),attr(div2,"class","progress_control_container flex5 svelte-256onn")},m(target,anchor){insert(target,div2,anchor),append(div2,div0),append(div2,t),append(div2,div1),ctx[4](div2)},p(ctx2,[dirty]){1&dirty&&set_style(div1,"width",ctx2[0]+"%")},i:noop,o:noop,d(detaching){detaching&&detach(div2),ctx[4](null)}}}function instance$a($$self,$$props,$$invalidate){let $btxStore;component_subscribe($$self,btxStore$1,($$value=>$$invalidate(3,$btxStore=$$value)));let progressBarContainer,{isSeekable:isSeekable=!1}=$$props,playWidth=20;const seek=evt=>{const rect=progressBarContainer.getBoundingClientRect(),percentage=(evt.pageX-rect.left)/rect.width;btxStore$1.setValue("seekTime",percentage*$btxStore.totalTime-$btxStore.currentTime)};return onMount((()=>{isSeekable&&(progressBarContainer.addEventListener("click",seek),progressBarContainer.classList.add("clickable"))})),$$self.$$set=$$props2=>{"isSeekable"in $$props2&&$$invalidate(2,isSeekable=$$props2.isSeekable)},$$self.$$.update=()=>{8&$$self.$$.dirty&&$$invalidate(0,playWidth=$btxStore.currentTime/($btxStore.screens[$btxStore.currentScreenIndex].timeline.duration||1)*100)},[playWidth,progressBarContainer,isSeekable,$btxStore,function($$value){binding_callbacks[$$value?"unshift":"push"]((()=>{progressBarContainer=$$value,$$invalidate(1,progressBarContainer)}))}]}class ProgressBar extends SvelteComponent{constructor(options){super(),init$6(this,options,instance$a,create_fragment$a,safe_not_equal,{isSeekable:2})}}function create_fragment$9(ctx){let button,div,div_class_value,button_disabled_value,mounted,dispose;return{c(){button=element("button"),div=element("div"),attr(div,"class",div_class_value="control-icon "+ctx[0]+" svelte-1v6g0bp"),button.disabled=button_disabled_value=-1===ctx[2],attr(button,"class","video-player-control video-player-control-button flex1  svelte-1v6g0bp")},m(target,anchor){insert(target,button,anchor),append(button,div),mounted||(dispose=listen(button,"click",(function(){is_function(ctx[1])&&ctx[1].apply(this,arguments)})),mounted=!0)},p(new_ctx,[dirty]){ctx=new_ctx,1&dirty&&div_class_value!==(div_class_value="control-icon "+ctx[0]+" svelte-1v6g0bp")&&attr(div,"class",div_class_value),4&dirty&&button_disabled_value!==(button_disabled_value=-1===ctx[2])&&(button.disabled=button_disabled_value)},i:noop,o:noop,d(detaching){detaching&&detach(button),mounted=!1,dispose()}}}function instance$9($$self,$$props,$$invalidate){let{controlIconClass:controlIconClass}=$$props,{clickFunction:clickFunction}=$$props,{duration:duration=0}=$$props;return $$self.$$set=$$props2=>{"controlIconClass"in $$props2&&$$invalidate(0,controlIconClass=$$props2.controlIconClass),"clickFunction"in $$props2&&$$invalidate(1,clickFunction=$$props2.clickFunction),"duration"in $$props2&&$$invalidate(2,duration=$$props2.duration)},[controlIconClass,clickFunction,duration]}class VideoPlayerButton extends SvelteComponent{constructor(options){super(),init$6(this,options,instance$9,create_fragment$9,safe_not_equal,{controlIconClass:0,clickFunction:1,duration:2})}}const{Boolean:Boolean_1}=globals;function get_each_context$4(ctx,list,i){const child_ctx=ctx.slice();return child_ctx[29]=list[i].click,child_ctx[30]=list[i].icon,child_ctx[31]=list[i].canShow,child_ctx}function create_if_block$5(ctx){let div,t0,t1,current,each_value=ensure_array_like(ctx[0]),each_blocks=[];for(let i=0;i<each_value.length;i+=1)each_blocks[i]=create_each_block$4(get_each_context$4(ctx,each_value,i));const out=i=>transition_out(each_blocks[i],1,1,(()=>{each_blocks[i]=null}));let if_block0=!!ctx[3].hasTimeDisplay&&function(ctx){let span1,span0,t;return{c(){span1=element("span"),span0=element("span"),t=text(ctx[2]),attr(span0,"class","flex1 align-self-center svelte-6kcfkq"),attr(span1,"class","video-player-control video-player-control-text flex1 svelte-6kcfkq")},m(target,anchor){insert(target,span1,anchor),append(span1,span0),append(span0,t)},p(ctx2,dirty){var text2,data;4&dirty[0]&&(text2=t,data=""+(data=ctx2[2]),text2.data!==data&&(text2.data=data))},d(detaching){detaching&&detach(span1)}}}(ctx),if_block1=!!ctx[3].hasFullScreenButton&&function(ctx){let videoplayerbutton,current;return videoplayerbutton=new VideoPlayerButton({props:{controlIconClass:"fullscreen-icon",clickFunction:ctx[14]}}),{c(){create_component(videoplayerbutton.$$.fragment)},m(target,anchor){mount_component(videoplayerbutton,target,anchor),current=!0},p:noop,i(local){current||(transition_in(videoplayerbutton.$$.fragment,local),current=!0)},o(local){transition_out(videoplayerbutton.$$.fragment,local),current=!1},d(detaching){destroy_component(videoplayerbutton,detaching)}}}(ctx);return{c(){div=element("div");for(let i=0;i<each_blocks.length;i+=1)each_blocks[i].c();t0=space(),if_block0&&if_block0.c(),t1=space(),if_block1&&if_block1.c(),attr(div,"class","video-controls-row buttons-row flex20 display-flex svelte-6kcfkq")},m(target,anchor){insert(target,div,anchor);for(let i=0;i<each_blocks.length;i+=1)each_blocks[i]&&each_blocks[i].m(div,null);append(div,t0),if_block0&&if_block0.m(div,null),append(div,t1),if_block1&&if_block1.m(div,null),current=!0},p(ctx2,dirty){if(1&dirty[0]){let i;for(each_value=ensure_array_like(ctx2[0]),i=0;i<each_value.length;i+=1){const child_ctx=get_each_context$4(ctx2,each_value,i);each_blocks[i]?(each_blocks[i].p(child_ctx,dirty),transition_in(each_blocks[i],1)):(each_blocks[i]=create_each_block$4(child_ctx),each_blocks[i].c(),transition_in(each_blocks[i],1),each_blocks[i].m(div,t0))}for(group_outros(),i=each_value.length;i<each_blocks.length;i+=1)out(i);check_outros()}ctx2[3].hasTimeDisplay&&if_block0.p(ctx2,dirty),ctx2[3].hasFullScreenButton&&if_block1.p(ctx2,dirty)},i(local){if(!current){for(let i=0;i<each_value.length;i+=1)transition_in(each_blocks[i]);transition_in(if_block1),current=!0}},o(local){each_blocks=each_blocks.filter(Boolean_1);for(let i=0;i<each_blocks.length;i+=1)transition_out(each_blocks[i]);transition_out(if_block1),current=!1},d(detaching){detaching&&detach(div),destroy_each(each_blocks,detaching),if_block0&&if_block0.d(),if_block1&&if_block1.d()}}}function create_if_block_3(ctx){let videoplayerbutton,current;return videoplayerbutton=new VideoPlayerButton({props:{controlIconClass:ctx[30],clickFunction:ctx[29]}}),{c(){create_component(videoplayerbutton.$$.fragment)},m(target,anchor){mount_component(videoplayerbutton,target,anchor),current=!0},p(ctx2,dirty){const videoplayerbutton_changes={};1&dirty[0]&&(videoplayerbutton_changes.controlIconClass=ctx2[30]),1&dirty[0]&&(videoplayerbutton_changes.clickFunction=ctx2[29]),videoplayerbutton.$set(videoplayerbutton_changes)},i(local){current||(transition_in(videoplayerbutton.$$.fragment,local),current=!0)},o(local){transition_out(videoplayerbutton.$$.fragment,local),current=!1},d(detaching){destroy_component(videoplayerbutton,detaching)}}}function create_each_block$4(ctx){let if_block_anchor,current,if_block=ctx[31]&&create_if_block_3(ctx);return{c(){if_block&&if_block.c(),if_block_anchor=empty()},m(target,anchor){if_block&&if_block.m(target,anchor),insert(target,if_block_anchor,anchor),current=!0},p(ctx2,dirty){ctx2[31]?if_block?(if_block.p(ctx2,dirty),1&dirty[0]&&transition_in(if_block,1)):(if_block=create_if_block_3(ctx2),if_block.c(),transition_in(if_block,1),if_block.m(if_block_anchor.parentNode,if_block_anchor)):if_block&&(group_outros(),transition_out(if_block,1,1,(()=>{if_block=null})),check_outros())},i(local){current||(transition_in(if_block),current=!0)},o(local){transition_out(if_block),current=!1},d(detaching){detaching&&detach(if_block_anchor),if_block&&if_block.d(detaching)}}}function create_fragment$8(ctx){let div,t,div_class_value,current,mounted,dispose,show_if_1=Boolean(ctx[3].hasProgressBar),show_if=ctx[6](),if_block0=show_if_1&&function(){let div,progressbar,current;return progressbar=new ProgressBar({}),{c(){div=element("div"),create_component(progressbar.$$.fragment),attr(div,"class","video-controls-row progress-bar-row flex1 display-flex svelte-6kcfkq")},m(target,anchor){insert(target,div,anchor),mount_component(progressbar,div,null),current=!0},i(local){current||(transition_in(progressbar.$$.fragment,local),current=!0)},o(local){transition_out(progressbar.$$.fragment,local),current=!1},d(detaching){detaching&&detach(div),destroy_component(progressbar)}}}(),if_block1=show_if&&create_if_block$5(ctx);return{c(){div=element("div"),if_block0&&if_block0.c(),t=space(),if_block1&&if_block1.c(),attr(div,"class",div_class_value=null_to_empty(ctx[1])+" svelte-6kcfkq"),attr(div,"role","button"),attr(div,"tabindex","0")},m(target,anchor){insert(target,div,anchor),if_block0&&if_block0.m(div,null),append(div,t),if_block1&&if_block1.m(div,null),current=!0,mounted||(dispose=[listen(div,"focus",ctx[4]),listen(div,"mouseover",ctx[4]),listen(div,"mouseleave",ctx[5]),listen(div,"touchstart",ctx[4],{passive:!0})],mounted=!0)},p(ctx2,dirty){show_if&&if_block1.p(ctx2,dirty),(!current||2&dirty[0]&&div_class_value!==(div_class_value=null_to_empty(ctx2[1])+" svelte-6kcfkq"))&&attr(div,"class",div_class_value)},i(local){current||(transition_in(if_block0),transition_in(if_block1),current=!0)},o(local){transition_out(if_block0),transition_out(if_block1),current=!1},d(detaching){detaching&&detach(div),if_block0&&if_block0.d(),if_block1&&if_block1.d(),mounted=!1,run_all(dispose)}}}function instance$8($$self,$$props,$$invalidate){let $btxStore;component_subscribe($$self,btxStore$1,($$value=>$$invalidate(13,$btxStore=$$value)));let timer,{itemData:itemData={}}=$$props,playerControls=[],controlData=itemData.data,classes="",isPlaying=!1,isMuted=!1,timeDisplay="0:00",isCollapsed=!1;const maximizeControls=()=>{pauseHideTimer(),$$invalidate(12,isCollapsed=!1)},pauseHideTimer=()=>{timer.IsActive&&timer.pause()},getHasBottomBar=()=>!!(controlData.hasForward10Button||controlData.hasFullScreenButton||controlData.hasPlayButton||controlData.hasRewind10Button||controlData.hasSoundButton||controlData.hasTimeDisplay||controlData.hasForward10Button||controlData.hasRewindButton),restartVideo=()=>{btxStore$1.setValue("seekTime",0),btxStore$1.playVideo()},toggleIsMuted=()=>{btxStore$1.toggleMuted()},back10=()=>{btxStore$1.setValue("seekTime",-10)},forward10=()=>{btxStore$1.setValue("seekTime",10)},toggleValue=key=>{btxStore$1.setValue(key,!$btxStore[key])},onKeyDown=evt=>{switch(evt.stopPropagation(),evt.keyCode){case 27:if(!controlData.hasFullScreenButton)return;return void btxStore$1.setValue("isInFullScreen",!1);case 32:if(!controlData.hasPlayButton)return;btxStore$1.setValue("isPlaying",!$btxStore.isPlaying);case 37:if(!controlData.hasRewind10Button)return;back10();case 39:if(!controlData.hasForward10Button)return;forward10();case 70:if(!controlData.hasFullScreenButton)return;btxStore$1.setValue("isInFullScreen",!0);case 77:if(!controlData.hasSoundButton)return;toggleIsMuted();case 82:if(!controlData.hasRewind10Button)return;restartVideo()}},minimizeControls=()=>{$$invalidate(12,isCollapsed=!0)},initKeyboardListener=()=>{$btxStore.isIgnoreKeyboard||($btxStore.isIgnoreKeyboard?window.removeEventListener("keydown",onKeyDown,!1):window.addEventListener("keydown",onKeyDown,!1))};onMount((()=>{$$invalidate(11,timer=new Timer(1e3,minimizeControls)),initKeyboardListener(),getHasBottomBar()||minimizeControls()}));return $$self.$$set=$$props2=>{"itemData"in $$props2&&$$invalidate(8,itemData=$$props2.itemData)},$$self.$$.update=()=>{if(15872&$$self.$$.dirty[0]){$$invalidate(9,isPlaying=$btxStore.isPlaying),$$invalidate(10,isMuted=$btxStore.isMuted);const formattedMinutes=String(Math.floor($btxStore.currentTime/60)).padStart(2,"0"),formattedSeconds=String(Math.floor($btxStore.currentTime)%60).padStart(2,"0"),formattedTotalSeconds=String(Math.floor($btxStore.totalTime)%60).padStart(2,"0"),formattedTotalMinutes=String(Math.floor($btxStore.totalTime/60)).padStart(2,"0");$$invalidate(2,timeDisplay=`${formattedMinutes}:${formattedSeconds} / ${formattedTotalMinutes}:${formattedTotalSeconds}`),isPlaying&&timer&&(timer.reset(),timer.start()),$$invalidate(0,playerControls=[{click:restartVideo,icon:"rewind-icon",canShow:!!controlData.hasRewindButton},{click:()=>{toggleValue("isPlaying")},icon:"play-icon",canShow:!!controlData.hasPlayButton&&!isPlaying},{click:()=>{toggleValue("isPlaying")},icon:"pause-icon",canShow:!!controlData.hasPlayButton&&isPlaying},{click:toggleIsMuted,icon:"mute-icon",canShow:!!controlData.hasSoundButton&&!isMuted},{click:toggleIsMuted,icon:"unmute-icon",canShow:!!controlData.hasSoundButton&&isMuted},{click:back10,icon:"back10-icon",canShow:!!controlData.hasRewind10Button},{click:forward10,icon:"forward10-icon",canShow:!!controlData.hasForward10Button}]),$$invalidate(1,classes="video-player-controls display-flex flex-column align-items-center "+(isCollapsed?"video-controls-collapsed":""))}},[playerControls,classes,timeDisplay,controlData,()=>{getHasBottomBar()&&maximizeControls()},()=>{isPlaying&&(timer.reset(),timer.start())},getHasBottomBar,toggleValue,itemData,isPlaying,isMuted,timer,isCollapsed,$btxStore,()=>toggleValue("isInFullScreen")]}class VideoPlayerControls extends SvelteComponent{constructor(options){super(),init$6(this,options,instance$8,create_fragment$8,safe_not_equal,{itemData:8},null,[-1,-1])}}function create_fragment$7(ctx){let div1,div0,a,img,img_src_value,div1_class_value,mounted,dispose;return{c(){var _a;div1=element("div"),div0=element("div"),a=element("a"),img=element("img"),src_url_equal(img.src,img_src_value=(null==(_a=ctx[2].asset.image)?void 0:_a.fileUrl)+ctx[4](ctx[2].asset.image))||attr(img,"src",img_src_value),attr(img,"alt","Slide"),set_style(img,"width",ctx[0]+"px"),set_style(img,"height",ctx[1]+"px"),set_style(img,"object-fit",ctx[5](ctx[2])),attr(img,"class","carousel__slide-content"),attr(a,"href","/"),attr(div0,"class","carousel__slide-container"),attr(div1,"class",div1_class_value="carousel__slide "+ctx[0]),set_style(div1,"display","flex"),set_style(div1,"height",ctx[1]+"px"),set_style(div1,"justify-content","center"),set_style(div1,"align-items","center"),set_style(div1,"width",ctx[0]+"px")},m(target,anchor){insert(target,div1,anchor),append(div1,div0),append(div0,a),append(a,img),ctx[9](div1),mounted||(dispose=listen(a,"click",prevent_default(ctx[6])),mounted=!0)},p(ctx2,[dirty]){var _a;4&dirty&&!src_url_equal(img.src,img_src_value=(null==(_a=ctx2[2].asset.image)?void 0:_a.fileUrl)+ctx2[4](ctx2[2].asset.image))&&attr(img,"src",img_src_value),1&dirty&&set_style(img,"width",ctx2[0]+"px"),2&dirty&&set_style(img,"height",ctx2[1]+"px"),4&dirty&&set_style(img,"object-fit",ctx2[5](ctx2[2])),1&dirty&&div1_class_value!==(div1_class_value="carousel__slide "+ctx2[0])&&attr(div1,"class",div1_class_value),2&dirty&&set_style(div1,"height",ctx2[1]+"px"),1&dirty&&set_style(div1,"width",ctx2[0]+"px")},i:noop,o:noop,d(detaching){detaching&&detach(div1),ctx[9](null),mounted=!1,dispose()}}}function instance$7($$self,$$props,$$invalidate){let vr,slideContainer,{carouselWidth:carouselWidth=10}=$$props,{carouselHeight:carouselHeight=10}=$$props,{slide:slide}=$$props,{itemData:itemData={}}=$$props,{slideNumber:slideNumber}=$$props,viewEvent={};return onMount((()=>{viewEvent={type:PolarisEvent.BTX_COMPONENTS_VIEWED},viewEvent[PolarisEvent.BTX_COMPONENTS_VIEWED]=[{screenId:String(itemData.reportingData.screenId),screenName:itemData.reportingData.screenName,componentId:String(itemData.id+"."+slideNumber),componentType:"CarouselSlide",componentName:`${itemData.name}, ${slide.name}`}],vr=new ViewRportingUtil(viewEvent),VisibilityUtil.addIntersectionObserver((isIntersecting=>{isIntersecting&&vr.sendViewReport()}),slideContainer,{rootMargin:"0px",threshold:1})})),$$self.$$set=$$props2=>{"carouselWidth"in $$props2&&$$invalidate(0,carouselWidth=$$props2.carouselWidth),"carouselHeight"in $$props2&&$$invalidate(1,carouselHeight=$$props2.carouselHeight),"slide"in $$props2&&$$invalidate(2,slide=$$props2.slide),"itemData"in $$props2&&$$invalidate(7,itemData=$$props2.itemData),"slideNumber"in $$props2&&$$invalidate(8,slideNumber=$$props2.slideNumber)},[carouselWidth,carouselHeight,slide,slideContainer,image=>image.data.width||carouselWidth+"",slide2=>slide2.asset.image?slide2.asset.image.data.displayType:slide2.asset.data.displayType,()=>{"clickThru"===slide.data.type&&slide.data.value&&openClickThroughUrl(slide.data.value);let event=Object.assign(Object.assign({},itemData.reportingData),{type:PolarisEvent.BTX_CLICKED});event[PolarisEvent.BTX_CLICKED]={clickValue:slide.data.value,componentId:String(itemData.id),componentName:(itemData.name||"")+","+slideNumber,componentType:ScreenItemComponentType.CAROUSEL,clickType:slide.data.type},trackingStore$1.sendReport(event)},itemData,slideNumber,function($$value){binding_callbacks[$$value?"unshift":"push"]((()=>{slideContainer=$$value,$$invalidate(3,slideContainer)}))}]}class CarouselSlide extends SvelteComponent{constructor(options){super(),init$6(this,options,instance$7,create_fragment$7,safe_not_equal,{carouselWidth:0,carouselHeight:1,slide:2,itemData:7,slideNumber:8})}}function get_each_context$3(ctx,list,i){const child_ctx=ctx.slice();return child_ctx[27]=list[i],child_ctx[28]=list,child_ctx[29]=i,child_ctx}function create_each_block$3(ctx){let carouselslide,current,idx=ctx[29];const assign_carouselslide=()=>ctx[21](carouselslide,idx),unassign_carouselslide=()=>ctx[21](null,idx);let carouselslide_props={slide:ctx[27],carouselWidth:ctx[7],carouselHeight:ctx[6],itemData:ctx[0],slideNumber:ctx[29]};return carouselslide=new CarouselSlide({props:carouselslide_props}),assign_carouselslide(),{c(){create_component(carouselslide.$$.fragment)},m(target,anchor){mount_component(carouselslide,target,anchor),current=!0},p(ctx2,dirty){idx!==ctx2[29]&&(unassign_carouselslide(),idx=ctx2[29],assign_carouselslide());const carouselslide_changes={};128&dirty&&(carouselslide_changes.carouselWidth=ctx2[7]),64&dirty&&(carouselslide_changes.carouselHeight=ctx2[6]),1&dirty&&(carouselslide_changes.itemData=ctx2[0]),carouselslide.$set(carouselslide_changes)},i(local){current||(transition_in(carouselslide.$$.fragment,local),current=!0)},o(local){transition_out(carouselslide.$$.fragment,local),current=!1},d(detaching){unassign_carouselslide(),destroy_component(carouselslide,detaching)}}}function create_default_slot_2$1(ctx){let each_1_anchor,current,each_value=ensure_array_like(ctx[9]),each_blocks=[];for(let i=0;i<each_value.length;i+=1)each_blocks[i]=create_each_block$3(get_each_context$3(ctx,each_value,i));const out=i=>transition_out(each_blocks[i],1,1,(()=>{each_blocks[i]=null}));return{c(){for(let i=0;i<each_blocks.length;i+=1)each_blocks[i].c();each_1_anchor=empty()},m(target,anchor){for(let i=0;i<each_blocks.length;i+=1)each_blocks[i]&&each_blocks[i].m(target,anchor);insert(target,each_1_anchor,anchor),current=!0},p(ctx2,dirty){if(721&dirty){let i;for(each_value=ensure_array_like(ctx2[9]),i=0;i<each_value.length;i+=1){const child_ctx=get_each_context$3(ctx2,each_value,i);each_blocks[i]?(each_blocks[i].p(child_ctx,dirty),transition_in(each_blocks[i],1)):(each_blocks[i]=create_each_block$3(child_ctx),each_blocks[i].c(),transition_in(each_blocks[i],1),each_blocks[i].m(each_1_anchor.parentNode,each_1_anchor))}for(group_outros(),i=each_value.length;i<each_blocks.length;i+=1)out(i);check_outros()}},i(local){if(!current){for(let i=0;i<each_value.length;i+=1)transition_in(each_blocks[i]);current=!0}},o(local){each_blocks=each_blocks.filter(Boolean);for(let i=0;i<each_blocks.length;i+=1)transition_out(each_blocks[i]);current=!1},d(detaching){detaching&&detach(each_1_anchor),destroy_each(each_blocks,detaching)}}}function create_key_block$1(ctx){let carousel,current,carousel_props={animationStyle:"slide",autoPlayDelay:ctx[1].autoplayDelay,carouselWidth:ctx[5],isAutoPlayEnabled:ctx[1].isAutoplay,carouselAutoPlayLoopLimit:ctx[19](),slidePadding:parseInt(ctx[1].slidePadding),autoSlideDirection:ctx[20](),visibleSlides:ctx[10],$$slots:{default:[create_default_slot_2$1]},$$scope:{ctx:ctx}};return carousel=new Carousel({props:carousel_props}),ctx[22](carousel),carousel.$on("carouselIndexChange",ctx[12]),{c(){create_component(carousel.$$.fragment)},m(target,anchor){mount_component(carousel,target,anchor),current=!0},p(ctx2,dirty){const carousel_changes={};2&dirty&&(carousel_changes.autoPlayDelay=ctx2[1].autoplayDelay),32&dirty&&(carousel_changes.carouselWidth=ctx2[5]),2&dirty&&(carousel_changes.isAutoPlayEnabled=ctx2[1].isAutoplay),2&dirty&&(carousel_changes.slidePadding=parseInt(ctx2[1].slidePadding)),1073742033&dirty&&(carousel_changes.$$scope={dirty:dirty,ctx:ctx2}),carousel.$set(carousel_changes)},i(local){current||(transition_in(carousel.$$.fragment,local),current=!0)},o(local){transition_out(carousel.$$.fragment,local),current=!1},d(detaching){ctx[22](null),destroy_component(carousel,detaching)}}}function create_if_block_1$1(ctx){let navigationarrow0,t,navigationarrow1,current;return navigationarrow0=new NavigationArrow({props:{direction:"left",navArrowClickHandler:ctx[23],customArrow:!0,style:"width: "+ctx[1].customControls.controlsWidth+"px;\n                height: "+ctx[1].customControls.controlsHeight+"px;\n                left: "+ctx[18](ctx[1].customControls.hasCustomControls)+"%;\n                top: "+ctx[17](ctx[1].customControls.hasCustomControls)+"%;\n                position: absolute;",$$slots:{default:[create_default_slot_1$1]},$$scope:{ctx:ctx}}}),navigationarrow1=new NavigationArrow({props:{direction:"right",navArrowClickHandler:ctx[24],customArrow:!0,style:"width: "+ctx[1].customControls.controlsWidth+"px;\n                height: "+ctx[1].customControls.controlsHeight+"px;\n                right: "+ctx[18](ctx[1].customControls.hasCustomControls)+"%;\n                top: "+ctx[17](ctx[1].customControls.hasCustomControls)+"%;\n                position: absolute;",$$slots:{default:[create_default_slot$1]},$$scope:{ctx:ctx}}}),{c(){create_component(navigationarrow0.$$.fragment),t=space(),create_component(navigationarrow1.$$.fragment)},m(target,anchor){mount_component(navigationarrow0,target,anchor),insert(target,t,anchor),mount_component(navigationarrow1,target,anchor),current=!0},p(ctx2,dirty){const navigationarrow0_changes={};2&dirty&&(navigationarrow0_changes.style="width: "+ctx2[1].customControls.controlsWidth+"px;\n                height: "+ctx2[1].customControls.controlsHeight+"px;\n                left: "+ctx2[18](ctx2[1].customControls.hasCustomControls)+"%;\n                top: "+ctx2[17](ctx2[1].customControls.hasCustomControls)+"%;\n                position: absolute;"),1073741826&dirty&&(navigationarrow0_changes.$$scope={dirty:dirty,ctx:ctx2}),navigationarrow0.$set(navigationarrow0_changes);const navigationarrow1_changes={};2&dirty&&(navigationarrow1_changes.style="width: "+ctx2[1].customControls.controlsWidth+"px;\n                height: "+ctx2[1].customControls.controlsHeight+"px;\n                right: "+ctx2[18](ctx2[1].customControls.hasCustomControls)+"%;\n                top: "+ctx2[17](ctx2[1].customControls.hasCustomControls)+"%;\n                position: absolute;"),1073741826&dirty&&(navigationarrow1_changes.$$scope={dirty:dirty,ctx:ctx2}),navigationarrow1.$set(navigationarrow1_changes)},i(local){current||(transition_in(navigationarrow0.$$.fragment,local),transition_in(navigationarrow1.$$.fragment,local),current=!0)},o(local){transition_out(navigationarrow0.$$.fragment,local),transition_out(navigationarrow1.$$.fragment,local),current=!1},d(detaching){detaching&&detach(t),destroy_component(navigationarrow0,detaching),destroy_component(navigationarrow1,detaching)}}}function create_default_slot_1$1(ctx){let img,img_src_value;return{c(){var _a;img=element("img"),src_url_equal(img.src,img_src_value=""+(ctx[15](null==(_a=ctx[1].customControls.controlsPrevGraphic)?void 0:_a.fileUrl)+2*Number(ctx[1].customControls.controlsWidth)))||attr(img,"src",img_src_value),attr(img,"alt","Prev"),set_style(img,"width",ctx[1].customControls.controlsWidth+"px"),set_style(img,"height",ctx[1].customControls.controlsHeight+"px"),set_style(img,"object-fit",ctx[14](ctx[1].customControls.controlsPrevGraphic)),attr(img,"class","carousel__slide-content")},m(target,anchor){insert(target,img,anchor)},p(ctx2,dirty){var _a;2&dirty&&!src_url_equal(img.src,img_src_value=""+(ctx2[15](null==(_a=ctx2[1].customControls.controlsPrevGraphic)?void 0:_a.fileUrl)+2*Number(ctx2[1].customControls.controlsWidth)))&&attr(img,"src",img_src_value),2&dirty&&set_style(img,"width",ctx2[1].customControls.controlsWidth+"px"),2&dirty&&set_style(img,"height",ctx2[1].customControls.controlsHeight+"px"),2&dirty&&set_style(img,"object-fit",ctx2[14](ctx2[1].customControls.controlsPrevGraphic))},d(detaching){detaching&&detach(img)}}}function create_default_slot$1(ctx){let img,img_src_value;return{c(){var _a;img=element("img"),src_url_equal(img.src,img_src_value=""+(ctx[16](null==(_a=ctx[1].customControls.controlsNextGraphic)?void 0:_a.fileUrl)+2*Number(ctx[1].customControls.controlsWidth)))||attr(img,"src",img_src_value),attr(img,"alt","Next"),set_style(img,"width",ctx[1].customControls.controlsWidth+"px"),set_style(img,"height",ctx[1].customControls.controlsHeight+"px"),set_style(img,"object-fit",ctx[14](ctx[1].customControls.controlsNextGraphic)),attr(img,"class","carousel__slide-content")},m(target,anchor){insert(target,img,anchor)},p(ctx2,dirty){var _a;2&dirty&&!src_url_equal(img.src,img_src_value=""+(ctx2[16](null==(_a=ctx2[1].customControls.controlsNextGraphic)?void 0:_a.fileUrl)+2*Number(ctx2[1].customControls.controlsWidth)))&&attr(img,"src",img_src_value),2&dirty&&set_style(img,"width",ctx2[1].customControls.controlsWidth+"px"),2&dirty&&set_style(img,"height",ctx2[1].customControls.controlsHeight+"px"),2&dirty&&set_style(img,"object-fit",ctx2[14](ctx2[1].customControls.controlsNextGraphic))},d(detaching){detaching&&detach(img)}}}function create_if_block$4(ctx){let div,indicators,current;const indicators_spread_levels=[ctx[2]];let indicators_props={};for(let i=0;i<indicators_spread_levels.length;i+=1)indicators_props=assign(indicators_props,indicators_spread_levels[i]);return indicators=new Indicators({props:indicators_props}),indicators.$on("indicatorClick",ctx[11]),{c(){div=element("div"),create_component(indicators.$$.fragment),attr(div,"class","indicatorHolder svelte-55l4fs")},m(target,anchor){insert(target,div,anchor),mount_component(indicators,div,null),current=!0},p(ctx2,dirty){const indicators_changes=4&dirty?get_spread_update(indicators_spread_levels,[get_spread_object(ctx2[2])]):{};indicators.$set(indicators_changes)},i(local){current||(transition_in(indicators.$$.fragment,local),current=!0)},o(local){transition_out(indicators.$$.fragment,local),current=!1},d(detaching){detaching&&detach(div),destroy_component(indicators)}}}function create_fragment$6(ctx){let div,t0,t1,t2,current,previous_key=ctx[5],if_block0=ctx[8]<1&&function(){let div;return{c(){div=element("div"),div.textContent="No slides in the carousel",attr(div,"class","text-center")},m(target,anchor){insert(target,div,anchor)},d(detaching){detaching&&detach(div)}}}(),key_block=create_key_block$1(ctx),if_block1=ctx[1].hasPrevNextControls&&create_if_block_1$1(ctx),if_block2=ctx[1].pagination.hasPagination&&create_if_block$4(ctx);return{c(){div=element("div"),if_block0&&if_block0.c(),t0=space(),key_block.c(),t1=space(),if_block1&&if_block1.c(),t2=space(),if_block2&&if_block2.c(),attr(div,"class","carousel")},m(target,anchor){insert(target,div,anchor),if_block0&&if_block0.m(div,null),append(div,t0),key_block.m(div,null),append(div,t1),if_block1&&if_block1.m(div,null),append(div,t2),if_block2&&if_block2.m(div,null),current=!0},p(ctx2,[dirty]){32&dirty&&safe_not_equal(previous_key,previous_key=ctx2[5])?(group_outros(),transition_out(key_block,1,1,noop),check_outros(),key_block=create_key_block$1(ctx2),key_block.c(),transition_in(key_block,1),key_block.m(div,t1)):key_block.p(ctx2,dirty),ctx2[1].hasPrevNextControls?if_block1?(if_block1.p(ctx2,dirty),2&dirty&&transition_in(if_block1,1)):(if_block1=create_if_block_1$1(ctx2),if_block1.c(),transition_in(if_block1,1),if_block1.m(div,t2)):if_block1&&(group_outros(),transition_out(if_block1,1,1,(()=>{if_block1=null})),check_outros()),ctx2[1].pagination.hasPagination?if_block2?(if_block2.p(ctx2,dirty),2&dirty&&transition_in(if_block2,1)):(if_block2=create_if_block$4(ctx2),if_block2.c(),transition_in(if_block2,1),if_block2.m(div,null)):if_block2&&(group_outros(),transition_out(if_block2,1,1,(()=>{if_block2=null})),check_outros())},i(local){current||(transition_in(key_block),transition_in(if_block1),transition_in(if_block2),current=!0)},o(local){transition_out(key_block),transition_out(if_block1),transition_out(if_block2),current=!1},d(detaching){detaching&&detach(div),if_block0&&if_block0.d(),key_block.d(detaching),if_block1&&if_block1.d(),if_block2&&if_block2.d()}}}function instance$6($$self,$$props,$$invalidate){let{itemData:itemData={}}=$$props;const carouselData=itemData.carouselControlData,slidesLength=(null==carouselData?void 0:carouselData.slides.length)||0,slides=(null==carouselData?void 0:carouselData.slides)||[],visibleSlides=(null==carouselData?void 0:carouselData.visibleSlides)||1,indicatorsProps={numberOfIndicators:slidesLength,indicatorSize:Number.parseInt(carouselData.pagination.paginationSize),initialActiveIndex:0,fillColor:carouselData.pagination.paginationColor};let carouselElm,slideElms=[],carouselWidth=10,carouselHeight=10,slideWidth=10;onMount((()=>{$$invalidate(5,carouselWidth=itemData.width||0),$$invalidate(6,carouselHeight=itemData.height||0),"%"===itemData.data.widthUnit&&$$invalidate(5,carouselWidth=Math.floor((itemData.width||0)/100*window.innerWidth)),"%"===itemData.data.heightUnit&&$$invalidate(6,carouselHeight=Math.floor((itemData.height||0)/100*window.innerHeight)),$$invalidate(7,slideWidth=carouselWidth/visibleSlides)}));const navCLickHandler=direction=>{carouselData.isAutoplay&&carouselData.isStoppedOnInteraction&&($$invalidate(1,carouselData.isAutoplay=!1,carouselData),carouselElm.stopAutoPlay()),carouselElm.transitionSlide(direction);let event=Object.assign(Object.assign({},itemData.reportingData),{type:PolarisEvent.BTX_CLICKED});event[PolarisEvent.BTX_CLICKED]={value:direction,componentId:String(itemData.id),componentName:itemData.name||"",componentType:ScreenItemComponentType.CAROUSEL,clickType:"Next/Prev clicked",clickValue:"right"===direction?"Next":"Prev",screenId:String(itemData.reportingData.screenId),screenName:itemData.reportingData.screenName},trackingStore$1.sendReport(event)};return $$self.$$set=$$props2=>{"itemData"in $$props2&&$$invalidate(0,itemData=$$props2.itemData)},[itemData,carouselData,indicatorsProps,carouselElm,slideElms,carouselWidth,carouselHeight,slideWidth,slidesLength,slides,visibleSlides,function(event){carouselElm.handleIndexChange(event.detail.activeIndicator)},function(event){$$invalidate(2,indicatorsProps.initialActiveIndex=event.detail.currentActiveIndex,indicatorsProps)},navCLickHandler,navButton=>navButton?"fit"===navButton.data.displayType?"fill":navButton.data.displayType:"contain",icon=>icon||"https://live.polaris.me/assets/images/5827ab09-79a8-4f34-87eb-21749a1410f8/300",icon=>icon||"https://live.polaris.me/assets/images/e409aef7-a90b-48d1-a6a0-141a7f2a4f6d/300",isCustom=>isCustom?carouselData.customControls.controlsOffsetY:"45",isCustom=>isCustom?carouselData.customControls.controlsOffsetX:"90",()=>{switch(carouselData.autoplayRotation){case"1 Loop":return 1;case"2 Loops":return 2;default:return 3}},()=>"Right to Left"===carouselData.playDirection?"left":"right",function($$value,idx){binding_callbacks[$$value?"unshift":"push"]((()=>{slideElms[idx]=$$value,$$invalidate(4,slideElms)}))},function($$value){binding_callbacks[$$value?"unshift":"push"]((()=>{carouselElm=$$value,$$invalidate(3,carouselElm)}))},()=>navCLickHandler("left"),()=>navCLickHandler("right")]}class CarouselContainer extends SvelteComponent{constructor(options){super(),init$6(this,options,instance$6,create_fragment$6,safe_not_equal,{itemData:0})}}function create_fragment$5(ctx){let div1,div0,img,img_src_value,mounted,dispose;return{c(){var _a,_b,_c,_d,_e;div1=element("div"),div0=element("div"),img=element("img"),src_url_equal(img.src,img_src_value=(null==(_a=ctx[0].asset.image)?void 0:_a.fileUrl)+((ctx[1]<((null==(_c=null==(_b=ctx[0].asset.image)?void 0:_b.data)?void 0:_c.width)||4096)?(null==(_e=null==(_d=ctx[0].asset.image)?void 0:_d.data)?void 0:_e.width)||4096:ctx[1])+""))||attr(img,"src",img_src_value),attr(img,"alt","Slide"),set_style(img,"width","100%"),set_style(img,"height",ctx[1]+"px"),set_style(img,"object-fit",ctx[4](ctx[0])),attr(img,"class","carousel__slide-content"),attr(div0,"role","button"),attr(div0,"tabindex","0"),attr(div1,"class","carousel__slide svelte-1r8pz1e")},m(target,anchor){insert(target,div1,anchor),append(div1,div0),append(div0,img),ctx[9](div1),mounted||(dispose=[listen(div0,"click",ctx[7]),listen(div0,"keypress",ctx[8])],mounted=!0)},p(ctx2,[dirty]){var _a,_b,_c,_d,_e;3&dirty&&!src_url_equal(img.src,img_src_value=(null==(_a=ctx2[0].asset.image)?void 0:_a.fileUrl)+((ctx2[1]<((null==(_c=null==(_b=ctx2[0].asset.image)?void 0:_b.data)?void 0:_c.width)||4096)?(null==(_e=null==(_d=ctx2[0].asset.image)?void 0:_d.data)?void 0:_e.width)||4096:ctx2[1])+""))&&attr(img,"src",img_src_value),2&dirty&&set_style(img,"height",ctx2[1]+"px"),1&dirty&&set_style(img,"object-fit",ctx2[4](ctx2[0]))},i:noop,o:noop,d(detaching){detaching&&detach(div1),ctx[9](null),mounted=!1,run_all(dispose)}}}function instance$5($$self,$$props,$$invalidate){let vr,slideContainer,{itemData:itemData={}}=$$props,{slide:slide}=$$props,{iconSize:iconSize=200}=$$props,{slideNumber:slideNumber}=$$props,viewEvent={};const carouselClick=slide2=>{var _a,_b,_c,_d,_e,_g,_h;(null===(_a=null==slide2?void 0:slide2.data)||void 0===_a?void 0:_a.value)&&slide2.data.type===ClickAreaDataType.CLICK_THRU&&openClickThroughUrl(slide2.data.value),(null===(_b=null==slide2?void 0:slide2.data)||void 0===_b?void 0:_b.type)===ClickAreaDataType.EVENT&&btxStore$1[null===(_c=null==slide2?void 0:slide2.data)||void 0===_c?void 0:_c.value]&&btxStore$1[null===(_d=null==slide2?void 0:slide2.data)||void 0===_d?void 0:_d.value](null===(_e=null==slide2?void 0:slide2.data)||void 0===_e?void 0:_e.params);let event=Object.assign(Object.assign({},itemData.reportingData),{type:PolarisEvent.BTX_CLICKED});event[PolarisEvent.BTX_CLICKED]={componentId:String(itemData.id),componentName:`${itemData.name}, ${slide2.name}`,componentType:ScreenItemComponentType.CAROUSEL,clickType:null===(_g=null==slide2?void 0:slide2.data)||void 0===_g?void 0:_g.type,clickValue:null===(_h=null==slide2?void 0:slide2.data)||void 0===_h?void 0:_h.value},trackingStore$1.sendReport(event)};onMount((()=>{viewEvent={type:PolarisEvent.BTX_COMPONENTS_VIEWED},viewEvent[PolarisEvent.BTX_COMPONENTS_VIEWED]=[{screenId:String(itemData.reportingData.screenId),screenName:itemData.reportingData.screenName,componentId:String(itemData.id+"."+slideNumber),componentType:"VignetteSlide",componentName:`${itemData.name}, ${slide.name}`}],vr=new ViewRportingUtil(viewEvent),VisibilityUtil.addIntersectionObserver((isIntersecting=>{isIntersecting&&vr.sendViewReport()}),slideContainer,{rootMargin:"0px",threshold:.5})}));return $$self.$$set=$$props2=>{"itemData"in $$props2&&$$invalidate(5,itemData=$$props2.itemData),"slide"in $$props2&&$$invalidate(0,slide=$$props2.slide),"iconSize"in $$props2&&$$invalidate(1,iconSize=$$props2.iconSize),"slideNumber"in $$props2&&$$invalidate(6,slideNumber=$$props2.slideNumber)},[slide,iconSize,slideContainer,carouselClick,slide2=>"fit"===slide2.asset.image.data.displayType?"fill":slide2.asset.image.data.displayType,itemData,slideNumber,()=>carouselClick(slide),()=>carouselClick(slide),function($$value){binding_callbacks[$$value?"unshift":"push"]((()=>{slideContainer=$$value,$$invalidate(2,slideContainer)}))}]}class VignetteSlide extends SvelteComponent{constructor(options){super(),init$6(this,options,instance$5,create_fragment$5,safe_not_equal,{itemData:5,slide:0,iconSize:1,slideNumber:6})}}function get_each_context$2(ctx,list,i){const child_ctx=ctx.slice();return child_ctx[26]=list[i],child_ctx[28]=i,child_ctx}function create_default_slot_2(ctx){let img,img_src_value;return{c(){var _a;img=element("img"),src_url_equal(img.src,img_src_value=ctx[12](null==(_a=ctx[7].customControls.controlsPrevGraphic)?void 0:_a.fileUrl)+"130")||attr(img,"src",img_src_value),attr(img,"alt","Next"),set_style(img,"width","100%"),set_style(img,"height","100%"),set_style(img,"object-fit",ctx[11](ctx[7].customControls.controlsPrevGraphic))},m(target,anchor){insert(target,img,anchor)},p:noop,d(detaching){detaching&&detach(img)}}}function create_default_slot_1(ctx){let img,img_src_value;return{c(){var _a;img=element("img"),src_url_equal(img.src,img_src_value=ctx[13](null==(_a=ctx[7].customControls.controlsPrevGraphic)?void 0:_a.fileUrl)+"130")||attr(img,"src",img_src_value),attr(img,"alt","Next"),set_style(img,"width","100%"),set_style(img,"height","100%"),set_style(img,"object-fit",ctx[11](ctx[7].customControls.controlsNextGraphic))},m(target,anchor){insert(target,img,anchor)},p:noop,d(detaching){detaching&&detach(img)}}}function create_each_block$2(ctx){let vignetteslide,current;return vignetteslide=new VignetteSlide({props:{slide:ctx[26],itemData:ctx[0],iconSize:ctx[5],slideNumber:ctx[28]}}),{c(){create_component(vignetteslide.$$.fragment)},m(target,anchor){mount_component(vignetteslide,target,anchor),current=!0},p(ctx2,dirty){const vignetteslide_changes={};1&dirty&&(vignetteslide_changes.itemData=ctx2[0]),32&dirty&&(vignetteslide_changes.iconSize=ctx2[5]),vignetteslide.$set(vignetteslide_changes)},i(local){current||(transition_in(vignetteslide.$$.fragment,local),current=!0)},o(local){transition_out(vignetteslide.$$.fragment,local),current=!1},d(detaching){destroy_component(vignetteslide,detaching)}}}function create_default_slot(ctx){let each_1_anchor,current,each_value=ensure_array_like(ctx[8]),each_blocks=[];for(let i=0;i<each_value.length;i+=1)each_blocks[i]=create_each_block$2(get_each_context$2(ctx,each_value,i));const out=i=>transition_out(each_blocks[i],1,1,(()=>{each_blocks[i]=null}));return{c(){for(let i=0;i<each_blocks.length;i+=1)each_blocks[i].c();each_1_anchor=empty()},m(target,anchor){for(let i=0;i<each_blocks.length;i+=1)each_blocks[i]&&each_blocks[i].m(target,anchor);insert(target,each_1_anchor,anchor),current=!0},p(ctx2,dirty){if(289&dirty){let i;for(each_value=ensure_array_like(ctx2[8]),i=0;i<each_value.length;i+=1){const child_ctx=get_each_context$2(ctx2,each_value,i);each_blocks[i]?(each_blocks[i].p(child_ctx,dirty),transition_in(each_blocks[i],1)):(each_blocks[i]=create_each_block$2(child_ctx),each_blocks[i].c(),transition_in(each_blocks[i],1),each_blocks[i].m(each_1_anchor.parentNode,each_1_anchor))}for(group_outros(),i=each_value.length;i<each_blocks.length;i+=1)out(i);check_outros()}},i(local){if(!current){for(let i=0;i<each_value.length;i+=1)transition_in(each_blocks[i]);current=!0}},o(local){each_blocks=each_blocks.filter(Boolean);for(let i=0;i<each_blocks.length;i+=1)transition_out(each_blocks[i]);current=!1},d(detaching){detaching&&detach(each_1_anchor),destroy_each(each_blocks,detaching)}}}function create_key_block(ctx){let carousel,current;const carousel_spread_levels=[{autoPlayDelay:ctx[7].autoplayDelay},{isAutoPlayEnabled:ctx[7].isAutoplay},{slidePadding:ctx[9]},{carouselWidth:ctx[4]},ctx[2],{transitionTime:300},{slideAlignment:"left"}];let carousel_props={$$slots:{default:[create_default_slot]},$$scope:{ctx:ctx}};for(let i=0;i<carousel_spread_levels.length;i+=1)carousel_props=assign(carousel_props,carousel_spread_levels[i]);return carousel=new Carousel({props:carousel_props}),ctx[16](carousel),{c(){create_component(carousel.$$.fragment)},m(target,anchor){mount_component(carousel,target,anchor),current=!0},p(ctx2,dirty){const carousel_changes=660&dirty?get_spread_update(carousel_spread_levels,[128&dirty&&{autoPlayDelay:ctx2[7].autoplayDelay},128&dirty&&{isAutoPlayEnabled:ctx2[7].isAutoplay},512&dirty&&{slidePadding:ctx2[9]},16&dirty&&{carouselWidth:ctx2[4]},4&dirty&&get_spread_object(ctx2[2]),carousel_spread_levels[5],carousel_spread_levels[6]]):{};536870945&dirty&&(carousel_changes.$$scope={dirty:dirty,ctx:ctx2}),carousel.$set(carousel_changes)},i(local){current||(transition_in(carousel.$$.fragment,local),current=!0)},o(local){transition_out(carousel.$$.fragment,local),current=!1},d(detaching){ctx[16](null),destroy_component(carousel,detaching)}}}function create_fragment$4(ctx){let div2,div0,t,div1,current,previous_key=ctx[4],if_block=ctx[7].hasPrevNextControls&&function(ctx){let navigationarrow0,t,navigationarrow1,current;return navigationarrow0=new NavigationArrow({props:{navArrowClickHandler:ctx[14],customArrow:ctx[7].customControls.hasCustomControls,style:"width: "+ctx[7].customControls.controlsWidth+"%; height: "+ctx[7].customControls.controlsHeight+"%; left: "+ctx[6]+"; top: "+ctx[7].customControls.controlsOffsetY+"px; position: absolute; z-index: 99999;",$$slots:{default:[create_default_slot_2]},$$scope:{ctx:ctx}}}),navigationarrow1=new NavigationArrow({props:{navArrowClickHandler:ctx[15],customArrow:ctx[7].customControls.hasCustomControls,style:"width: "+ctx[7].customControls.controlsWidth+"%; height: "+ctx[7].customControls.controlsHeight+"%; right: "+ctx[6]+"; top: "+ctx[7].customControls.controlsOffsetY+"px; position: absolute; z-index: 99999;",direction:ctx[7].customControls.hasCustomControls?"left":"right",$$slots:{default:[create_default_slot_1]},$$scope:{ctx:ctx}}}),{c(){create_component(navigationarrow0.$$.fragment),t=space(),create_component(navigationarrow1.$$.fragment)},m(target,anchor){mount_component(navigationarrow0,target,anchor),insert(target,t,anchor),mount_component(navigationarrow1,target,anchor),current=!0},p(ctx2,dirty){const navigationarrow0_changes={};64&dirty&&(navigationarrow0_changes.style="width: "+ctx2[7].customControls.controlsWidth+"%; height: "+ctx2[7].customControls.controlsHeight+"%; left: "+ctx2[6]+"; top: "+ctx2[7].customControls.controlsOffsetY+"px; position: absolute; z-index: 99999;"),536870912&dirty&&(navigationarrow0_changes.$$scope={dirty:dirty,ctx:ctx2}),navigationarrow0.$set(navigationarrow0_changes);const navigationarrow1_changes={};64&dirty&&(navigationarrow1_changes.style="width: "+ctx2[7].customControls.controlsWidth+"%; height: "+ctx2[7].customControls.controlsHeight+"%; right: "+ctx2[6]+"; top: "+ctx2[7].customControls.controlsOffsetY+"px; position: absolute; z-index: 99999;"),536870912&dirty&&(navigationarrow1_changes.$$scope={dirty:dirty,ctx:ctx2}),navigationarrow1.$set(navigationarrow1_changes)},i(local){current||(transition_in(navigationarrow0.$$.fragment,local),transition_in(navigationarrow1.$$.fragment,local),current=!0)},o(local){transition_out(navigationarrow0.$$.fragment,local),transition_out(navigationarrow1.$$.fragment,local),current=!1},d(detaching){detaching&&detach(t),destroy_component(navigationarrow0,detaching),destroy_component(navigationarrow1,detaching)}}}(ctx),key_block=create_key_block(ctx);return{c(){div2=element("div"),div0=element("div"),if_block&&if_block.c(),t=space(),div1=element("div"),key_block.c(),attr(div0,"class","vignette__header svelte-1u89syx"),attr(div1,"class","vignette__body svelte-1u89syx"),attr(div2,"class","vignette svelte-1u89syx")},m(target,anchor){insert(target,div2,anchor),append(div2,div0),if_block&&if_block.m(div0,null),append(div2,t),append(div2,div1),key_block.m(div1,null),ctx[17](div1),current=!0},p(ctx2,[dirty]){ctx2[7].hasPrevNextControls&&if_block.p(ctx2,dirty),16&dirty&&safe_not_equal(previous_key,previous_key=ctx2[4])?(group_outros(),transition_out(key_block,1,1,noop),check_outros(),key_block=create_key_block(ctx2),key_block.c(),transition_in(key_block,1),key_block.m(div1,null)):key_block.p(ctx2,dirty)},i(local){current||(transition_in(if_block),transition_in(key_block),current=!0)},o(local){transition_out(if_block),transition_out(key_block),current=!1},d(detaching){detaching&&detach(div2),if_block&&if_block.d(),key_block.d(detaching),ctx[17](null)}}}function instance$4($$self,$$props,$$invalidate){let{itemData:itemData={}}=$$props;const carouselData=itemData.carouselControlData,slides=(null==carouselData?void 0:carouselData.slides)||[],desktopSettings={visibleSlides:3,slideWidthPercentage:30},mobileSettings={visibleSlides:1,slideWidthPercentage:100};let carouselElm,vignetteBody,currentSettings=desktopSettings,carouselWidth=100,iconSize=200,slidePadding=parseInt(carouselData.slidePadding),controlOffset="",isMobile=!1;const setIconSize=()=>{$$invalidate(5,iconSize=isMobile?Math.min(vignetteBody.offsetWidth-slidePadding,vignetteBody.offsetHeight-slidePadding):Math.min(vignetteBody.offsetWidth/3-slidePadding,vignetteBody.offsetHeight-slidePadding))},checkMobile=()=>{window.innerWidth<728?(isMobile=!0,$$invalidate(2,currentSettings=mobileSettings)):(isMobile=!1,$$invalidate(2,currentSettings=desktopSettings))},navClicked=direction=>{carouselElm.transitionSlide(direction);let event=Object.assign(Object.assign({},itemData.reportingData),{type:PolarisEvent.BTX_CLICKED});event[PolarisEvent.BTX_CLICKED]={value:direction,componentId:String(itemData.id),componentName:itemData.name||"",componentType:ScreenItemComponentType.VIGNETTE,clickType:"Next/Prev clicked",clickValue:"right"===direction?"Next":"Prev"},trackingStore$1.sendReport(event)};onMount((()=>{setIconSize(),checkMobile(),new ResizeObserver((()=>{var percentValue;setIconSize(),$$invalidate(4,carouselWidth=vignetteBody.offsetWidth),$$invalidate(6,(percentValue=carouselData.customControls.controlsOffsetX,controlOffset=(100-parseInt(percentValue))*((carouselWidth-carouselWidth/2)/100)+"px")),checkMobile()})).observe(vignetteBody)}));return $$self.$$set=$$props2=>{"itemData"in $$props2&&$$invalidate(0,itemData=$$props2.itemData)},$$self.$$.update=()=>{2&$$self.$$.dirty&&$$invalidate(4,carouselWidth=vignetteBody?vignetteBody.offsetWidth:101)},[itemData,vignetteBody,currentSettings,carouselElm,carouselWidth,iconSize,controlOffset,carouselData,slides,slidePadding,navClicked,navButton=>navButton?"fit"===navButton.data.displayType?"fill":navButton.data.displayType:"contain",icon=>icon||"https://live.polaris.me/assets/images/5827ab09-79a8-4f34-87eb-21749a1410f8/300",icon=>icon||"https://live.polaris.me/assets/images/e409aef7-a90b-48d1-a6a0-141a7f2a4f6d/300",()=>navClicked("left"),()=>navClicked("right"),function($$value){binding_callbacks[$$value?"unshift":"push"]((()=>{carouselElm=$$value,$$invalidate(3,carouselElm)}))},function($$value){binding_callbacks[$$value?"unshift":"push"]((()=>{vignetteBody=$$value,$$invalidate(1,vignetteBody)}))}]}class Vignette extends SvelteComponent{constructor(options){super(),init$6(this,options,instance$4,create_fragment$4,safe_not_equal,{itemData:0})}}function create_fragment$3(ctx){let div,raw_value=ctx[0].textContent+"";return{c(){div=element("div"),attr(div,"class","text-item-container svelte-67q1yo"),attr(div,"style",ctx[2])},m(target,anchor){insert(target,div,anchor),div.innerHTML=raw_value,ctx[4](div)},p(ctx2,[dirty]){1&dirty&&raw_value!==(raw_value=ctx2[0].textContent+"")&&(div.innerHTML=raw_value),4&dirty&&attr(div,"style",ctx2[2])},i:noop,o:noop,d(detaching){detaching&&detach(div),ctx[4](null)}}}function instance$3($$self,$$props,$$invalidate){let textItemConfig,textitemContainerStyles,containerEl,{itemData:itemData={}}=$$props;return onMount((()=>{})),$$self.$$set=$$props2=>{"itemData"in $$props2&&$$invalidate(3,itemData=$$props2.itemData)},$$self.$$.update=()=>{8&$$self.$$.dirty&&$$invalidate(0,textItemConfig=itemData.data),1&$$self.$$.dirty&&$$invalidate(2,textitemContainerStyles=`\n        font-family: ${textItemConfig.fontFamily}, arial, helvetica;\n        font-size: ${textItemConfig.fontSize}px;\n        color: ${textItemConfig.fontColor};\n        text-align: ${textItemConfig.textJustify};\n        text-wrap: ${textItemConfig.textWrap};\n    `)},[textItemConfig,containerEl,textitemContainerStyles,itemData,function($$value){binding_callbacks[$$value?"unshift":"push"]((()=>{containerEl=$$value,$$invalidate(1,containerEl)}))}]}class TextItem extends SvelteComponent{constructor(options){super(),init$6(this,options,instance$3,create_fragment$3,safe_not_equal,{itemData:3})}}var StagePositioning=(StagePositioning2=>(StagePositioning2.OFFSTAGE_POSITIVE="OffstagePositive",StagePositioning2.OFFSTAGE_NEGATIVE="OffstageNegative",StagePositioning2.ONSTAGE="Onstage",StagePositioning2))(StagePositioning||{});const getScreenItemStyles=(dimensionConfig,behaviorConfig,displayConfig,screenItem,currentResolution,isEdgeOrIE11,ordinal)=>{const zIndexStyles=()=>{let zValue=ordinal+1;return"component"===screenItem.type&&("ShoppingCart"===screenItem.componentType?zValue=1e5:screenItem.componentType===ScreenItemComponentType.PARALLAX_BACKGROUND&&(zValue=0)),`z-index: ${zValue};`},getGridCoordinateValue=(dimension,stagePositioning)=>stagePositioning===StagePositioning.OFFSTAGE_POSITIVE?"x"===dimension?displayConfig.columns:displayConfig.rows:stagePositioning===StagePositioning.OFFSTAGE_NEGATIVE?0:screenItem[dimension]||0,getGridTranslateValue=(dimension,stagePositioning)=>{const{x:x=0,y:y=0,height:height=0}=screenItem;return stagePositioning===StagePositioning.OFFSTAGE_POSITIVE?"x"===dimension?(x-displayConfig.columns)*currentResolution+"px":(y-displayConfig.rows)*currentResolution+"px":stagePositioning===StagePositioning.OFFSTAGE_NEGATIVE?(screenItem[dimension]||0)*currentResolution+"px":"0"},gridStyles=()=>{const{x:screenItemX=0,y:screenItemY=0,width:screenItemWidth=0,height:screenItemHeight=0}=screenItem;if(!isEdgeOrIE11){const width=(()=>{const{x:x=0,width:width=0}=screenItem;return width+x>displayConfig.columns||x<0?behaviorConfig===LayoutBehaviorType.FIXED?dimensionConfig.width/displayConfig.columns*width+"px":width*currentResolution+"px":""})(),height=(()=>{const{y:y=0,height:height=0}=screenItem;return height+y>displayConfig.rows||y<0?behaviorConfig===LayoutBehaviorType.FIXED?dimensionConfig.height/displayConfig.rows*height+"px":height*currentResolution+"px":""})(),offStageX=screenItemX>displayConfig.columns?StagePositioning.OFFSTAGE_POSITIVE:screenItemX<0?StagePositioning.OFFSTAGE_NEGATIVE:StagePositioning.ONSTAGE,offStageY=screenItemY>displayConfig.rows?StagePositioning.OFFSTAGE_POSITIVE:screenItemY<0?StagePositioning.OFFSTAGE_NEGATIVE:StagePositioning.ONSTAGE,gridXValue=getGridCoordinateValue("x",offStageX),gridYValue=getGridCoordinateValue("y",offStageY);let translate="";if(offStageX!==StagePositioning.ONSTAGE||offStageY!==StagePositioning.ONSTAGE){translate=`translate(${getGridTranslateValue("x",offStageX)}, ${getGridTranslateValue("y",offStageY)})`}return`grid-column: ${gridXValue+1} / ${screenItemWidth+screenItemX+1}; grid-row: ${gridYValue+1} / ${screenItemHeight+screenItemY+1}; width: ${width}; height: ${height}; transform: ${translate};`}return`position: absolute;width: ${screenItemWidth*currentResolution}px; height: ${screenItemHeight*currentResolution}px; left: ${screenItemX*currentResolution}px; top: ${screenItemY*currentResolution}px; `};let displayConfigStyles="";return displayConfig.displayType!==DisplayType.GRID&&screenItem.data&&"widthUnit"in screenItem.data?`${(()=>{const itemData=screenItem.data;return`\n            position: absolute;\n            width: ${screenItem.width}${itemData.widthUnit};\n            height: ${screenItem.height}${itemData.heightUnit};\n            left: ${screenItem.x}${itemData.xUnit};\n            top: ${screenItem.y}${itemData.yUnit};\n        `})()} ${zIndexStyles()}`:(displayConfigStyles=displayConfig.displayType===DisplayType.PIXEL?`\n            position: absolute;\n            width: ${screenItem.width}px;\n            height: ${screenItem.height}px;\n            left: ${screenItem.x}px;\n            top: ${screenItem.y}px;\n        `:displayConfig.displayType===DisplayType.PERCENT?`\n            position: absolute;\n            width: ${screenItem.width}%;\n            height: ${screenItem.height}%;\n            left: ${screenItem.x}%;\n            top: ${screenItem.y}%;\n        `:gridStyles(),`${displayConfigStyles} ${zIndexStyles()}`)};function create_if_block$2(ctx){let div,current_block_type_index,if_block,current;const if_block_creators=[create_if_block_1,create_else_block],if_blocks=[];function select_block_type(ctx2,dirty){return"raw"===ctx2[0].type?0:1}return current_block_type_index=select_block_type(ctx),if_block=if_blocks[current_block_type_index]=if_block_creators[current_block_type_index](ctx),{c(){div=element("div"),if_block.c(),attr(div,"class",null_to_empty(ctx[5])+" svelte-15wr7jp"),attr(div,"style",ctx[4])},m(target,anchor){insert(target,div,anchor),if_blocks[current_block_type_index].m(div,null),ctx[13](div),current=!0},p(ctx2,dirty){let previous_block_index=current_block_type_index;current_block_type_index=select_block_type(ctx2),current_block_type_index===previous_block_index?if_blocks[current_block_type_index].p(ctx2,dirty):(group_outros(),transition_out(if_blocks[previous_block_index],1,1,(()=>{if_blocks[previous_block_index]=null})),check_outros(),if_block=if_blocks[current_block_type_index],if_block?if_block.p(ctx2,dirty):(if_block=if_blocks[current_block_type_index]=if_block_creators[current_block_type_index](ctx2),if_block.c()),transition_in(if_block,1),if_block.m(div,null))},i(local){current||(transition_in(if_block),current=!0)},o(local){transition_out(if_block),current=!1},d(detaching){detaching&&detach(div),if_blocks[current_block_type_index].d(),ctx[13](null)}}}function create_else_block(ctx){let switch_instance,switch_instance_anchor,current;var switch_value=ctx[2];function switch_props(ctx2,dirty){return{props:{itemData:ctx2[0]}}}return switch_value&&(switch_instance=construct_svelte_component(switch_value,switch_props(ctx))),{c(){switch_instance&&create_component(switch_instance.$$.fragment),switch_instance_anchor=empty()},m(target,anchor){switch_instance&&mount_component(switch_instance,target,anchor),insert(target,switch_instance_anchor,anchor),current=!0},p(ctx2,dirty){if(4&dirty&&switch_value!==(switch_value=ctx2[2])){if(switch_instance){group_outros();const old_component=switch_instance;transition_out(old_component.$$.fragment,1,0,(()=>{destroy_component(old_component,1)})),check_outros()}switch_value?(switch_instance=construct_svelte_component(switch_value,switch_props(ctx2)),create_component(switch_instance.$$.fragment),transition_in(switch_instance.$$.fragment,1),mount_component(switch_instance,switch_instance_anchor.parentNode,switch_instance_anchor)):switch_instance=null}else if(switch_value){const switch_instance_changes={};1&dirty&&(switch_instance_changes.itemData=ctx2[0]),switch_instance.$set(switch_instance_changes)}},i(local){current||(switch_instance&&transition_in(switch_instance.$$.fragment,local),current=!0)},o(local){switch_instance&&transition_out(switch_instance.$$.fragment,local),current=!1},d(detaching){detaching&&detach(switch_instance_anchor),switch_instance&&destroy_component(switch_instance,detaching)}}}function create_if_block_1(ctx){let html_tag,html_anchor,raw_value=ctx[0].contents+"";return{c(){html_tag=new HtmlTag(!1),html_anchor=empty(),html_tag.a=html_anchor},m(target,anchor){html_tag.m(raw_value,target,anchor),insert(target,html_anchor,anchor)},p(ctx2,dirty){1&dirty&&raw_value!==(raw_value=ctx2[0].contents+"")&&html_tag.p(raw_value)},i:noop,o:noop,d(detaching){detaching&&(detach(html_anchor),html_tag.d())}}}function create_fragment$2(ctx){let div,div_class_value,div_data_component_type_value,div_id_value,current,if_block=ctx[3]&&create_if_block$2(ctx);return{c(){var _a;div=element("div"),if_block&&if_block.c(),attr(div,"class",div_class_value="screen_item "+(null==(_a=ctx[0].classes)?void 0:_a.join(" "))+" "+ctx[0].type+" "+ctx[0].componentType+" screen-item-id--"+String(ctx[0].id)+" svelte-15wr7jp"),attr(div,"data-component-type",div_data_component_type_value=ctx[0].type+" "+ctx[0].componentType),attr(div,"style",ctx[6]()),attr(div,"id",div_id_value=String(ctx[0].id))},m(target,anchor){insert(target,div,anchor),if_block&&if_block.m(div,null),current=!0},p(ctx2,[dirty]){var _a;ctx2[3]?if_block?(if_block.p(ctx2,dirty),8&dirty&&transition_in(if_block,1)):(if_block=create_if_block$2(ctx2),if_block.c(),transition_in(if_block,1),if_block.m(div,null)):if_block&&(group_outros(),transition_out(if_block,1,1,(()=>{if_block=null})),check_outros()),(!current||1&dirty&&div_class_value!==(div_class_value="screen_item "+(null==(_a=ctx2[0].classes)?void 0:_a.join(" "))+" "+ctx2[0].type+" "+ctx2[0].componentType+" screen-item-id--"+String(ctx2[0].id)+" svelte-15wr7jp"))&&attr(div,"class",div_class_value),(!current||1&dirty&&div_data_component_type_value!==(div_data_component_type_value=ctx2[0].type+" "+ctx2[0].componentType))&&attr(div,"data-component-type",div_data_component_type_value),(!current||1&dirty&&div_id_value!==(div_id_value=String(ctx2[0].id)))&&attr(div,"id",div_id_value)},i(local){current||(transition_in(if_block),current=!0)},o(local){transition_out(if_block),current=!1},d(detaching){detaching&&detach(div),if_block&&if_block.d()}}}function instance$2($$self,$$props,$$invalidate){let $btxStore;var _a;component_subscribe($$self,btxStore$1,($$value=>$$invalidate(12,$btxStore=$$value)));let{screenItem:screenItem={}}=$$props,{ordinal:ordinal}=$$props,{keyframeTime:keyframeTime=null}=$$props,{isAlwaysVisible:isAlwaysVisible=!1}=$$props,{omitViewedEvents:omitViewedEvents=!1}=$$props;let screenItemEl,screenItemComponent,vr,dimensionConfig,behaviorConfig,displayConfig,isVisible,currentKeyframeTime=0,viewEvent={};null!==(_a=screenItem.classes)&&void 0!==_a||(screenItem.classes=[]),onMount((()=>{$$invalidate(2,screenItemComponent=(name2=>{switch(name2){case"ClickArea":return ClickAreaItem;case"Flipcard":return FlipCardItem;case"image":return ImageItem;case"Media":return Media;case"ParallaxBackground":return ParallaxBackground;case"VideoPlayerControls":return VideoPlayerControls;case"Carousel":return CarouselContainer;case"Progress":return ProgressBar;case"Vignette":return Vignette;case"Text":return TextItem;default:return null}})(screenItem.componentType)),screenItem.reportingData&&"raw"!==screenItem.type&&(viewEvent={type:PolarisEvent.BTX_COMPONENTS_VIEWED},viewEvent[PolarisEvent.BTX_COMPONENTS_VIEWED]=[Object.assign({screenId:String(screenItem.reportingData.screenId),screenName:screenItem.reportingData.screenName,componentId:screenItem.componentType===ScreenItemComponentType.FLIPCARD?String(Number(`${screenItem.id}.1`)):String(screenItem.id),componentType:screenItem.componentType,componentName:screenItem.componentType===ScreenItemComponentType.FLIPCARD?`${screenItem.name},Front Card`:screenItem.name},currentKeyframeTime>=0&&{keyframe:currentKeyframeTime})],$$invalidate(11,vr=new ViewRportingUtil(viewEvent)),addJS(),setRect())}));const addJS=()=>{screenItem.js&&addScriptToPage(`(function() { ${screenItem.js}; }())`,"script")},setRect=()=>{screenItemEl&&screenItemEl.getBoundingClientRect&&screenItemEl.getBoundingClientRect()},itemClassNames=(()=>{let classNames="screen-item";return screenItem&&(Array.isArray(screenItem.classes)&&(classNames+=" "+screenItem.classes.join(" ")),screenItem.componentType!==ScreenItemComponentType.CAROUSEL&&screenItem.componentType!==ScreenItemComponentType.FLIPCARD||(classNames+=" overflow-visible")),classNames})();return onMount((()=>{})),$$self.$$set=$$props2=>{"screenItem"in $$props2&&$$invalidate(0,screenItem=$$props2.screenItem),"ordinal"in $$props2&&$$invalidate(7,ordinal=$$props2.ordinal),"keyframeTime"in $$props2&&$$invalidate(8,keyframeTime=$$props2.keyframeTime),"isAlwaysVisible"in $$props2&&$$invalidate(9,isAlwaysVisible=$$props2.isAlwaysVisible),"omitViewedEvents"in $$props2&&$$invalidate(10,omitViewedEvents=$$props2.omitViewedEvents)},$$self.$$.update=()=>{7937&$$self.$$.dirty&&(dimensionConfig=btxStore$1.getDimensionsConfig(),behaviorConfig=btxStore$1.getBehaviorConfig(),displayConfig=btxStore$1.getDisplayConfig(),$$invalidate(3,isVisible=isAlwaysVisible||btxStore$1.checkScreenItemIsVisible(screenItem.id)||!!keyframeTime),currentKeyframeTime=keyframeTime||$btxStore.currentTime,$btxStore.isPlayerVisible&&vr&&!omitViewedEvents&&vr.sendViewReport())},[screenItem,screenItemEl,screenItemComponent,isVisible,"",itemClassNames,()=>getScreenItemStyles(dimensionConfig,behaviorConfig,displayConfig,screenItem,$btxStore.currentResolution,$btxStore.isEdgeOrIE11,ordinal),ordinal,keyframeTime,isAlwaysVisible,omitViewedEvents,vr,$btxStore,function($$value){binding_callbacks[$$value?"unshift":"push"]((()=>{screenItemEl=$$value,$$invalidate(1,screenItemEl)}))}]}class ScreenItem extends SvelteComponent{constructor(options){super(),init$6(this,options,instance$2,create_fragment$2,safe_not_equal,{screenItem:0,ordinal:7,keyframeTime:8,isAlwaysVisible:9,omitViewedEvents:10})}}var GoogleFontUrls=(GoogleFontUrls2=>(GoogleFontUrls2.ALEGREYA="https://fonts.googleapis.com/css2?family=Alegreya:ital,wght@0,400..900;1,400..900&display=swap",GoogleFontUrls2.INTER="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap",GoogleFontUrls2.LATO="https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,100;0,300;0,400;0,700;0,900;1,100;1,300;1,400;1,700;1,900&display=swap",GoogleFontUrls2.LORA="https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,400..700;1,400..700&display=swap",GoogleFontUrls2.MERRIWEATHER="https://fonts.googleapis.com/css2?family=Merriweather:ital,wght@0,300;0,400;0,700;0,900;1,300;1,400;1,700;1,900&display=swap",GoogleFontUrls2.NOTO_SANS="https://fonts.googleapis.com/css2?family=Noto+Sans:ital,wght@0,100..900;1,100..900&display=swap",GoogleFontUrls2.NOTO_SERIF="https://fonts.googleapis.com/css2?family=Noto+Serif:ital,wght@0,100..900;1,100..900&display=swap",GoogleFontUrls2.OSWALD="https://fonts.googleapis.com/css2?family=Oswald:wght@200..700&display=swap",GoogleFontUrls2.PRATA="https://fonts.googleapis.com/css2?family=Prata&display=swap",GoogleFontUrls2.ROBOTO="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap",GoogleFontUrls2.SOURCE_CODE_PRO="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,200..900;1,200..900&display=swap",GoogleFontUrls2.SPACE_MONO="https://fonts.googleapis.com/css2?family=Space+Mono:ital,wght@0,400;0,700;1,400;1,700&display=swap",GoogleFontUrls2))(GoogleFontUrls||{});function get_each_context$1(ctx,list,i){const child_ctx=ctx.slice();return child_ctx[17]=list[i],child_ctx[19]=i,child_ctx}function get_each_context_1(ctx,list,i){const child_ctx=ctx.slice();return child_ctx[17]=list[i],child_ctx[19]=i,child_ctx}function create_if_block$1(ctx){let t,each1_anchor,current,each_blocks_1=[],each0_lookup=new Map,each_blocks=[],each1_lookup=new Map,each_value_1=ensure_array_like(ctx[9]());const get_key=ctx2=>ctx2[17].id;for(let i=0;i<each_value_1.length;i+=1){let child_ctx=get_each_context_1(ctx,each_value_1,i),key=get_key(child_ctx);each0_lookup.set(key,each_blocks_1[i]=create_each_block_1(key,child_ctx))}let each_value=ensure_array_like(ctx[3]);const get_key_1=ctx2=>ctx2[17].id+ctx2[1].time;for(let i=0;i<each_value.length;i+=1){let child_ctx=get_each_context$1(ctx,each_value,i),key=get_key_1(child_ctx);each1_lookup.set(key,each_blocks[i]=create_each_block$1(key,child_ctx))}return{c(){for(let i=0;i<each_blocks_1.length;i+=1)each_blocks_1[i].c();t=space();for(let i=0;i<each_blocks.length;i+=1)each_blocks[i].c();each1_anchor=empty()},m(target,anchor){for(let i=0;i<each_blocks_1.length;i+=1)each_blocks_1[i]&&each_blocks_1[i].m(target,anchor);insert(target,t,anchor);for(let i=0;i<each_blocks.length;i+=1)each_blocks[i]&&each_blocks[i].m(target,anchor);insert(target,each1_anchor,anchor),current=!0},p(ctx2,dirty){640&dirty&&(each_value_1=ensure_array_like(ctx2[9]()),group_outros(),each_blocks_1=update_keyed_each(each_blocks_1,dirty,get_key,0,ctx2,each_value_1,each0_lookup,t.parentNode,outro_and_destroy_block,create_each_block_1,t,get_each_context_1),check_outros()),142&dirty&&(each_value=ensure_array_like(ctx2[3]),group_outros(),each_blocks=update_keyed_each(each_blocks,dirty,get_key_1,0,ctx2,each_value,each1_lookup,each1_anchor.parentNode,outro_and_destroy_block,create_each_block$1,each1_anchor,get_each_context$1),check_outros())},i(local){if(!current){for(let i=0;i<each_value_1.length;i+=1)transition_in(each_blocks_1[i]);for(let i=0;i<each_value.length;i+=1)transition_in(each_blocks[i]);current=!0}},o(local){for(let i=0;i<each_blocks_1.length;i+=1)transition_out(each_blocks_1[i]);for(let i=0;i<each_blocks.length;i+=1)transition_out(each_blocks[i]);current=!1},d(detaching){detaching&&(detach(t),detach(each1_anchor));for(let i=0;i<each_blocks_1.length;i+=1)each_blocks_1[i].d(detaching);for(let i=0;i<each_blocks.length;i+=1)each_blocks[i].d(detaching)}}}function create_each_block_1(key_1,ctx){let first,screenitem,current;return screenitem=new ScreenItem({props:{screenItem:{...ctx[17],reportingData:ctx[7]},ordinal:ctx[19]}}),{key:key_1,first:null,c(){first=empty(),create_component(screenitem.$$.fragment),this.first=first},m(target,anchor){insert(target,first,anchor),mount_component(screenitem,target,anchor),current=!0},p(new_ctx,dirty){ctx=new_ctx},i(local){current||(transition_in(screenitem.$$.fragment,local),current=!0)},o(local){transition_out(screenitem.$$.fragment,local),current=!1},d(detaching){detaching&&detach(first),destroy_component(screenitem,detaching)}}}function create_each_block$1(key_1,ctx){let first,screenitem,current;return screenitem=new ScreenItem({props:{screenItem:{...ctx[17],reportingData:ctx[7]},ordinal:20+ctx[19],keyframeTime:ctx[2].currentKeyframeTime}}),{key:key_1,first:null,c(){first=empty(),create_component(screenitem.$$.fragment),this.first=first},m(target,anchor){insert(target,first,anchor),mount_component(screenitem,target,anchor),current=!0},p(new_ctx,dirty){ctx=new_ctx;const screenitem_changes={};8&dirty&&(screenitem_changes.screenItem={...ctx[17],reportingData:ctx[7]}),8&dirty&&(screenitem_changes.ordinal=20+ctx[19]),4&dirty&&(screenitem_changes.keyframeTime=ctx[2].currentKeyframeTime),screenitem.$set(screenitem_changes)},i(local){current||(transition_in(screenitem.$$.fragment,local),current=!0)},o(local){transition_out(screenitem.$$.fragment,local),current=!1},d(detaching){detaching&&detach(first),destroy_component(screenitem,detaching)}}}function create_fragment$1(ctx){let div,div_id_value,current,if_block=ctx[6]&&create_if_block$1(ctx);return{c(){div=element("div"),if_block&&if_block.c(),attr(div,"class",null_to_empty(ctx[8])+" svelte-1a22fzm"),attr(div,"id",div_id_value=String(ctx[0].id)),attr(div,"style",ctx[5])},m(target,anchor){insert(target,div,anchor),if_block&&if_block.m(div,null),ctx[11](div),current=!0},p(ctx2,[dirty]){ctx2[6]?if_block?(if_block.p(ctx2,dirty),64&dirty&&transition_in(if_block,1)):(if_block=create_if_block$1(ctx2),if_block.c(),transition_in(if_block,1),if_block.m(div,null)):if_block&&(group_outros(),transition_out(if_block,1,1,(()=>{if_block=null})),check_outros()),(!current||1&dirty&&div_id_value!==(div_id_value=String(ctx2[0].id)))&&attr(div,"id",div_id_value),(!current||32&dirty)&&attr(div,"style",ctx2[5])},i(local){current||(transition_in(if_block),current=!0)},o(local){transition_out(if_block),current=!1},d(detaching){detaching&&detach(div),if_block&&if_block.d(),ctx[11](null)}}}function instance$1($$self,$$props,$$invalidate){let isCurrentScreenActive,$btxStore;component_subscribe($$self,btxStore$1,($$value=>$$invalidate(2,$btxStore=$$value)));let{screen:screen}=$$props,currentKeyframe={},currentKeyframeItems=[],reportingData={screenId:String(screen.id),screenName:screen.name||""};const viewEvent={type:PolarisEvent.BTX_SCREEN_VIEWED,screenId:String(screen.id)};viewEvent[PolarisEvent.BTX_SCREEN_VIEWED]={screenId:String(screen.id),screenName:screen.name||""};const vr=new ViewRportingUtil(viewEvent);let screenContainer,styles="";const screenClassNames=`screen screen-id--${screen.id} ${(()=>{var _a;if(!screen)return"";const visibility=isCurrentScreenActive?"visible":"hidden",parallaxBackground=screen.items.some((item=>item.componentType===ScreenItemComponentType.PARALLAX_BACKGROUND)),mappedConfigClasses=(null===(_a=screen.classes)||void 0===_a?void 0:_a.join(" "))||"";return`${screen.name} ${mappedConfigClasses} ${visibility} ${parallaxBackground?"screen--center-fixed":""}`.trim()})()}`,getScreenItems=()=>screen?screen.items:[];return onMount((()=>{(()=>{const importUrls=new Set,neededGoogleFonts=[];if(getScreenItems().map((screenItem=>{if(screenItem.componentType===ScreenItemComponentType.TEXT){const currentScreenTextItem=screenItem.data;neededGoogleFonts.push(currentScreenTextItem.fontFamily)}})),neededGoogleFonts.forEach((googleFont=>{if("sans-serif"!==googleFont){const enumKey=googleFont.replaceAll(" ","_").toUpperCase(),fontUrl=GoogleFontUrls[enumKey];fontUrl&&importUrls.add(`@import url('${fontUrl}');`)}})),!importUrls.size)return;const style=document.createElement("style");style.id="proxima-btx-google-fonts",style.type="text/css",style.innerHTML=Array.from(importUrls).join("\n"),document.head.appendChild(style)})(),function(){if(!screen||!screen.js||""===screen.js.trim())return;const scriptIdentifier=`screen-js-${screen.id}`;if(document.querySelector(`script[data-source="${scriptIdentifier}"]`))return;const script=document.createElement("script");script.textContent=screen.js,script.setAttribute("data-source",scriptIdentifier),document.body.appendChild(script)}()})),$$self.$$set=$$props2=>{"screen"in $$props2&&$$invalidate(0,screen=$$props2.screen)},$$self.$$.update=()=>{1&$$self.$$.dirty&&$$invalidate(6,isCurrentScreenActive=btxStore$1.getIsScreenActive(screen.id)),1031&$$self.$$.dirty&&($$invalidate(5,styles=getGridStyles(btxStore$1.getDimensionsConfig(),btxStore$1.getBehaviorConfig(),btxStore$1.getDisplayConfig(),$btxStore.currentResolution,$btxStore.isEdgeOrIE11)),$$invalidate(10,vr.activeScreen=btxStore$1.getIsScreenActive(screen.id),vr),btxStore$1.getIsScreenActive(screen.id)&&$btxStore.isPlayerVisible&&vr.sendViewReport(),$$invalidate(1,currentKeyframe=btxStore$1.getCurrentKeyFrameItems(screen)||{}),$$invalidate(3,currentKeyframeItems=currentKeyframe.items||[]))},[screen,currentKeyframe,$btxStore,currentKeyframeItems,screenContainer,styles,isCurrentScreenActive,reportingData,screenClassNames,getScreenItems,vr,function($$value){binding_callbacks[$$value?"unshift":"push"]((()=>{screenContainer=$$value,$$invalidate(4,screenContainer)}))}]}class Screen extends SvelteComponent{constructor(options){super(),init$6(this,options,instance$1,create_fragment$1,safe_not_equal,{screen:0})}}const updateDisplay=resizeObserver=>{function updateAppDimensionsAndUpdateResolution(r){const rect=document.getElementsByTagName("body")[0].getBoundingClientRect();btxStore$1.setAppDimensions({width:rect.width,height:rect.height}),function(){const dimensions=btxStore$1.getAppDimensions(),{columns:columns,rows:rows}=btxStore$1.getDisplayConfig()||{};if(dimensions&&columns&&rows){const colResolution=dimensions.width/columns,rowResolution=dimensions.height/rows;btxStore$1.setResolution(Math.min(colResolution,rowResolution))}}()}updateAppDimensionsAndUpdateResolution(),window.addEventListener("resize",(()=>{updateAppDimensionsAndUpdateResolution()})),resizeObserver.observe(document.getElementById("app"))};function get_each_context(ctx,list,i){const child_ctx=ctx.slice();return child_ctx[8]=list[i],child_ctx[10]=i,child_ctx}function create_if_block(ctx){let each_1_anchor,current,each_value=ensure_array_like(ctx[0]),each_blocks=[];for(let i=0;i<each_value.length;i+=1)each_blocks[i]=create_each_block(get_each_context(ctx,each_value,i));const out=i=>transition_out(each_blocks[i],1,1,(()=>{each_blocks[i]=null}));return{c(){for(let i=0;i<each_blocks.length;i+=1)each_blocks[i].c();each_1_anchor=empty()},m(target,anchor){for(let i=0;i<each_blocks.length;i+=1)each_blocks[i]&&each_blocks[i].m(target,anchor);insert(target,each_1_anchor,anchor),current=!0},p(ctx2,dirty){if(1&dirty){let i;for(each_value=ensure_array_like(ctx2[0]),i=0;i<each_value.length;i+=1){const child_ctx=get_each_context(ctx2,each_value,i);each_blocks[i]?(each_blocks[i].p(child_ctx,dirty),transition_in(each_blocks[i],1)):(each_blocks[i]=create_each_block(child_ctx),each_blocks[i].c(),transition_in(each_blocks[i],1),each_blocks[i].m(each_1_anchor.parentNode,each_1_anchor))}for(group_outros(),i=each_value.length;i<each_blocks.length;i+=1)out(i);check_outros()}},i(local){if(!current){for(let i=0;i<each_value.length;i+=1)transition_in(each_blocks[i]);current=!0}},o(local){each_blocks=each_blocks.filter(Boolean);for(let i=0;i<each_blocks.length;i+=1)transition_out(each_blocks[i]);current=!1},d(detaching){detaching&&detach(each_1_anchor),destroy_each(each_blocks,detaching)}}}function create_each_block(ctx){let screen_1,current;return screen_1=new Screen({props:{screen:ctx[8]}}),{c(){create_component(screen_1.$$.fragment)},m(target,anchor){mount_component(screen_1,target,anchor),current=!0},p(ctx2,dirty){const screen_1_changes={};1&dirty&&(screen_1_changes.screen=ctx2[8]),screen_1.$set(screen_1_changes)},i(local){current||(transition_in(screen_1.$$.fragment,local),current=!0)},o(local){transition_out(screen_1.$$.fragment,local),current=!1},d(detaching){destroy_component(screen_1,detaching)}}}function create_fragment(ctx){let main2,div,current,if_block=ctx[2]&&create_if_block(ctx);return{c(){main2=element("main"),div=element("div"),if_block&&if_block.c(),attr(div,"id","btx-app"),attr(div,"class",null_to_empty(ctx[3]())+" svelte-1nxvjj6"),attr(main2,"class","svelte-1nxvjj6")},m(target,anchor){insert(target,main2,anchor),append(main2,div),if_block&&if_block.m(div,null),ctx[5](div),current=!0},p(ctx2,[dirty]){ctx2[2]?if_block?(if_block.p(ctx2,dirty),4&dirty&&transition_in(if_block,1)):(if_block=create_if_block(ctx2),if_block.c(),transition_in(if_block,1),if_block.m(div,null)):if_block&&(group_outros(),transition_out(if_block,1,1,(()=>{if_block=null})),check_outros())},i(local){current||(transition_in(if_block),current=!0)},o(local){transition_out(if_block),current=!1},d(detaching){detaching&&detach(main2),if_block&&if_block.d(),ctx[5](null)}}}function instance($$self,$$props,$$invalidate){let screens_length,$btxStore;component_subscribe($$self,btxStore$1,($$value=>$$invalidate(4,$btxStore=$$value)));var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};let screens=[];let playerContainer;return onMount((()=>__awaiter(void 0,void 0,void 0,(function*(){yield btxStore$1.initPlayer(),updateDisplay(new ResizeObserver((()=>{}))),trackingStore.sendImpressionEvents(),VisibilityUtil.addIntersectionObserver((isIntersecting=>{if(!isIntersecting)return;btxStore$1.setValue("isPlayerVisible",isIntersecting);const event={type:PolarisEvent.BTX_VIEWED};event[PolarisEvent.BTX_VIEWED]={};new ViewRportingUtil(event).sendViewReport()}),playerContainer),(yield isQuickPreview())&&btxStore$1.setValue("isLoadingInQuickPreview",!0)})))),$$self.$$.update=()=>{16&$$self.$$.dirty&&($btxStore.screens&&$$invalidate(0,screens=$btxStore.screens),void 0!==$btxStore.currentLayoutIndex&&(btxStore$1.initScreens(),$btxStore.isLoadingInQuickPreview&&window.parent.postMessage({type:"playerSizeChanged",dimensions:btxStore$1.getDimensionsConfig()},"*"))),1&$$self.$$.dirty&&$$invalidate(2,screens_length=screens.length)},[screens,playerContainer,screens_length,()=>"btx btx-player bellatrix-player"+(btxStore$1.getCurrentParallaBackground?" has-parallax-background":""),$btxStore,function($$value){binding_callbacks[$$value?"unshift":"push"]((()=>{playerContainer=$$value,$$invalidate(1,playerContainer)}))}]}new class extends SvelteComponent{constructor(options){super(),init$6(this,options,instance,create_fragment,safe_not_equal,{})}}({target:document.getElementById("app")});
/*! Build Date: Tue Dec 03 2024 17:28:09 GMT+0000 (Greenwich Mean Time), Version: 1.20.0 */
//# sourceMappingURL=btx-player.js.map
